:root{
  /* Paleta pastel corporativa (base clara) */
  --bg: #f7f7fb;
  --card: #ffffff;
  --ink: #0f172a;
  --muted: #6b7280;
  --primary: #7aa2ff;
  --accent: #22c55e;
  --ok: #86efac;
  --bad: #fca5a5;
  --warn: #fde68a;

  /* Estètica futurista */
  --radius: 18px;
  --radius-lg: 22px;
  --shadow: 0 12px 28px rgba(15, 23, 42, .10), 0 2px 6px rgba(15, 23, 42, .06);
  --shadow-soft: 0 8px 22px rgba(27,30,40,.08);
  --hair: #e5e7eb;
  --focus: 0 0 0 3px rgba(122,162,255,.35);
  --ring: 0 0 0 6px rgba(122,162,255,.12);

  /* Gradients i vidre */
  --aurora-1: linear-gradient(120deg, #e9edff 0%, #eef7ff 40%, #f6fff4 100%);
  --aurora-2: linear-gradient(135deg, rgba(122,162,255,.28), rgba(34,197,94,.18));
  --glass: rgba(255,255,255,.72);
  --glass-strong: rgba(255,255,255,.84);

  /* Progrés i il·luminacions */
  --glow-primary: 0 8px 30px rgba(122,162,255,.35);
  --glow-accent: 0 8px 30px rgba(34,197,94,.28);
  --grid-gap: 14px;

  /* Tipografia */
  --font-ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

*{box-sizing:border-box}
html,body{height:100%}
@media (prefers-reduced-motion: reduce){
  *{animation: none !important; transition: none !important; scroll-behavior: auto !important;}
}

body{
  margin:0; font-family: var(--font-ui);
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(122,162,255,.12), transparent 60%),
    radial-gradient(900px 480px at 100% 0%, rgba(34,197,94,.10), transparent 60%),
    linear-gradient(180deg, var(--bg) 0%, #eef2ff 300px);
}

/* ===== Header “glass” amb línia subtil ===== */
header{
  position:sticky; top:0; z-index:50;
  backdrop-filter:saturate(1.15) blur(10px);
  -webkit-backdrop-filter:saturate(1.15) blur(10px);
  background:var(--glass);
  border-bottom:1px solid rgba(99,102,241,.12);
}
.wrap{max-width:1100px; margin:0 auto; padding: clamp(14px, 2vw, 24px);}
.brand{display:flex; align-items:center; gap:12px;}
.logo{
  width:40px;height:40px; display:grid; place-items:center; border-radius:14px;
  background:
    conic-gradient(from 180deg at 50% 50%, #c7d2fe, #93c5fd, #a7f3d0, #c7d2fe);
  box-shadow: var(--glow-primary); color:#0f172a; font-weight:900;
  position:relative; overflow:hidden;
}
.logo::after{
  content:""; position:absolute; inset:0; border-radius:inherit;
  background: radial-gradient(120px 60px at -20% -20%, rgba(255,255,255,.55), transparent 40%),
              radial-gradient(120px 60px at 120% 120%, rgba(255,255,255,.35), transparent 40%);
  pointer-events:none;
}
.brand h1{font-size:1.1rem; margin:0; letter-spacing:.2px}
nav{display:flex; gap:8px; flex-wrap:wrap}
.row{display:flex; justify-content:space-between; align-items:center; gap:12px}

/* Pills amb subtil 3D i focus visibles */
.pill{
  border:1px solid var(--hair); color:var(--ink); background:var(--glass-strong);
  padding:10px 14px; border-radius:999px; cursor:pointer; transition:.24s ease; font-weight:700; font-size:.92rem;
  box-shadow: inset 0 -1px 0 rgba(255,255,255,.6), 0 1px 2px rgba(15, 23, 42, .04);
}
.pill:hover{transform:translateY(-1px); background:#fff; box-shadow: var(--shadow-soft);}
.pill:focus-visible{outline:none; box-shadow: var(--ring), var(--shadow-soft);}

.right{display:flex; align-items:center; gap:10px}
.input, select{
  background:#f3f4f6; border:1px solid var(--hair); color:var(--ink);
  border-radius:12px; padding:10px 12px; outline:none; font-size:.95rem; transition:.2s;
}
.input:focus, select:focus{box-shadow:var(--focus); border-color:transparent}

/* ===== Layout principal i targetes ===== */
main{padding: 28px 0 60px}
.hero{display:grid; grid-template-columns: 1fr; gap:20px}
.panel{
  background: var(--card);
  border:1px solid rgba(99,102,241,.12);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position:relative; overflow:hidden;
}
.panel::before{
  /* toc aurora fi a la cantonada */
  content:""; position:absolute; inset:auto -20% -20% auto; width:60%; height:60%;
  background: radial-gradient(60% 60% at 80% 80%, rgba(122,162,255,.18), transparent 60%),
              radial-gradient(40% 40% at 20% 20%, rgba(34,197,94,.12), transparent 60%);
  pointer-events:none; filter: blur(10px);
}
.card{padding: clamp(16px, 2.2vw, 26px)}
.title{font-size: clamp(1.3rem, 2.6vw, 2rem); margin:0 0 10px}
.subtitle{color:var(--muted); margin:0 0 18px}

.grid{display:grid; grid-template-columns: repeat(4, 1fr); gap:var(--grid-gap)}
@media (max-width: 1000px){ .grid{grid-template-columns: repeat(2, 1fr)} }
@media (max-width: 560px){ .grid{grid-template-columns: 1fr} }

/* ===== Opcions estil “neo-glass” amb accent hologràfic ===== */
.option{
  position:relative; overflow:hidden; padding:16px; border-radius:16px; cursor:pointer;
  border:1px solid rgba(99,102,241,.14); transition:transform .2s, box-shadow .2s, border-color .2s, background .2s;
  background:linear-gradient(180deg, #fbfcff, #f6f7fb);
  box-shadow: 0 1px 2px rgba(15, 23, 42, .04);
}
.option::after{
  content:""; position:absolute; inset:0;
  background: radial-gradient(60% 40% at 0% 0%, rgba(122,162,255,.12), transparent 45%),
              radial-gradient(50% 30% at 100% 100%, rgba(34,197,94,.10), transparent 40%);
  opacity:.7; pointer-events:none;
}
.option:hover{
  transform: translateY(-2px);
  border-color: #cbd5e1;
  background:#fff;
  box-shadow: var(--shadow);
}
.option h3{margin:8px 0 6px; font-size:1rem}
.option p{margin:0; color:var(--muted); font-size:.9rem}
.badge{
  font-size:.75rem; color:#0f172a; font-weight:800; letter-spacing:.3px;
  background:linear-gradient(135deg, var(--primary), #c7d2fe); padding:6px 10px; border-radius:999px; display:inline-block;
  box-shadow: inset 0 -1px 0 rgba(255,255,255,.6);
}

/* Seccions i controls */
.section-title{margin: 18px 0 8px; font-size:1rem; color:var(--muted); letter-spacing:.3px}
.controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
.controls .field{display:flex; align-items:center; gap:8px}
.controls .group{display:flex; gap:8px; flex-wrap:wrap}

/* ===== Estètica NOVA per botons de mòduls CFG (mantinguda) ===== */
#cfg-specific .toggle {
  display: inline-flex; align-items: center; gap: 10px;
  padding: 8px 18px; margin: 4px 9px 4px 0;
  background: #f7f7fb; color: var(--ink);
  border-radius: 999px; border: 1.5px solid var(--hair);
  font-weight: 600; font-size: 1.02em;
  box-shadow: 0 2px 8px 0 rgba(27,30,40,0.04);
  cursor: pointer;
  transition: background .2s, border-color .22s, color .19s, box-shadow .18s, transform .18s;
  user-select: none;
}
#cfg-specific .toggle:hover,
#cfg-specific .toggle:focus-within{
  background: #e0f8eb; border-color: var(--accent); color: #15803d;
  box-shadow: 0 6px 18px rgba(34,197,94,0.14), var(--glow-accent);
  transform: translateY(-1px);
}
#cfg-specific .toggle .check{
  accent-color: var(--accent);
  width: 1.15em; height: 1.15em;
  background: #fff; border-radius: 50%; border: 1.5px solid var(--hair); margin: 0; flex-shrink: 0;
  transition: accent-color .2s, border-color .2s;
}
#cfg-specific .toggle input:checked + span,
#cfg-specific .toggle input:checked{ filter: drop-shadow(0 0 3px #bbf7d0); }
#cfg-specific .group{ display:flex; flex-wrap:wrap; gap:8px; margin-bottom:.7em }
#cfg-specific .controls{ margin-bottom:1.1em }

/* Toggles genèrics */
.toggle{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--hair); border-radius:12px; background:#fff; transition:.2s}
.toggle:focus-visible{outline:none; box-shadow: var(--ring);}
.check{width:18px; height:18px}

/* ===== Botons: relleu suau i micro-hover 3D ===== */
button{
  background:linear-gradient(135deg, var(--primary), #a5b4fc);
  color:#0f172a; border:0; padding:12px 14px; border-radius:14px; font-weight:800; cursor:pointer;
  box-shadow: 0 1px 0 rgba(255,255,255,.6) inset, var(--shadow);
  transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
  will-change: transform;
}
button:hover{ transform: translateY(-1px) scale(1.01); box-shadow: var(--glow-primary), var(--shadow); }
button:active{ transform: translateY(0); filter: brightness(.98); }
button:focus-visible{ outline: none; box-shadow: var(--ring), var(--glow-primary); }
.btn-secondary{
  background:#eef2ff; border:1px solid var(--hair); color:#0f172a; font-weight:800;
}
.btn-ghost{
  background: transparent; border:1px dashed var(--hair); color:var(--muted); font-weight:700;
}
.hidden{display:none}

/* ===== Quiz ===== */
.quiz{display:grid; grid-template-columns: 1.1fr .9fr; gap:18px}
@media (max-width: 1000px){ .quiz{grid-template-columns: 1fr} }
.q-header{display:flex; align-items:center; justify-content:space-between; gap:10px}
.progress{
  height: 10px; background: #e5e7eb; border-radius:999px; overflow:hidden; position:relative;
}
.progress > i{
  display:block; height:100%; width:0%;
  background: linear-gradient(90deg, var(--primary), #93c5fd);
  box-shadow: var(--glow-primary);
  transition: width .35s ease;
}
.q{display:grid; gap:12px}
.q h2{font-size: clamp(1.4rem, 2.8vw, 2.2rem); margin:6px 0}
.q .meta{color:var(--muted); font-size:.95rem}
.answer-row{display:flex; gap:10px; align-items:center}
.answer{flex:1; font-size:1.2rem}

.kbd{
  display:inline-grid; place-items:center; min-width:46px; height:46px; border-radius:12px;
  background:#f3f4f6; border:1px solid var(--hair); font-weight:800; color:#0f172a;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 6px 16px rgba(15,23,42,.06);
}

/* Tauler i feedback */
.board{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px}
.board button{height:50px}

.feedback{
  padding:12px; border-radius:12px; background: #ecfdf5; border:1px solid #bbf7d0; color:#065f46;
  box-shadow: 0 1px 0 rgba(255,255,255,.6) inset;
}
.feedback.bad{background: #fff1f2; border-color: #fecaca; color:#7f1d1d}

/* Chips & timer */
.timer{font-variant-numeric: tabular-nums; font-feature-settings:"tnum" on; font-size:1.2rem}
.chip{
  border:1px solid var(--hair); color:var(--muted); padding:6px 10px; border-radius:999px; background:#fff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}

/* ===== Resultats ===== */
table{width:100%; border-collapse:collapse; overflow:hidden; border-radius:12px}
th, td{padding:10px 12px; border-bottom:1px solid var(--hair); text-align:left}
th{color:var(--muted); font-weight:800; background: #f8fafc}
tr:hover td{background: #f9fbff}
.tbl-actions{display:flex; gap:8px}

/* ===== Footer ===== */
footer{opacity:.95; font-size:.9rem; padding:40px 0 60px; color:var(--muted)}
.link{color:#6366f1; text-decoration:none}
.link:hover{text-decoration:underline}

/* ===== Microanimacions ===== */
.pulse{animation:pulse 1.6s infinite}
@keyframes pulse{0%{opacity:.45}50%{opacity:1}100%{opacity:.45}}
.fade-in{ animation: fade .45s ease both }
@keyframes fade { from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none} }

/* ===== Modal “glass” ===== */
.modal{
  position:fixed; inset:0; background:rgba(10,13,24,.25);
  -webkit-backdrop-filter: blur(6px) saturate(1.05);
  backdrop-filter: blur(6px) saturate(1.05);
  display:grid; place-items:center; z-index:100;
}
.modal-inner{
  width:min(92vw, 820px);
  background: var(--glass-strong);
  border:1px solid rgba(99,102,241,.18);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
}

/* ===== Etiquetes SVG llegibles ===== */
.svg-label{
  font-size:13px; fill:#334155;
  paint-order: stroke; stroke:#fff; stroke-width:6px; stroke-linejoin:round;
}

/* ===== Focus visibles globals ===== */
:where(a, button, input, select, .pill, .toggle, .option):focus-visible{
  outline:none; box-shadow: var(--ring);
}

/* ===== Dark mode opcional (respecta preferències del sistema) ===== */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220;
    --card:#0f172a;
    --ink:#e5e7eb;
    --muted:#94a3b8;
    --hair:#1f2937;
    --glass: rgba(17,24,39,.55);
    --glass-strong: rgba(17,24,39,.72);
  }
  body{
    color:var(--ink);
    background:
      radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.18), transparent 60%),
      radial-gradient(900px 480px at 100% 0%, rgba(34,197,94,.14), transparent 60%),
      linear-gradient(180deg, #0b1220 0%, #0e1526 300px);
  }
  header{ border-bottom:1px solid rgba(99,102,241,.22); }
  .panel{ border-color: rgba(99,102,241,.22); }
  .option{ background: linear-gradient(180deg, #0f172a, #111827); border-color: rgba(99,102,241,.22); }
  .option:hover{ background:#0f172a; box-shadow: 0 10px 24px rgba(2,6,23,.35); }
  .input, select{ background:#0f172a; border-color:#1f2937; color:var(--ink); }
  .pill{ background:rgba(17,24,39,.72); border-color:#1f2937; color:var(--ink); }
  .btn-secondary{ background:#0f172a; border-color:#1f2937; color:var(--ink); }
  table th{ background:#0f172a }
  tr:hover td{ background:#0d1424 }
  .kbd{ background:#0f172a; border-color:#1f2937; color:var(--ink); }
  .modal-inner{ background: rgba(17,24,39,.78); }
}

/* ===== Petits refinaments finals ===== */
header .wrap, main .wrap, footer .wrap{ animation: fade .45s ease both; }
button .icon, .pill .icon{ display:inline-grid; place-items:center; width:1.2em; height:1.2em; }
.progress[data-anim="true"] > i{ animation: progstripe 1.2s linear infinite; background-image: linear-gradient(90deg, rgba(255,255,255,.35) 0 10px, transparent 10px 20px), linear-gradient(90deg, var(--primary), #93c5fd); background-size: 20px 100%, 100% 100%; }
@keyframes progstripe{ from{ background-position: 0 0, 0 0 } to{ background-position: 20px 0, 0 0 } }
