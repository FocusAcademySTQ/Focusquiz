<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chuleta ESO Â· Teoria i Estudi</title>
  <meta name="description" content="Guia exprÃ©s i buscable per a l'ESO: aritmÃ¨tica, fraccions, percentatges, geometria, estadÃ­stica, unitats, equacions, funcions, formats i errors tÃ­pics" />
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --success: #4cc9f0;
      --text: #0f172a;
      --text-light: #64748b;
      --bg: #f8fafc;
      --card: #ffffff;
      --border: #e2e8f0;
      --accent: #f72585;
      --shadow: rgba(15, 23, 42, 0.1);
      --chip: #e2e8f0;
      --highlight: #fffacd;
    }
    
    .dark {
      --primary: #4895ef;
      --primary-light: #4361ee;
      --secondary: #4cc9f0;
      --text: #e2e8f0;
      --text-light: #94a3b8;
      --bg: #0f172a;
      --card: #1e293b;
      --border: #334155;
      --shadow: rgba(0, 0, 0, 0.35);
      --chip: #334155;
      --highlight: #2d3748;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding-bottom: 40px;
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
    }
    
    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
      background: color-mix(in oklab, var(--bg), transparent 20%);
    }
    
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      font-size: 1.1rem;
    }
    
    .brand svg {
      width: 24px;
      height: 24px;
      color: var(--primary);
    }
    
    .nav-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .nav-links a {
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 0.9rem;
      background: color-mix(in oklab, var(--border), transparent 70%);
      transition: all 0.2s ease;
    }
    
    .nav-links a:hover {
      background: var(--primary);
      color: white;
    }
    
    .actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .btn {
      border-radius: 16px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      background: transparent;
      color: inherit;
      cursor: pointer;
      box-shadow: 0 1px 2px var(--shadow);
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }
    
    .btn:hover {
      box-shadow: 0 4px 8px var(--shadow);
      transform: translateY(-1px);
    }
    
    .btn.primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    #search {
      min-width: 240px;
      padding: 8px 16px;
    }
    
    /* Layout principal */
    .main-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
      margin-top: 24px;
    }
    
    @media (min-width: 992px) {
      .main-content {
        grid-template-columns: 280px 1fr;
      }
    }
    
    /* Sidebar/TOC */
    .sidebar {
      position: sticky;
      top: 80px;
      align-self: start;
      height: calc(100vh - 100px);
      overflow-y: auto;
      padding-right: 8px;
    }
    
    .toc {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 12px var(--shadow);
    }
    
    .toc-header {
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }
    
    .toc-list {
      list-style: none;
    }
    
    .toc-item {
      margin-bottom: 6px;
    }
    
    .toc-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 10px;
      transition: all 0.2s ease;
      color: var(--text);
      font-size: 0.95rem;
    }
    
    .toc-link:hover, .toc-link.active {
      background: var(--primary);
      color: white;
    }
    
    .toc-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 16px;
    }
    
    .chip {
      display: inline-block;
      border: 1px solid var(--border);
      background: var(--chip);
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.75rem;
    }
    
    /* Contingut */
    .content-section {
      display: grid;
      gap: 20px;
    }
    
    .hero {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 12px var(--shadow);
      margin-bottom: 8px;
    }
    
    .hero h1 {
      font-size: clamp(1.8rem, 2.5vw + 1rem, 2.6rem);
      margin: 0;
      color: var(--primary);
    }
    
    .hero p {
      margin: 12px 0 0;
      color: var(--text-light);
      font-size: 1.05rem;
    }
    
    .note {
      background: color-mix(in oklab, var(--primary), transparent 90%);
      border-left: 4px solid var(--primary);
      padding: 12px 16px;
      border-radius: 8px;
      margin-top: 16px;
      font-size: 0.95rem;
    }
    
    .kbd {
      background: color-mix(in oklab, var(--border), transparent 40%);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 0.85rem;
      font-family: monospace;
    }
    
    /* Targetes de temes */
    .topic-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 12px var(--shadow);
      scroll-margin-top: 100px;
    }
    
    .topic-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .topic-icon {
      font-size: 1.8rem;
    }
    
    .topic-title {
      font-size: 1.5rem;
      color: var(--primary);
    }
    
    .topic-card ul, .topic-card ol {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .topic-card li {
      margin-bottom: 8px;
    }
    
    .topic-card h3 {
      margin: 16px 0 8px;
      color: var(--primary-light);
      font-size: 1.2rem;
    }
    
    .topic-card p {
      margin-bottom: 12px;
    }
    
    code {
      background: color-mix(in oklab, var(--border), transparent 60%);
      padding: 2px 6px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 0.95rem;
    }
    
    .formula {
      background: color-mix(in oklab, var(--primary), transparent 92%);
      border-left: 3px solid var(--primary);
      padding: 12px 16px;
      border-radius: 8px;
      margin: 12px 0;
      font-family: monospace;
      overflow-x: auto;
    }
    
    /* BotÃ³ per pujar */
    .float-top {
      position: fixed;
      right: 20px;
      bottom: 20px;
      z-index: 50;
      background: var(--primary);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }
    
    .float-top:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
    
    /* Peu de pÃ gina */
    .footer {
      border-top: 1px solid var(--border);
      padding: 32px 0;
      margin-top: 40px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }
    
    @media (min-width: 768px) {
      .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .footer h3 {
      margin-bottom: 12px;
      font-size: 1.1rem;
    }
    
    /* Estils per a la cerca */
    .search-highlight {
      background: var(--highlight);
      padding: 0 2px;
      border-radius: 4px;
    }
    
    /* Estils d'impressiÃ³ */
    @media print {
      header, .actions, .footer, .float-top, .sidebar {
        display: none !important;
      }
      
      .print-only {
        display: block;
      }
      
      body {
        background: #fff;
        color: #000;
        font-size: 12pt;
      }
      
      .topic-card {
        break-inside: avoid;
        border: 1px solid #ddd;
        box-shadow: none;
      }
    }
    
    /* Estils per a dispositius mÃ²bils */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .nav-links {
        width: 100%;
        overflow-x: auto;
        padding-bottom: 8px;
      }
      
      .actions {
        width: 100%;
      }
      
      #search {
        min-width: 100%;
      }
      
      .sidebar {
        position: static;
        height: auto;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container navbar">
      <div class="brand">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M22 10L12 4 2 10l10 6 10-6Z"/><path d="M6 12v5c3 2 9 2 12 0v-5"/></svg>
        <span>Chuleta ESO Â· Teoria i Estudi</span>
      </div>
      
      <nav class="nav-links">
        <a href="#aritmetica">ğŸ”¢ AritmÃ¨tica</a>
        <a href="#fraccions">ğŸ° Fraccions</a>
        <a href="#percentatges">% Percentatges</a>
        <a href="#geometria">ğŸŸ¦ Geometria</a>
        <a href="#estadistica">ğŸ“Š EstadÃ­stica</a>
        <a href="#unitats">ğŸ” Unitats</a>
        <a href="#equacions">ğŸ§® Equacions</a>
        <a href="#funcions">ğŸ“ˆ Funcions</a>
      </nav>
      
      <div class="actions">
        <input id="search" class="btn" placeholder="ğŸ” Cerca rÃ pida..." />
        <button id="printBtn" class="btn" title="Imprimeix o desa en PDF">ğŸ–¨ï¸ Imprimeix</button>
        <button id="themeBtn" class="btn" aria-label="Canvia tema">ğŸŒ™ Fosc</button>
      </div>
    </div>
  </header>

  <main class="container main-content">
    <!-- Taula de continguts -->
    <aside class="sidebar">
      <div class="toc">
        <div class="toc-header">
          <p><strong>ğŸ“‘ Continguts</strong></p>
        </div>
        <ul class="toc-list">
          <li class="toc-item"><a href="#aritmetica" class="toc-link">ğŸ”¢ AritmÃ¨tica</a></li>
          <li class="toc-item"><a href="#fraccions" class="toc-link">ğŸ° Fraccions</a></li>
          <li class="toc-item"><a href="#percentatges" class="toc-link">% Percentatges</a></li>
          <li class="toc-item"><a href="#geometria" class="toc-link">ğŸŸ¦ Geometria</a></li>
          <li class="toc-item"><a href="#estadistica" class="toc-link">ğŸ“Š EstadÃ­stica</a></li>
          <li class="toc-item"><a href="#unitats" class="toc-link">ğŸ” Unitats</a></li>
          <li class="toc-item"><a href="#equacions" class="toc-link">ğŸ§® Equacions</a></li>
          <li class="toc-item"><a href="#funcions" class="toc-link">ğŸ“ˆ Funcions</a></li>
          <li class="toc-item"><a href="#formats" class="toc-link">ğŸ§¾ Formats</a></li>
          <li class="toc-item"><a href="#errors" class="toc-link">âš ï¸ Errors</a></li>
        </ul>
        
        <div class="toc-chips">
          <span class="chip">lectura Ã gil</span>
          <span class="chip">ESO</span>
          <span class="chip">estudi</span>
        </div>
      </div>
    </aside>

    <!-- Contingut principal -->
    <article class="content-section">
      <section class="hero">
        <h1>Guia exprÃ©s per estudiar i respondre bÃ© ğŸ§ âœ…</h1>
        <p>Orientada a l'ESO. Inclou normes clau, formats de resposta i errors tÃ­pics (amb emojis per memoritzar millor ğŸ˜‰).</p>
        
        <div class="note">
          <strong>ğŸ’¡ Consell:</strong> Fes servir la <strong>cerca rÃ pida</strong> de dalt (o <span class="kbd">Ctrl/âŒ˜ + F</span>) per trobar directament el que necessites.
        </div>
      </section>

      <section id="aritmetica" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ”¢</span>
          <h2 class="topic-title">AritmÃ¨tica</h2>
        </div>
        
        <ul>
          <li><strong>Operacions bÃ siques:</strong> suma, resta, multiplicaciÃ³, divisiÃ³; prioritat (<em>parÃ¨ntesis â†’ Ã—/Ã· â†’ +/âˆ’</em>).</li>
          <li><strong>Negatius:</strong> regles de signes (<code>âˆ’Ã—âˆ’ = +</code>, <code>+Ã—âˆ’ = âˆ’</code>, etc.).</li>
          <li><strong>Divisions exactes:</strong> factors i <strong>mÃºltiples</strong>; comprova si el divisor "cap" al dividend.</li>
          <li><strong>Trucs rÃ pids:</strong> propietats <strong>associativa</strong>, <strong>commutativa</strong> i <strong>distributiva</strong>.</li>
        </ul>
      </section>

      <section id="fraccions" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ°</span>
          <h2 class="topic-title">Fraccions</h2>
        </div>
        
        <ul>
          <li><strong>Parts:</strong> numerador/denominador; fracciÃ³ equivalent; <strong>simplificar</strong> amb mcd.</li>
          <li><strong>AritmÃ¨tica:</strong>
            <div class="formula">a/b + c/d = (ad+bc)/bd</div>
            <div class="formula">a/b âˆ’ c/d = (adâˆ’bc)/bd</div>
            <div class="formula">a/b Ã— c/d = ac/bd</div>
            <div class="formula">a/b Ã· c/d = a d / b c</div> (multiplica pel <strong>recÃ­proc</strong>)
          </li>
          <li><strong>De decimal a fracciÃ³:</strong> <code>0.25 â†’ 25/100 â†’ 1/4</code>.</li>
          <li><strong>FracciÃ³ de dibuix:</strong> parts ombrejades / parts totals (i <strong>simplificar</strong>).</li>
          <li><strong>Quan exigeix forma mÃ©s simple:</strong> el numerador i el denominador han de ser <strong>coprimers</strong>.</li>
        </ul>
      </section>

      <section id="percentatges" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">%</span>
          <h2 class="topic-title">Percentatges</h2>
        </div>
        
        <ul>
          <li><strong>DefiniciÃ³:</strong> <code>p% = p/100</code>.</li>
          <li><strong>Tres tipus tÃ­pics:</strong>
            <ol>
              <li>"<em>p% de n</em>" â†’ <code>nÂ·p/100</code></li>
              <li>"<em>k Ã©s el p% de ?</em>" â†’ <code>? = kÂ·100/p</code></li>
              <li><strong>Descompte</strong> p% sobre n â†’ <code>nÂ·(1 âˆ’ p/100)</code></li>
            </ol>
          </li>
          <li><strong>Canvis successius</strong> no es sumen: <code>20% + 20% â‰  40%</code> (usa factors multiplicatius).</li>
        </ul>
      </section>

      <section id="geometria" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸŸ¦</span>
          <h2 class="topic-title">Geometria (Ã rea, perÃ­metre, volum)</h2>
        </div>
        
        <ul>
          <li><strong>Unitats:</strong> longitud <code>u</code>, Ã rea <code>uÂ²</code>, volum <code>uÂ³</code>. Escriu la unitat si el programa <strong>ho demana</strong>.</li>
          <li><strong>Formules clau:</strong>
            <ul>
              <li>Rectangle: <code>A = bÂ·h</code>, <code>P = 2(b+h)</code></li>
              <li>Triangle: <code>A = (bÂ·h)/2</code>, <code>P = a+b+c</code></li>
              <li>Cercle: <code>A = Ï€rÂ²</code>, <code>P = 2Ï€r = Ï€d</code></li>
              <li>PolÃ­gon regular: <code>P = nÂ·c</code>; <code>A = (PÂ·apotema)/2</code></li>
              <li>Prisma rectangular (cuboid): <code>V = aÂ·bÂ·h</code></li>
              <li>Cilindre: <code>V = Ï€rÂ²h</code></li>
            </ul>
          </li>
          <li><strong>Exacte amb Ï€:</strong> deixa el resultat com <code>kÂ·Ï€</code> si l'opciÃ³ diu <em>"Ï€ exacte"</em>.</li>
          <li><strong>Arrodoniments:</strong> respecta els <strong>decimals</strong> que demana la configuraciÃ³.</li>
        </ul>
      </section>

      <section id="estadistica" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ“Š</span>
          <h2 class="topic-title">EstadÃ­stica bÃ sica</h2>
        </div>
        
        <p>Donada una llista de valors:</p>
        <ul>
          <li><strong>Mitjana</strong>: suma/quantitat.</li>
          <li><strong>Mediana</strong>: valor central (o mitjana dels dos centrals).</li>
          <li><strong>Moda</strong>: valor que mÃ©s es repeteix.</li>
          <li><strong>Rang</strong>: mÃ xim âˆ’ mÃ­nim.</li>
          <li><strong>DesviaciÃ³ mitjana</strong>: mitjana de <code>|xi âˆ’ mitjana|</code>.</li>
        </ul>
        <p><strong>GrÃ fics:</strong> identifica la <strong>barra/sector</strong> mÃ©s gran.</p>
      </section>

      <section id="unitats" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ”</span>
          <h2 class="topic-title">Unitats i conversions</h2>
        </div>
        
        <ul>
          <li><strong>Sistema mÃ¨tric:</strong>
            <ul>
              <li>Longitud: km â†” m â†” cm â†” mm (<code>Ã—10</code>, <code>Ã—100</code>, <code>Ã—1000</code>â€¦)</li>
              <li>Massa: kg â†” g â†” mg</li>
              <li>Volum: L â†” mL</li>
              <li><strong>Ã€rea:</strong> factors al <strong>quadrat</strong> (<code>1 mÂ² = 10 000 cmÂ²</code>)</li>
              <li><strong>Temps:</strong> h â†” min â†” s (60 i 3600)</li>
            </ul>
          </li>
          <li><strong>MÃ¨tode:</strong> valor Â· <strong>factor</strong> (o / factor si Ã©s el camÃ­ invers). Vigila amb <code>uÂ²</code>, <code>uÂ³</code>.</li>
        </ul>
      </section>

      <section id="equacions" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ§®</span>
          <h2 class="topic-title">Equacions</h2>
        </div>
        
        <h3>1r grau <code>ax + b = 0</code></h3>
        <p>Passa termes i divideix: <code>x = âˆ’b/a</code>.</p>
        
        <h3>2n grau <code>axÂ² + bx + c = 0</code></h3>
        <ul>
          <li><strong>FactoritzaciÃ³</strong> si es pot, o <strong>fÃ³rmula general</strong>: <code>x = (âˆ’b Â± âˆš(bÂ² âˆ’ 4ac)) / (2a)</code></li>
          <li><strong>Incompletes:</strong> <code>axÂ² + c = 0</code> â†’ <code>x = Â±âˆš(âˆ’c/a)</code>; <code>axÂ² + bx = 0</code> â†’ <code>x(ax + b)=0</code> â†’ <code>x=0</code> o <code>x=âˆ’b/a</code>.</li>
          <li><strong>Discriminant</strong> <code>Î”=bÂ²âˆ’4ac</code> (2, 1 o 0 arrels reals).</li>
        </ul>
        
        <h3>Sistemes 2Ã—2</h3>
        <p><strong>SubstituciÃ³</strong> o <strong>reducciÃ³</strong>; comprova casos <strong>sense soluciÃ³</strong> o <strong>infinites</strong> (rectes paralÂ·leles/coincidents).</p>
        
        <h3>Equacions amb fraccions</h3>
        <p>Troba <strong>mcd</strong>/<strong>mcm</strong> i multiplica per l'<strong>mcm</strong> per eliminar denominadors, desprÃ©s resol.</p>
        
        <h3>ParÃ¨ntesis</h3>
        <p><strong>Distributiva</strong>, agrupa termes semblants, i resol com una de 1r grau.</p>
      </section>

      <section id="funcions" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ“ˆ</span>
          <h2 class="topic-title">Funcions (estudi bÃ sic)</h2>
        </div>
        
        <h3>IdentificaciÃ³:</h3>
        <ul>
          <li>Lineal <code>mx+n</code>; QuadrÃ tica <code>axÂ²+bx+c</code>; PolinÃ²mica grau n; Racional <code>P(x)/Q(x)</code>;</li>
          <li>Radical <code>aâˆš(x+b)+c</code>; Exponencial <code>aÂ·b^x + c</code>; LogarÃ­tmica <code>aÂ·log_b(x)+c</code>.</li>
        </ul>
        
        <h3>Domini:</h3>
        <ul>
          <li>Lineal/quadrÃ tica/polinÃ²mica: â„</li>
          <li>Racional: exclou zeros del denominador</li>
          <li>Radical: interior de l'arrel â‰¥ 0 (si Ã©s âˆš parell)</li>
          <li>LogarÃ­tmica: x > 0</li>
        </ul>
        
        <h3>Punts de tall:</h3>
        <ul>
          <li>Amb y: posa x=0; amb x: resol f(x)=0.</li>
        </ul>
        
        <h3>Simetria i extrems (quadrÃ tiques):</h3>
        <ul>
          <li>Simetria respecte <code>x = âˆ’b/2a</code>.</li>
          <li>VÃ¨rtex <code>x_v = âˆ’b/2a</code>; si <code>a>0</code> mÃ­nim, si <code>a<0</code> mÃ xim.</li>
        </ul>
        
        <h3>Monotonia:</h3>
        <ul>
          <li>Lineal creix si <code>m>0</code>, decreix si <code>m<0</code>; quadrÃ tica canvia en el vÃ¨rtex.</li>
        </ul>
      </section>

      <section id="formats" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">ğŸ§¾</span>
          <h2 class="topic-title">Formats de resposta</h2>
        </div>
        
        <ul>
          <li><strong>Nombres i decimals:</strong> millor amb <strong>punt</strong> (p. ex. <code>3.5</code>).</li>
          <li><strong>Fraccions:</strong> <code>a/b</code> (simplificades si es demana "forma mÃ©s simple").</li>
          <li><strong>Ï€ exacte:</strong> escriu <strong><code>kÏ€</code></strong> (p. ex. <code>12Ï€</code>).</li>
          <li><strong>Unitats (geometria):</strong> si l'opciÃ³ "exigir unitats" estÃ  activa, afegeix <code>cm</code>, <code>cmÂ²</code>, <code>cmÂ³</code>â€¦</li>
          <li><strong>Equacions de 1r/2n grau:</strong> pots escriure <code>x=3</code> o <code>3</code>; per a dues arrels, separa amb coma <code>x1,x2</code>.</li>
          <li><strong>Sistemes 2Ã—2:</strong> <code>(x, y)</code> o <code>x,y</code> (p. ex. <code>(2, -1)</code>).</li>
          <li><strong>Conversions:</strong> escriu <strong>nomÃ©s el nÃºmero</strong> (la unitat ja surt a l'enunciat).</li>
        </ul>
      </section>

      <section id="errors" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">âš ï¸</span>
          <h2 class="topic-title">Errors tÃ­pics a evitar</h2>
        </div>
        
        <ul>
          <li>Oblidar <strong>unitats</strong> o el <strong>quadradet/cubet</strong> en Ã rees/volums.</li>
          <li>No <strong>simplificar</strong> fraccions quan cal.</li>
          <li>Confondre <code>d</code> i <code>r</code> en cercles (<code>P=Ï€d</code>, <code>A=Ï€rÂ²</code>).</li>
          <li>Sumar/descomptar <strong>percentatges</strong> en comptes d'usar factors multiplicatius.</li>
          <li>En 2n grau, oblidar comprovar el <strong>discriminant</strong> o canviar signes.</li>
          <li>En sistemes, no revisar si hi ha <strong>paralÂ·lelisme</strong> (cap soluciÃ³) o <strong>coincidÃ¨ncia</strong> (infinites).</li>
        </ul>
      </section>

      <section class="topic-card print-only">
        <p style="margin:0">Â© <span id="year"></span> Focus Academy Â· Chuleta ESO</p>
      </section>
    </article>
  </main>

  <button id="toTop" class="float-top" title="Torna amunt">â¬†ï¸</button>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div>
          <h3>Contacte</h3>
          <p>Dubtes o errades? Escriu a <a href="mailto:info@focusacademy.cat">info@focusacademy.cat</a></p>
        </div>
        <div>
          <h3>MÃ©s recursos</h3>
          <p>Visita el nostre web per a mÃ©s materials d'estudi.</p>
        </div>
      </div>
      <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--border);">
        <p>Â© <span id="year2"></span> Focus Academy. Tots els drets reservats.</p>
      </div>
    </div>
  </footer>

  <script>
    const el = (s) => document.querySelector(s);
    const els = (s) => document.querySelectorAll(s);
    let dark = false;

    // Aplicar tema
    function applyTheme(d) {
      document.documentElement.classList.toggle('dark', d);
      el('#themeBtn').innerHTML = d ? 'â˜€ï¸ Clar' : 'ğŸŒ™ Fosc';
      localStorage.setItem('theme', d ? 'dark' : 'light');
    }

    // Cerca i ressaltat
    function clearHighlights() {
      els('.search-highlight').forEach(el => {
        el.replaceWith(document.createTextNode(el.textContent));
      });
    }

    function highlightText(node, term) {
      if (!term) return;
      
      const re = new RegExp(`(${term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
      
      // Processar tot el text del node
      Array.from(node.childNodes).forEach(child => {
        if (child.nodeType === 3) { // Text node
          const text = child.textContent;
          if (re.test(text)) {
            const highlighted = text.replace(re, '<span class="search-highlight">$1</span>');
            const newSpan = document.createElement('span');
            newSpan.innerHTML = highlighted;
            child.replaceWith(newSpan);
          }
        } else if (child.nodeType === 1 && child.childNodes.length > 0) { // Element node with children
          highlightText(child, term);
        }
      });
    }

    function quickSearch(q) {
      clearHighlights();
      const term = q.trim().toLowerCase();
      
      if (term === '') {
        els('.topic-card').forEach(card => {
          card.style.display = '';
        });
        return;
      }
      
      // Amagar totes les targetes primer
      els('.topic-card').forEach(card => {
        card.style.display = 'none';
      });
      
      // Mostrar nomÃ©s les que coincideixin
      els('.topic-card').forEach(card => {
        if (card.textContent.toLowerCase().includes(term)) {
          card.style.display = '';
          highlightText(card, term);
        }
      });
    }

    // Actualitzar l'enllaÃ§ actiu al TOC
    function updateActiveTocLink() {
      const sections = els('.topic-card');
      const navLinks = els('.toc-link');
      
      let currentSection = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (scrollY >= sectionTop - 120) {
          currentSection = section.getAttribute('id');
        }
      });
      
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href').substring(1) === currentSection) {
          link.classList.add('active');
        }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Any actual
      const currentYear = new Date().getFullYear();
      el('#year').textContent = currentYear;
      el('#year2').textContent = currentYear;
      
      // Verificar tema guardat
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        dark = true;
      }
      applyTheme(dark);
      
      // BotÃ³ de tema
      el('#themeBtn').addEventListener('click', () => {
        dark = !dark;
        applyTheme(dark);
      });
      
      // BotÃ³ d'impressiÃ³
      el('#printBtn').addEventListener('click', () => window.print());
      
      // Cerca
      el('#search').addEventListener('input', (e) => quickSearch(e.target.value));
      
      // BotÃ³ per anar a dalt
      el('#toTop').addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      
      // Actualitzar TOC en scroll
      window.addEventListener('scroll', updateActiveTocLink);
      updateActiveTocLink();
      
      // Suavitzar scroll per enllaÃ§os interns
      els('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = link.getAttribute('href');
          const targetElement = el(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    });
  </script>
</body>
</html>
