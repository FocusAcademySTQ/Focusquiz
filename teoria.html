<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chuleta ESO ¬∑ Teoria i Estudi</title>
  <meta name="description" content="Guia expr√©s i buscable per a l'ESO: aritm√®tica, fraccions, percentatges, geometria, estad√≠stica, unitats, equacions, funcions, formats i errors t√≠pics" />
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --success: #4cc9f0;
      --text: #0f172a;
      --text-light: #64748b;
      --bg: #f8fafc;
      --card: #ffffff;
      --border: #e2e8f0;
      --accent: #f72585;
      --shadow: rgba(15, 23, 42, 0.1);
      --chip: #e2e8f0;
      --highlight: #fffacd;
    }
    
    .dark {
      --primary: #4895ef;
      --primary-light: #4361ee;
      --secondary: #4cc9f0;
      --text: #e2e8f0;
      --text-light: #94a3b8;
      --bg: #0f172a;
      --card: #1e293b;
      --border: #334155;
      --shadow: rgba(0, 0, 0, 0.35);
      --chip: #334155;
      --highlight: #2d3748;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding-bottom: 40px;
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
    }
    
    /* Header */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
      background: color-mix(in oklab, var(--bg), transparent 20%);
    }
    
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
      flex-wrap: wrap;
      gap: 12px;
    }
    
    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      font-size: 1.1rem;
    }
    
    .brand svg {
      width: 24px;
      height: 24px;
      color: var(--primary);
    }
    
    .nav-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .nav-links a {
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 0.9rem;
      background: color-mix(in oklab, var(--border), transparent 70%);
      transition: all 0.2s ease;
    }
    
    .nav-links a:hover {
      background: var(--primary);
      color: white;
    }
    
    .actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .btn {
      border-radius: 16px;
      padding: 8px 12px;
      border: 1px solid var(--border);
      background: transparent;
      color: inherit;
      cursor: pointer;
      box-shadow: 0 1px 2px var(--shadow);
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }
    
    .btn:hover {
      box-shadow: 0 4px 8px var(--shadow);
      transform: translateY(-1px);
    }
    
    .btn.primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    #search {
      min-width: 240px;
      padding: 8px 16px;
    }
    
    /* Layout principal */
    .main-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
      margin-top: 24px;
    }
    
    @media (min-width: 992px) {
      .main-content {
        grid-template-columns: 280px 1fr;
      }
    }
    
    /* Sidebar/TOC */
    .sidebar {
      position: sticky;
      top: 80px;
      align-self: start;
      height: calc(100vh - 100px);
      overflow-y: auto;
      padding-right: 8px;
    }
    
    .toc {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 12px var(--shadow);
    }
    
    .toc-header {
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }
    
    .toc-list {
      list-style: none;
    }
    
    .toc-item {
      margin-bottom: 6px;
    }
    
    .toc-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 10px;
      transition: all 0.2s ease;
      color: var(--text);
      font-size: 0.95rem;
    }
    
    .toc-link:hover, .toc-link.active {
      background: var(--primary);
      color: white;
    }
    
    .toc-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 16px;
    }
    
    .chip {
      display: inline-block;
      border: 1px solid var(--border);
      background: var(--chip);
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.75rem;
    }
    
    /* Contingut */
    .content-section {
      display: grid;
      gap: 20px;
    }
    
    .hero {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 12px var(--shadow);
      margin-bottom: 8px;
    }
    
    .hero h1 {
      font-size: clamp(1.8rem, 2.5vw + 1rem, 2.6rem);
      margin: 0;
      color: var(--primary);
    }
    
    .hero p {
      margin: 12px 0 0;
      color: var(--text-light);
      font-size: 1.05rem;
    }
    
    .note {
      background: color-mix(in oklab, var(--primary), transparent 90%);
      border-left: 4px solid var(--primary);
      padding: 12px 16px;
      border-radius: 8px;
      margin-top: 16px;
      font-size: 0.95rem;
    }
    
    .kbd {
      background: color-mix(in oklab, var(--border), transparent 40%);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 0.85rem;
      font-family: monospace;
    }
    
    /* Targetes de temes */
    .topic-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 12px var(--shadow);
      scroll-margin-top: 100px;
    }
    
    .topic-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .topic-icon {
      font-size: 1.8rem;
    }
    
    .topic-title {
      font-size: 1.5rem;
      color: var(--primary);
    }
    
    .topic-card ul, .topic-card ol {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .topic-card li {
      margin-bottom: 8px;
    }
    
    .topic-card h3 {
      margin: 16px 0 8px;
      color: var(--primary-light);
      font-size: 1.2rem;
    }
    
    .topic-card p {
      margin-bottom: 12px;
    }
    
    code {
      background: color-mix(in oklab, var(--border), transparent 60%);
      padding: 2px 6px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 0.95rem;
    }
    
    .formula {
      background: color-mix(in oklab, var(--primary), transparent 92%);
      border-left: 3px solid var(--primary);
      padding: 12px 16px;
      border-radius: 8px;
      margin: 12px 0;
      font-family: monospace;
      overflow-x: auto;
    }
    
    /* Bot√≥ per pujar */
    .float-top {
      position: fixed;
      right: 20px;
      bottom: 20px;
      z-index: 50;
      background: var(--primary);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }
    
    .float-top:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
    
    /* Peu de p√†gina */
    .footer {
      border-top: 1px solid var(--border);
      padding: 32px 0;
      margin-top: 40px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
    }
    
    @media (min-width: 768px) {
      .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .footer h3 {
      margin-bottom: 12px;
      font-size: 1.1rem;
    }
    
    /* Estils per a la cerca */
    .search-highlight {
      background: var(--highlight);
      padding: 0 2px;
      border-radius: 4px;
    }
    
    /* Estils d'impressi√≥ */
    @media print {
      header, .actions, .footer, .float-top, .sidebar {
        display: none !important;
      }
      
      .print-only {
        display: block;
      }
      
      body {
        background: #fff;
        color: #000;
        font-size: 12pt;
      }
      
      .topic-card {
        break-inside: avoid;
        border: 1px solid #ddd;
        box-shadow: none;
      }
    }
    
    /* Estils per a dispositius m√≤bils */
    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .nav-links {
        width: 100%;
        overflow-x: auto;
        padding-bottom: 8px;
      }
      
      .actions {
        width: 100%;
      }
      
      #search {
        min-width: 100%;
      }
      
      .sidebar {
        position: static;
        height: auto;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container navbar">
      <div class="brand">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M22 10L12 4 2 10l10 6 10-6Z"/><path d="M6 12v5c3 2 9 2 12 0v-5"/></svg>
        <span>Chuleta ESO ¬∑ Teoria i Estudi</span>
      </div>
      
      <nav class="nav-links">
        <a href="#aritmetica">üî¢ Aritm√®tica</a>
        <a href="#fraccions">üç∞ Fraccions</a>
        <a href="#percentatges">% Percentatges</a>
        <a href="#geometria">üü¶ Geometria</a>
        <a href="#estadistica">üìä Estad√≠stica</a>
        <a href="#unitats">üîÅ Unitats</a>
        <a href="#equacions">üßÆ Equacions</a>
        <a href="#funcions">üìà Funcions</a>
      </nav>
      
      <div class="actions">
        <input id="search" class="btn" placeholder="üîç Cerca r√†pida..." />
        <button id="printBtn" class="btn" title="Imprimeix o desa en PDF">üñ®Ô∏è Imprimeix</button>
        <button id="themeBtn" class="btn" aria-label="Canvia tema">üåô Fosc</button>
      </div>
    </div>
  </header>

  <main class="container main-content">
    <!-- Taula de continguts -->
    <aside class="sidebar">
      <div class="toc">
        <div class="toc-header">
          <p><strong>üìë Continguts</strong></p>
        </div>
        <ul class="toc-list">
          <li class="toc-item"><a href="#aritmetica" class="toc-link">üî¢ Aritm√®tica</a></li>
          <li class="toc-item"><a href="#fraccions" class="toc-link">üç∞ Fraccions</a></li>
          <li class="toc-item"><a href="#percentatges" class="toc-link">% Percentatges</a></li>
          <li class="toc-item"><a href="#geometria" class="toc-link">üü¶ Geometria</a></li>
          <li class="toc-item"><a href="#estadistica" class="toc-link">üìä Estad√≠stica</a></li>
          <li class="toc-item"><a href="#unitats" class="toc-link">üîÅ Unitats</a></li>
          <li class="toc-item"><a href="#equacions" class="toc-link">üßÆ Equacions</a></li>
          <li class="toc-item"><a href="#funcions" class="toc-link">üìà Funcions</a></li>
          <li class="toc-item"><a href="#formats" class="toc-link">üßæ Formats</a></li>
          <li class="toc-item"><a href="#errors" class="toc-link">‚ö†Ô∏è Errors</a></li>
        </ul>
        
        <div class="toc-chips">
          <span class="chip">lectura √†gil</span>
          <span class="chip">ESO</span>
          <span class="chip">estudi</span>
        </div>
      </div>
    </aside>

    <!-- Contingut principal -->
    <article class="content-section">
      <section class="hero">
        <h1>Guia expr√©s per estudiar i respondre b√© üß†‚úÖ</h1>
        <p>Orientada a l'ESO. Inclou normes clau, formats de resposta i errors t√≠pics (amb emojis per memoritzar millor üòâ).</p>
        
        <div class="note">
          <strong>üí° Consell:</strong> Fes servir la <strong>cerca r√†pida</strong> de dalt (o <span class="kbd">Ctrl/‚åò + F</span>) per trobar directament el que necessites.
        </div>
      </section>

      <section id="aritmetica" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üî¢</span>
          <h2 class="topic-title">Aritm√®tica</h2>
        </div>
        
        <ul>
          <li><strong>Operacions b√†siques:</strong> suma, resta, multiplicaci√≥, divisi√≥; prioritat (<em>par√®ntesis ‚Üí √ó/√∑ ‚Üí +/‚àí</em>).</li>
          <li><strong>Negatius:</strong> regles de signes (<code>‚àí√ó‚àí = +</code>, <code>+√ó‚àí = ‚àí</code>, etc.).</li>
          <li><strong>Divisions exactes:</strong> factors i <strong>m√∫ltiples</strong>; comprova si el divisor "cap" al dividend.</li>
          <li><strong>Trucs r√†pids:</strong> propietats <strong>associativa</strong>, <strong>commutativa</strong> i <strong>distributiva</strong>.</li>
        </ul>
      </section>

      <section id="fraccions" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üç∞</span>
          <h2 class="topic-title">Fraccions</h2>
        </div>
        
        <ul>
          <li><strong>Parts:</strong> numerador/denominador; fracci√≥ equivalent; <strong>simplificar</strong> amb mcd.</li>
          <li><strong>Aritm√®tica:</strong>
            <div class="formula">a/b + c/d = (ad+bc)/bd</div>
            <div class="formula">a/b ‚àí c/d = (ad‚àíbc)/bd</div>
            <div class="formula">a/b √ó c/d = ac/bd</div>
            <div class="formula">a/b √∑ c/d = a d / b c</div> (multiplica pel <strong>rec√≠proc</strong>)
          </li>
          <li><strong>De decimal a fracci√≥:</strong> <code>0.25 ‚Üí 25/100 ‚Üí 1/4</code>.</li>
          <li><strong>Fracci√≥ de dibuix:</strong> parts ombrejades / parts totals (i <strong>simplificar</strong>).</li>
          <li><strong>Quan exigeix forma m√©s simple:</strong> el numerador i el denominador han de ser <strong>coprimers</strong>.</li>
        </ul>
      </section>

      <section id="percentatges" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">%</span>
          <h2 class="topic-title">Percentatges</h2>
        </div>
        
        <ul>
          <li><strong>Definici√≥:</strong> <code>p% = p/100</code>.</li>
          <li><strong>Tres tipus t√≠pics:</strong>
            <ol>
              <li>"<em>p% de n</em>" ‚Üí <code>n¬∑p/100</code></li>
              <li>"<em>k √©s el p% de ?</em>" ‚Üí <code>? = k¬∑100/p</code></li>
              <li><strong>Descompte</strong> p% sobre n ‚Üí <code>n¬∑(1 ‚àí p/100)</code></li>
            </ol>
          </li>
          <li><strong>Canvis successius</strong> no es sumen: <code>20% + 20% ‚â† 40%</code> (usa factors multiplicatius).</li>
        </ul>
      </section>

      <section id="geometria" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üü¶</span>
          <h2 class="topic-title">Geometria (√†rea, per√≠metre, volum)</h2>
        </div>
        
        <ul>
          <li><strong>Unitats:</strong> longitud <code>u</code>, √†rea <code>u¬≤</code>, volum <code>u¬≥</code>. Escriu la unitat si el programa <strong>ho demana</strong>.</li>
          <li><strong>Formules clau:</strong>
            <ul>
              <li>Rectangle: <code>A = b¬∑h</code>, <code>P = 2(b+h)</code></li>
              <li>Triangle: <code>A = (b¬∑h)/2</code>, <code>P = a+b+c</code></li>
              <li>Cercle: <code>A = œÄr¬≤</code>, <code>P = 2œÄr = œÄd</code></li>
              <li>Pol√≠gon regular: <code>P = n¬∑c</code>; <code>A = (P¬∑apotema)/2</code></li>
              <li>Prisma rectangular (cuboid): <code>V = a¬∑b¬∑h</code></li>
              <li>Cilindre: <code>V = œÄr¬≤h</code></li>
            </ul>
          </li>
          <li><strong>Exacte amb œÄ:</strong> deixa el resultat com <code>k¬∑œÄ</code> si l'opci√≥ diu <em>"œÄ exacte"</em>.</li>
          <li><strong>Arrodoniments:</strong> respecta els <strong>decimals</strong> que demana la configuraci√≥.</li>
        </ul>
      </section>

      <section id="estadistica" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üìä</span>
          <h2 class="topic-title">Estad√≠stica b√†sica</h2>
        </div>
        
        <p>Donada una llista de valors:</p>
        <ul>
          <li><strong>Mitjana</strong>: suma/quantitat.</li>
          <li><strong>Mediana</strong>: valor central (o mitjana dels dos centrals).</li>
          <li><strong>Moda</strong>: valor que m√©s es repeteix.</li>
          <li><strong>Rang</strong>: m√†xim ‚àí m√≠nim.</li>
          <li><strong>Desviaci√≥ mitjana</strong>: mitjana de <code>|xi ‚àí mitjana|</code>.</li>
        </ul>
        <p><strong>Gr√†fics:</strong> identifica la <strong>barra/sector</strong> m√©s gran.</p>
      </section>

      <section id="unitats" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üîÅ</span>
          <h2 class="topic-title">Unitats i conversions</h2>
        </div>
        
        <ul>
          <li><strong>Sistema m√®tric:</strong>
            <ul>
              <li>Longitud: km ‚Üî m ‚Üî cm ‚Üî mm (<code>√ó10</code>, <code>√ó100</code>, <code>√ó1000</code>‚Ä¶)</li>
              <li>Massa: kg ‚Üî g ‚Üî mg</li>
              <li>Volum: L ‚Üî mL</li>
              <li><strong>√Ärea:</strong> factors al <strong>quadrat</strong> (<code>1 m¬≤ = 10 000 cm¬≤</code>)</li>
              <li><strong>Temps:</strong> h ‚Üî min ‚Üî s (60 i 3600)</li>
            </ul>
          </li>
          <li><strong>M√®tode:</strong> valor ¬∑ <strong>factor</strong> (o / factor si √©s el cam√≠ invers). Vigila amb <code>u¬≤</code>, <code>u¬≥</code>.</li>
        </ul>
      </section>

      <section id="equacions" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üßÆ</span>
          <h2 class="topic-title">Equacions</h2>
        </div>
        
        <h3>1r grau <code>ax + b = 0</code></h3>
        <p>Passa termes i divideix: <code>x = ‚àíb/a</code>.</p>
        
        <h3>2n grau <code>ax¬≤ + bx + c = 0</code></h3>
        <ul>
          <li><strong>Factoritzaci√≥</strong> si es pot, o <strong>f√≥rmula general</strong>: <code>x = (‚àíb ¬± ‚àö(b¬≤ ‚àí 4ac)) / (2a)</code></li>
          <li><strong>Incompletes:</strong> <code>ax¬≤ + c = 0</code> ‚Üí <code>x = ¬±‚àö(‚àíc/a)</code>; <code>ax¬≤ + bx = 0</code> ‚Üí <code>x(ax + b)=0</code> ‚Üí <code>x=0</code> o <code>x=‚àíb/a</code>.</li>
          <li><strong>Discriminant</strong> <code>Œî=b¬≤‚àí4ac</code> (2, 1 o 0 arrels reals).</li>
        </ul>
        
        <h3>Sistemes 2√ó2</h3>
        <p><strong>Substituci√≥</strong> o <strong>reducci√≥</strong>; comprova casos <strong>sense soluci√≥</strong> o <strong>infinites</strong> (rectes paral¬∑leles/coincidents).</p>
        
        <h3>Equacions amb fraccions</h3>
        <p>Troba <strong>mcd</strong>/<strong>mcm</strong> i multiplica per l'<strong>mcm</strong> per eliminar denominadors, despr√©s resol.</p>
        
        <h3>Par√®ntesis</h3>
        <p><strong>Distributiva</strong>, agrupa termes semblants, i resol com una de 1r grau.</p>
      </section>

      <section id="funcions" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üìà</span>
          <h2 class="topic-title">Funcions (estudi b√†sic)</h2>
        </div>
        
        <h3>Identificaci√≥:</h3>
        <ul>
          <li>Lineal <code>mx+n</code>; Quadr√†tica <code>ax¬≤+bx+c</code>; Polin√≤mica grau n; Racional <code>P(x)/Q(x)</code>;</li>
          <li>Radical <code>a‚àö(x+b)+c</code>; Exponencial <code>a¬∑b^x + c</code>; Logar√≠tmica <code>a¬∑log_b(x)+c</code>.</li>
        </ul>
        
        <h3>Domini:</h3>
        <ul>
          <li>Lineal/quadr√†tica/polin√≤mica: ‚Ñù</li>
          <li>Racional: exclou zeros del denominador</li>
          <li>Radical: interior de l'arrel ‚â• 0 (si √©s ‚àö parell)</li>
          <li>Logar√≠tmica: x > 0</li>
        </ul>
        
        <h3>Punts de tall:</h3>
        <ul>
          <li>Amb y: posa x=0; amb x: resol f(x)=0.</li>
        </ul>
        
        <h3>Simetria i extrems (quadr√†tiques):</h3>
        <ul>
          <li>Simetria respecte <code>x = ‚àíb/2a</code>.</li>
          <li>V√®rtex <code>x_v = ‚àíb/2a</code>; si <code>a>0</code> m√≠nim, si <code>a<0</code> m√†xim.</li>
        </ul>
        
        <h3>Monotonia:</h3>
        <ul>
          <li>Lineal creix si <code>m>0</code>, decreix si <code>m<0</code>; quadr√†tica canvia en el v√®rtex.</li>
        </ul>
      </section>

      <section id="formats" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">üßæ</span>
          <h2 class="topic-title">Formats de resposta</h2>
        </div>
        
        <ul>
          <li><strong>Nombres i decimals:</strong> millor amb <strong>punt</strong> (p. ex. <code>3.5</code>).</li>
          <li><strong>Fraccions:</strong> <code>a/b</code> (simplificades si es demana "forma m√©s simple").</li>
          <li><strong>œÄ exacte:</strong> escriu <strong><code>kœÄ</code></strong> (p. ex. <code>12œÄ</code>).</li>
          <li><strong>Unitats (geometria):</strong> si l'opci√≥ "exigir unitats" est√† activa, afegeix <code>cm</code>, <code>cm¬≤</code>, <code>cm¬≥</code>‚Ä¶</li>
          <li><strong>Equacions de 1r/2n grau:</strong> pots escriure <code>x=3</code> o <code>3</code>; per a dues arrels, separa amb coma <code>x1,x2</code>.</li>
          <li><strong>Sistemes 2√ó2:</strong> <code>(x, y)</code> o <code>x,y</code> (p. ex. <code>(2, -1)</code>).</li>
          <li><strong>Conversions:</strong> escriu <strong>nom√©s el n√∫mero</strong> (la unitat ja surt a l'enunciat).</li>
        </ul>
      </section>

      <section id="errors" class="topic-card">
        <div class="topic-header">
          <span class="topic-icon">‚ö†Ô∏è</span>
          <h2 class="topic-title">Errors t√≠pics a evitar</h2>
        </div>
        
        <ul>
          <li>Oblidar <strong>unitats</strong> o el <strong>quadradet/cubet</strong> en √†rees/volums.</li>
          <li>No <strong>simplificar</strong> fraccions quan cal.</li>
          <li>Confondre <code>d</code> i <code>r</code> en cercles (<code>P=œÄd</code>, <code>A=œÄr¬≤</code>).</li>
          <li>Sumar/descomptar <strong>percentatges</strong> en comptes d'usar factors multiplicatius.</li>
          <li>En 2n grau, oblidar comprovar el <strong>discriminant</strong> o canviar signes.</li>
          <li>En sistemes, no revisar si hi ha <strong>paral¬∑lelisme</strong> (cap soluci√≥) o <strong>coincid√®ncia</strong> (infinites).</li>
        </ul>
      </section>

      <section class="topic-card print-only">
        <p style="margin:0">¬© <span id="year"></span> Focus Academy ¬∑ Chuleta ESO</p>
      </section>
    </article>
  </main>

  <button id="toTop" class="float-top" title="Torna amunt">‚¨ÜÔ∏è</button>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div>
          <h3>Contacte</h3>
          <p>Dubtes o errades? Escriu a <a href="mailto:info@focusacademy.cat">info@focusacademy.cat</a></p>
        </div>
        <div>
          <h3>M√©s recursos</h3>
          <p>Visita el nostre web per a m√©s materials d'estudi.</p>
        </div>
      </div>
      <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--border);">
        <p>¬© <span id="year2"></span> Focus Academy. Tots els drets reservats.</p>
      </div>
    </div>
  </footer>

  <script>
    const el = (s) => document.querySelector(s);
    const els = (s) => document.querySelectorAll(s);
    let dark = false;

    // Aplicar tema
    function applyTheme(d) {
      document.documentElement.classList.toggle('dark', d);
      el('#themeBtn').innerHTML = d ? '‚òÄÔ∏è Clar' : 'üåô Fosc';
      localStorage.setItem('theme', d ? 'dark' : 'light');
    }

    // Cerca i ressaltat
    function clearHighlights() {
      els('.search-highlight').forEach(el => {
        el.replaceWith(document.createTextNode(el.textContent));
      });
    }

    function highlightText(node, term) {
      if (!term) return;
      
      const re = new RegExp(`(${term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
      
      // Processar tot el text del node
      Array.from(node.childNodes).forEach(child => {
        if (child.nodeType === 3) { // Text node
          const text = child.textContent;
          if (re.test(text)) {
            const highlighted = text.replace(re, '<span class="search-highlight">$1</span>');
            const newSpan = document.createElement('span');
            newSpan.innerHTML = highlighted;
            child.replaceWith(newSpan);
          }
        } else if (child.nodeType === 1 && child.childNodes.length > 0) { // Element node with children
          highlightText(child, term);
        }
      });
    }

    function quickSearch(q) {
      clearHighlights();
      const term = q.trim().toLowerCase();
      
      if (term === '') {
        els('.topic-card').forEach(card => {
          card.style.display = '';
        });
        return;
      }
      
      // Amagar totes les targetes primer
      els('.topic-card').forEach(card => {
        card.style.display = 'none';
      });
      
      // Mostrar nom√©s les que coincideixin
      els('.topic-card').forEach(card => {
        if (card.textContent.toLowerCase().includes(term)) {
          card.style.display = '';
          highlightText(card, term);
        }
      });
    }

    // Actualitzar l'enlla√ß actiu al TOC
    function updateActiveTocLink() {
      const sections = els('.topic-card');
      const navLinks = els('.toc-link');
      
      let currentSection = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (scrollY >= sectionTop - 120) {
          currentSection = section.getAttribute('id');
        }
      });
      
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href').substring(1) === currentSection) {
          link.classList.add('active');
        }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Any actual
      const currentYear = new Date().getFullYear();
      el('#year').textContent = currentYear;
      el('#year2').textContent = currentYear;
      
      // Verificar tema guardat
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        dark = true;
      }
      applyTheme(dark);
      
      // Bot√≥ de tema
      el('#themeBtn').addEventListener('click', () => {
        dark = !dark;
        applyTheme(dark);
      });
      
      // Bot√≥ d'impressi√≥
      el('#printBtn').addEventListener('click', () => window.print());
      
      // Cerca
      el('#search').addEventListener('input', (e) => quickSearch(e.target.value));
      
      // Bot√≥ per anar a dalt
      el('#toTop').addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
      
      // Actualitzar TOC en scroll
      window.addEventListener('scroll', updateActiveTocLink);
      updateActiveTocLink();
      
      // Suavitzar scroll per enlla√ßos interns
      els('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = link.getAttribute('href');
          const targetElement = el(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    });
  </script>
</body>
</html>
