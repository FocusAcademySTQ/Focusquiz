<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FocusQuiz · Flashcards d'estudi</title>
  <meta
    name="description"
    content="Escull una temàtica i juga amb les flashcards de preguntes i respostes sobre història del segle XX."
  />
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      background: linear-gradient(180deg, #f8fbff, #eef2ff 320px);
    }

    .flashcards-hero {
      margin: 40px 0 28px;
    }

    .flashcards-hero h1 {
      margin: 0;
      font-size: clamp(1.5rem, 1.1rem + 2vw, 2.4rem);
    }

    .flashcards-hero p {
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 720px;
    }

    .active-user-banner {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin: 18px 0 0;
      padding: 8px 16px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.12);
      color: #1d4ed8;
      font-weight: 600;
      font-size: 0.95rem;
      box-shadow: 0 10px 22px rgba(37, 99, 235, 0.16);
    }

    .flashcards-nav {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .section-kicker {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(34, 197, 94, 0.12);
      color: #047857;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 0.8rem;
    }

    .topics-section,
    .game-section {
      display: grid;
      gap: 24px;
      margin: 40px 0 70px;
    }

    .subjects-section {
      margin-bottom: 32px;
    }

    #topics-menu,
    #flashcard-game {
      scroll-margin-top: 90px;
    }

    .topics-section header,
    .game-header {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .topics-section h2,
    .game-header h2 {
      margin: 0;
      font-size: 1.6rem;
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
      max-width: 720px;
    }

    .topics-grid {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      list-style: none;
      padding: 0;
      margin: 0;
    }

    #subjects-grid {
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .topics-grid li {
      list-style: none;
      margin: 0;
    }

    .topic-card {
      display: flex;
      flex-direction: column;
      gap: 12px;
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(236, 248, 255, 0.9));
      padding: 24px 22px;
      box-shadow: var(--shadow);
      text-align: left;
      color: inherit;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      width: 100%;
      border: none;
      font: inherit;
      background-color: transparent;
    }

    .subject-card {
      align-items: flex-start;
    }

    .subject-card.is-active,
    .subject-card.is-active:hover,
    .subject-card.is-active:focus-visible {
      border-color: rgba(37, 99, 235, 0.6);
      box-shadow: 0 20px 38px rgba(37, 99, 235, 0.2);
      transform: none;
    }

    .subject-meta {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      color: #0f172a;
      background: rgba(79, 70, 229, 0.12);
      border-radius: 999px;
      padding: 6px 12px;
    }

    .topic-card:hover,
    .topic-card:focus-visible {
      transform: translateY(-4px);
      border-color: rgba(59, 130, 246, 0.4);
      box-shadow: 0 18px 35px rgba(15, 23, 42, 0.12);
      outline: none;
    }

    .topic-card h3 {
      margin: 0;
      font-size: 1.1rem;
      color: #1d4ed8;
    }

    .topic-summary {
      margin: 0;
      color: var(--muted);
    }

    .topic-meta {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      color: #0f172a;
      background: rgba(59, 130, 246, 0.12);
      border-radius: 999px;
      padding: 6px 12px;
      width: fit-content;
    }

    .game-section {
      margin-bottom: 90px;
    }

    .game-header {
      gap: 16px;
    }

    .pill-back {
      width: fit-content;
    }

    .game-header h2 {
      font-size: clamp(1.3rem, 1.05rem + 1.2vw, 1.8rem);
    }

    .game-instructions {
      margin: 0;
      color: var(--muted);
      font-size: 0.95rem;
      max-width: 720px;
      text-align: center;
      margin-inline: auto;
    }

    .game-stage {
      margin-top: 36px;
      display: flex;
      justify-content: center;
      width: 100%;
      padding-inline: clamp(8px, 3vw, 24px);
    }

    .main-card-wrapper {
      display: flex;
      flex-direction: column;
      gap: clamp(22px, 4vh, 34px);
      align-items: center;
      width: min(100%, 620px);
      margin: 0 auto;
      text-align: center;
    }

    .main-card-stage {
      position: relative;
      z-index: 1;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: clamp(20px, 4vh, 48px);
    }

    .main-card-stage::before,
    .main-card-stage::after {
      content: '';
      position: absolute;
      inset: -24px 0 auto;
      height: 26px;
      background: linear-gradient(180deg, rgba(226, 232, 240, 0.3), rgba(148, 163, 184, 0));
      border-radius: 999px;
      filter: blur(6px);
      opacity: 0.7;
      z-index: -1;
    }

    .main-card-stage::after {
      inset: auto 0 -26px;
    }

    .card-nav {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      font-weight: 600;
      background: rgba(37, 99, 235, 0.12);
      color: #1d4ed8;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 10px 20px rgba(37, 99, 235, 0.12);
    }

    .card-nav:hover,
    .card-nav:focus-visible {
      background: #1d4ed8;
      color: #eff6ff;
      transform: translateY(-2px);
      box-shadow: 0 16px 32px rgba(37, 99, 235, 0.2);
      outline: none;
    }

    .card-nav:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      background: rgba(148, 163, 184, 0.2);
      color: rgba(15, 23, 42, 0.4);
      box-shadow: none;
    }

    .knowledge-actions {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 16px;
      align-items: center;
      width: min(100%, 620px);
      margin: clamp(74px, 9vh, 120px) auto 0;
      padding: clamp(16px, 2.4vh, 26px) clamp(14px, 3vw, 28px) clamp(18px, 2.6vh, 28px);
      border-radius: 26px;
      border: 1px solid rgba(148, 163, 184, 0.28);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(236, 248, 255, 0.92));
      box-shadow: 0 18px 34px rgba(15, 23, 42, 0.12);
    }

    .knowledge-title {
      margin: 0;
      font-size: 0.95rem;
      color: var(--muted);
    }

    .knowledge-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      width: 100%;
    }

    .knowledge-button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font: inherit;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, color 0.2s ease;
      background: rgba(148, 163, 184, 0.2);
      color: #0f172a;
    }

    .knowledge-button:hover,
    .knowledge-button:focus-visible {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.18);
      outline: none;
    }

    .knowledge-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    .knowledge-button.is-active {
      color: #fff;
      box-shadow: 0 16px 28px rgba(15, 23, 42, 0.22);
    }

    .knowledge-button[data-status='known'] {
      background: rgba(34, 197, 94, 0.16);
      color: #047857;
    }

    .knowledge-button[data-status='known'].is-active {
      background: #16a34a;
    }

    .knowledge-button[data-status='partial'] {
      background: rgba(249, 115, 22, 0.18);
      color: #b45309;
    }

    .knowledge-button[data-status='partial'].is-active {
      background: #f97316;
    }

    .knowledge-button[data-status='unknown'] {
      background: rgba(239, 68, 68, 0.18);
      color: #b91c1c;
    }

    .knowledge-button[data-status='unknown'].is-active {
      background: #ef4444;
    }

    .reset-button {
      margin-top: 4px;
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      font: inherit;
      font-weight: 600;
      background: linear-gradient(180deg, rgba(37, 99, 235, 0.12), rgba(37, 99, 235, 0.05));
      color: #1d4ed8;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, color 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .reset-button:hover,
    .reset-button:focus-visible {
      background: #1d4ed8;
      color: #fff;
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(37, 99, 235, 0.18);
      outline: none;
    }

    .reset-button:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    .card-progress {
      margin: 0;
      font-weight: 600;
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.14);
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 0.95rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .main-card-slot {
      width: 100%;
      display: flex;
      justify-content: center;
    }

    .flashcard {
      position: relative;
      display: block;
      width: 100%;
      padding: 0;
      border: none;
      background: transparent;
      cursor: pointer;
      perspective: 1200px;
      text-align: left;
    }

    .flashcard:focus-visible {
      outline: 3px solid rgba(59, 130, 246, 0.8);
      outline-offset: 4px;
    }

    .flashcard-main {
      width: min(100%, 580px);
      margin: 0 auto;
    }

    .flashcard-inner {
      display: block;
      position: relative;
      width: 100%;
      min-height: 220px;
      transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
      transform-style: preserve-3d;
    }

    .flashcard-main .flashcard-inner {
      min-height: clamp(340px, 52vh, 460px);
    }

    .flashcard.is-flipped .flashcard-inner {
      transform: rotateY(180deg);
    }

    .flashcard-face {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 16px;
      padding: clamp(24px, 3vw, 34px);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(241, 245, 249, 0.95));
      box-shadow: var(--shadow);
      backface-visibility: hidden;
    }

    .flashcard-back {
      transform: rotateY(180deg);
      background: linear-gradient(180deg, rgba(226, 246, 255, 0.96), rgba(219, 234, 254, 0.95));
    }

    .flashcard-label {
      font-size: 0.8rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: rgba(15, 23, 42, 0.65);
      font-weight: 700;
    }

    .flashcard-number {
      font-size: 0.75rem;
      font-weight: 600;
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.15);
      border-radius: 999px;
      padding: 4px 10px;
      width: fit-content;
    }

    .flashcard-text {
      font-size: clamp(1.02rem, 0.98rem + 0.4vw, 1.24rem);
      line-height: 1.5;
      color: #0f172a;
      overflow-wrap: anywhere;
    }

    .flashcard-hint {
      font-size: 0.85rem;
      color: rgba(15, 23, 42, 0.6);
    }

    .library-section {
      margin: 48px auto 0;
      width: min(100%, 960px);
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: stretch;
      padding-inline: clamp(8px, 3vw, 24px);
    }

    .library-section h3 {
      margin: 0;
      font-size: 1.1rem;
      text-align: center;
    }

    .library-description {
      margin: 0;
      color: var(--muted);
      font-size: 0.95rem;
      text-align: center;
      max-width: 720px;
      margin-inline: auto;
    }

    .library-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 16px;
      padding: 0;
      margin: 0;
      list-style: none;
    }

    .library-grid li {
      list-style: none;
      margin: 0;
      height: 100%;
    }

    .library-card {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
      width: 100%;
      padding: 16px 18px;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.94), rgba(236, 248, 255, 0.9));
      box-shadow: var(--shadow);
      color: inherit;
      cursor: pointer;
      font: inherit;
      text-align: left;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      height: 100%;
    }

    .library-card:hover,
    .library-card:focus-visible {
      transform: translateY(-3px);
      border-color: rgba(59, 130, 246, 0.45);
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.12);
      outline: none;
    }

    .library-card[aria-current='true'] {
      border-color: rgba(37, 99, 235, 0.8);
      box-shadow: 0 18px 36px rgba(37, 99, 235, 0.15);
      background: linear-gradient(180deg, rgba(226, 244, 255, 0.95), rgba(219, 234, 254, 0.92));
    }

    .library-status {
      font-size: 0.82rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.2);
      color: #0f172a;
    }

    .library-card-number {
      font-size: 0.78rem;
      font-weight: 700;
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.16);
      border-radius: 999px;
      padding: 4px 10px;
    }

    .library-card-text {
      font-size: 0.95rem;
      line-height: 1.45;
      color: #0f172a;
      text-align: left;
    }

    .library-card-hint {
      font-size: 0.8rem;
      color: rgba(15, 23, 42, 0.58);
    }

    .flashcard.status-known .flashcard-face,
    .flashcard.status-known .flashcard-back,
    .library-card.status-known {
      border-color: rgba(34, 197, 94, 0.65);
      box-shadow: 0 18px 36px rgba(34, 197, 94, 0.24);
      background: linear-gradient(180deg, rgba(240, 253, 244, 0.96), rgba(220, 252, 231, 0.94));
    }

    .flashcard.status-partial .flashcard-face,
    .flashcard.status-partial .flashcard-back,
    .library-card.status-partial {
      border-color: rgba(249, 115, 22, 0.65);
      box-shadow: 0 18px 36px rgba(249, 115, 22, 0.22);
      background: linear-gradient(180deg, rgba(255, 247, 237, 0.96), rgba(255, 237, 213, 0.94));
    }

    .flashcard.status-unknown .flashcard-face,
    .flashcard.status-unknown .flashcard-back,
    .library-card.status-unknown {
      border-color: rgba(239, 68, 68, 0.65);
      box-shadow: 0 18px 36px rgba(239, 68, 68, 0.22);
      background: linear-gradient(180deg, rgba(254, 242, 242, 0.96), rgba(254, 226, 226, 0.94));
    }

    .library-card.status-known .library-status {
      background: rgba(34, 197, 94, 0.16);
      color: #047857;
    }

    .library-card.status-partial .library-status {
      background: rgba(249, 115, 22, 0.18);
      color: #b45309;
    }

    .library-card.status-unknown .library-status {
      background: rgba(239, 68, 68, 0.18);
      color: #b91c1c;
    }

    @media (prefers-reduced-motion: reduce) {
      .topic-card,
      .flashcard-inner,
      .library-card {
        transition-duration: 0.01ms !important;
      }
    }

    @media (max-width: 640px) {
      .flashcards-hero {
        margin: 28px 0 24px;
      }

      .user-controls {
        padding: 16px;
        gap: 14px;
      }

      .user-actions {
        width: 100%;
        justify-content: space-between;
      }

      .user-select {
        min-width: 0;
        width: 100%;
      }

      .flashcards-nav {
        justify-content: flex-start;
      }

      .game-header {
        gap: 12px;
      }

      .main-card-wrapper {
        width: 100%;
      }

      .main-card-stage {
        gap: 8px;
      }

      .card-nav {
        width: 44px;
        height: 44px;
      }

      .flashcard-main .flashcard-inner {
        min-height: 300px;
      }

      .knowledge-buttons {
        gap: 10px;
      }

      .knowledge-actions {
        padding: 16px 16px 22px;
        border-radius: 22px;
      }

      .library-grid {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="wrap row header-bar">
      <div class="brand">
        <div class="logo">FQ</div>
        <h1>Focus Academy</h1>
      </div>
      <nav class="flashcards-nav" aria-label="Navegació">
        <a class="pill" href="index.html">← Torna a l'inici</a>
        <a class="pill" href="https://focuscat.onrender.com/" target="_blank" rel="noopener">Focus Exams</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="flashcards-hero">
      <p class="section-kicker">🃏 Flashcards</p>
      <h1>Flashcards d'estudi personalitzades</h1>
      <p>Escull l'assignatura i després el bloc temàtic per practicar preguntes i respostes amb efecte de gir. Marca el teu
        progrés i reprèn quan vulguis.</p>
      <p id="active-user-banner" class="active-user-banner" role="status" aria-live="polite">Sessió actual: ...</p>
    </section>

    <section id="subjects-menu" class="topics-section subjects-section" aria-labelledby="subjects-title">
      <header>
        <h2 id="subjects-title">Tria l'assignatura que vols treballar</h2>
        <p id="subjects-subtitle" class="subtitle">Cada assignatura inclou diversos blocs de targetes perquè puguis estudiar
          pas a pas.</p>
      </header>
      <ul id="subjects-grid" class="topics-grid" aria-label="Assignatures disponibles"></ul>
    </section>

    <section id="topics-menu" class="topics-section" aria-labelledby="topics-title" hidden>
      <header>
        <h2 id="topics-title"></h2>
        <p id="topics-subtitle" class="subtitle"></p>
      </header>
      <ul id="topics-grid" class="topics-grid" aria-label="Blocs de flashcards"></ul>
    </section>

    <section id="flashcard-game" class="game-section" aria-labelledby="game-title" hidden>
      <div class="game-header">
        <button id="back-button" class="pill pill-back" type="button">← Torna al menú</button>
        <div>
          <h2 id="game-title"></h2>
          <p id="game-summary" class="subtitle"></p>
        </div>
      </div>
      <p id="game-instructions" class="game-instructions"></p>
      <div class="game-stage">
        <div class="main-card-wrapper">
          <p id="card-progress" class="card-progress" aria-live="polite"></p>
          <div class="main-card-stage">
            <button id="prev-card" class="card-nav" type="button" aria-label="Targeta anterior">←</button>
            <div id="game-main-card" class="main-card-slot" aria-live="polite"></div>
            <button id="next-card" class="card-nav" type="button" aria-label="Targeta següent">→</button>
          </div>
          <div class="knowledge-actions">
            <p class="knowledge-title">Com t'ha anat aquesta targeta?</p>
            <div class="knowledge-buttons" role="group" aria-label="Marca si te la sabies">
              <button class="knowledge-button" type="button" data-status="known">✅ Me la sabia</button>
              <button class="knowledge-button" type="button" data-status="partial">🟠 Mig mig</button>
              <button class="knowledge-button" type="button" data-status="unknown">❌ No me la sabia</button>
            </div>
            <button id="reset-progress" class="reset-button" type="button">🔁 Reinicia el progrés</button>
          </div>
        </div>
      </div>
      <div class="library-section" aria-label="Biblioteca de targetes">
        <h3>Biblioteca de targetes</h3>
        <p class="library-description">
          Selecciona una targeta per portar-la a l’escenari principal. Pots girar-la i marcar si la sabies: la biblioteca es tenyirà de verd, taronja o vermell segons el teu progrés.
        </p>
        <ol id="game-library" class="library-grid" aria-label="Llista de preguntes"></ol>
      </div>
    </section>
  </main>

  <script>
    const topics = [
      {
        id: 'borbonic-reforms',
        title: '🏰 Antic Règim i reformes borbòniques (s. XVIII)',
        subject: 'history',
        summary:
          'Analitza com els Borbons van modernitzar la monarquia hispànica després de la Guerra de Successió.',
        cards: [
          {
            question: 'Què era l’Antic Règim?',
            answer:
              'Un sistema social, econòmic i polític basat en la monarquia absoluta, els estaments i l’economia agrària.',
          },
          {
            question: 'Quin conflicte portà els Borbons al tron hispànic?',
            answer:
              'La Guerra de Successió (1701–1714), que enfrontà els partidaris dels Borbons i dels Habsburg.',
          },
          {
            question: 'Quin tractat va reconèixer Felip V com a rei?',
            answer: 'El Tractat d’Utrecht de 1713, que tancà la Guerra de Successió.',
          },
          {
            question: 'Què establiren els Decrets de Nova Planta?',
            answer:
              'L’abolició dels furs i institucions pròpies de la Corona d’Aragó per imposar l’administració castellana.',
          },
          {
            question: 'Què eren les intendències borbòniques?',
            answer:
              'Divisions administratives dirigides per intendents per controlar impostos i govern local.',
          },
          {
            question: 'Quin objectiu tenia el Cadastre de Patiño a Catalunya?',
            answer: 'Crear un impost directe més just que substituís tributs medievals.',
          },
          {
            question: 'Quin ministre destacà per les reformes fiscals i navals?',
            answer: 'El marquès de la Ensenada, que reorganitzà la hisenda i impulsà la flota.',
          },
          {
            question: 'Què fou el regalismo?',
            answer:
              'La política de reforçar el control reial sobre l’Església i limitar els privilegis papals.',
          },
          {
            question: 'Quina funció tenien les Societats Econòmiques d’Amics del País?',
            answer:
              'Difondre idees il·lustrades i promoure millores agrícoles i artesanals.',
          },
          {
            question: 'Com definien els Borbons el despotisme il·lustrat?',
            answer:
              'Un govern absolut que volia reformar per al progrés resumit en “Tot per al poble, però sense el poble”.',
          },
          {
            question: 'Quin monarca il·lustrat impulsà grans obres urbanes?',
            answer: 'Carles III, que modernitzà Madrid i fomentà infraestructures.',
          },
          {
            question: 'Què va desencadenar el motí d’Esquilache de 1766?',
            answer:
              'El malestar popular per reformes de vestimenta i impostos imposades pel ministre Esquilache.',
          },
          {
            question: 'Què eren les manufactures reials?',
            answer:
              'Fàbriques promogudes per la Corona per produir teixits, tapissos o porcellana de luxe.',
          },
          {
            question: 'Quin paper tenien les colònies americanes en l’economia borbònica?',
            answer:
              'Aportaven metalls, matèries primeres i mercats protegits per a la metròpoli.',
          },
          {
            question: 'Què establí el reglament de lliure comerç de 1778?',
            answer:
              'Permeté comerciar directament entre ports peninsulars i americans sense passar per Cadis.',
          },
          {
            question: 'Com estava estructurada la societat estamental?',
            answer:
              'En noblesa i clergat privilegiats i un tercer estat format per camperols i burgesos.',
          },
          {
            question: 'Quina reforma municipal controlava els ajuntaments?',
            answer:
              'La imposició de corregidors i regidors designats per la Corona per vigilar els municipis.',
          },
          {
            question: 'Què pretenien les reformes agràries il·lustrades?',
            answer:
              'Roturar terres ermes, millorar regadius i introduir noves tècniques per augmentar la producció.',
          },
          {
            question: 'Quin pensador asturià defensà canvis econòmics?',
            answer: 'Gaspar Melchor de Jovellanos, autor de l’Informe sobre la Llei Agrària.',
          },
          {
            question: 'Per què moltes reformes borbòniques tingueren límits?',
            answer:
              'Per la resistència de noblesa, Església i corporacions que defensaven els seus privilegis.',
          },
        ],
      },
      {
        id: 'crisi-antic-regim',
        title:
          '⚔️ La crisi de l’Antic Règim (1808–1833): Guerra del Francès i regnat de Ferran VII',
        subject: 'history',
        summary:
          'Entén com la invasió napoleònica i el retorn de Ferran VII van transformar la política i la societat.',
        cards: [
          {
            question: 'Quina invasió desencadenà la Guerra del Francès?',
            answer: 'L’entrada de les tropes napoleòniques a Espanya el 1808.',
          },
          {
            question: 'Què va ser el motí d’Aranjuez?',
            answer:
              'La revolta que forçà Carles IV a abdicar a favor de Ferran VII el març de 1808.',
          },
          {
            question: 'On obligà Napoleó la família reial a renunciar al tron?',
            answer: 'A Baiona, on cediren la corona a Josep Bonaparte.',
          },
          {
            question: 'Qui era Josep I?',
            answer: 'El germà de Napoleó imposat com a rei d’Espanya el 1808.',
          },
          {
            question: 'Què commemoram cada 2 de maig?',
            answer: 'L’alçament popular de Madrid contra l’ocupació francesa.',
          },
          {
            question: 'Què eren les juntes provincials?',
            answer:
              'Organismes locals que assumiren el poder per coordinar la resistència anti francesa.',
          },
          {
            question: 'On es reuniren les Corts que redactaren la Constitució de 1812?',
            answer: 'A Cadis, ciutat resistent sota setge francès.',
          },
          {
            question: 'Quina idea central tenia la Constitució de 1812?',
            answer: 'La sobirania nacional i la separació de poders amb sufragi masculí indirecte.',
          },
          {
            question: 'Què eren les guerilles?',
            answer:
              'Grups armats irregulars que atacaven l’exèrcit francès amb tàctiques de sorpresa.',
          },
          {
            question: 'Quina batalla de 1813 obrí la porta a l’expulsió francesa?',
            answer: 'La batalla de Vitòria, guanyada per les forces aliades.',
          },
          {
            question: 'Quin tractat retornà la corona a Ferran VII?',
            answer: 'El Tractat de Valençay, signat el desembre de 1813.',
          },
          {
            question: 'Què feu Ferran VII en tornar el 1814?',
            answer:
              'Abolí la Constitució i restablí l’absolutisme amb el Manifest dels Perses.',
          },
          {
            question: 'Com s’anomena el període absolutista de 1814 a 1820?',
            answer: 'El Sexenni absolutista, marcat per la repressió liberal.',
          },
          {
            question: 'Quin militar es revoltà a Las Cabezas de San Juan el 1820?',
            answer: 'Rafael del Riego, iniciant el Trienni Liberal.',
          },
          {
            question: 'Quines reformes aprovà el Trienni Liberal?',
            answer:
              'Restaurà la Constitució, desamortitzà béns eclesiàstics i reformà l’administració.',
          },
          {
            question: 'Qui acabà amb el Trienni Liberal el 1823?',
            answer:
              'Els Cent Mil Fills de Sant Lluís, un exèrcit francès enviat per la Santa Aliança.',
          },
          {
            question: 'Què caracteritza la Dècada Ominosa (1823–1833)?',
            answer: 'El retorn de l’absolutisme dur, censura i persecució dels liberals.',
          },
          {
            question: 'Quina llei successòria promulgà Ferran VII el 1830?',
            answer: 'La Pragmàtica Sanció que permetia heretar a la seva filla Isabel.',
          },
          {
            question: 'Qui s’oposà a la Pragmàtica Sanció?',
            answer:
              'El germà del rei, Carles Maria Isidre, que encapçalà el carlisme.',
          },
          {
            question: 'Quina guerra civil començà el 1833 arran del conflicte successori?',
            answer:
              'La Primera Guerra Carlina entre isabelins liberals i carlins absolutistes.',
          },
        ],
      },
      {
        id: 'estat-liberal',
        title:
          '🏛️ Construcció de l’Estat liberal (1833–1874): Isabel II, revolucions i Sexenni Democràtic',
        subject: 'history',
        summary:
          'Segueix les guerres carlines, les desamortitzacions i les constitucions que van definir el liberalisme espanyol.',
        cards: [
          {
            question: 'Qui fou la regent després de la mort de Ferran VII?',
            answer: 'Maria Cristina de Borbó, mare d’Isabel II.',
          },
          {
            question: 'Què inicià la Primera Guerra Carlina?',
            answer:
              'La disputa pel tron entre isabelins i carlins el 1833.',
          },
          {
            question: 'Quina constitució es promulgà el 1837?',
            answer: 'La Constitució liberal avançada aprovada per les Corts progressistes.',
          },
          {
            question: 'Quina desamortització aprovà Mendizábal?',
            answer:
              'La venda de béns eclesiàstics per finançar la guerra i ampliar la propietat privada.',
          },
          {
            question: 'Qui substituí Maria Cristina en la regència el 1840?',
            answer: 'El general progressista Baldomero Espartero.',
          },
          {
            question: 'Què fou la Constitució de 1845?',
            answer: 'El text moderat que reforçà la corona i limità el sufragi.',
          },
          {
            question: 'Quin partit governava durant la Dècada Moderada?',
            answer: 'El Partit Moderat liderat per Narváez.',
          },
          {
            question: 'Què establia el Concordat de 1851?',
            answer:
              'La reconciliació amb la Santa Seu i el reconeixement de la desamortització parcial.',
          },
          {
            question: 'Què fou el Bienni Progressista (1854–1856)?',
            answer:
              'Un període de govern progressista iniciat pel pronunciament de Vicálvaro.',
          },
          {
            question: 'Quina llei educativa es va aprovar el 1857?',
            answer: 'La Llei Moyano que organitzà el sistema educatiu espanyol.',
          },
          {
            question: 'Quina importància tingué el ferrocarril en aquests anys?',
            answer:
              'Impulsà la integració del mercat i la industrialització, especialment a Catalunya.',
          },
          {
            question: 'Què fou la Revolució de 1868?',
            answer:
              'L’alçament anomenat La Gloriosa que destronà Isabel II.',
          },
          {
            question: 'Qui dirigí el govern provisional després de 1868?',
            answer:
              'Un triumvirat amb Serrano, Prim i Topete que convocà Corts constituents.',
          },
          {
            question: 'Quin text constitucional aprovà el 1869?',
            answer: 'La Constitució democràtica que reconeixia àmplies llibertats i sufragi universal masculí.',
          },
          {
            question: 'Quin rei es va escollir després de la revolució?',
            answer: 'Amadeu I de Savoia, monarca constitucional elegit el 1870.',
          },
          {
            question: 'Per què abdicà Amadeu I el 1873?',
            answer:
              'Per la manca de suport polític i l’inici de la tercera guerra carlina.',
          },
          {
            question: 'Què proclamaren les Corts el febrer de 1873?',
            answer: 'La Primera República espanyola.',
          },
          {
            question: 'Quines tensions patí la Primera República?',
            answer:
              'Divisió entre federalistes i unitaris, revoltes cantonals i guerres carlines.',
          },
          {
            question: 'Qui protagonitzà el cop d’estat de 1874?',
            answer: 'El general Arsenio Martínez Campos a Sagunt, que restaurà els Borbons.',
          },
          {
            question: 'Quin monarca pujà al tron amb la Restauració?',
            answer: 'Alfons XII, fill d’Isabel II, amb suport dels moderats.',
          },
        ],
      },
      {
        id: 'restauracio-borbonica',
        title: '👑 Restauració borbònica (1875–1923): sistema canovista i societat en canvi',
        subject: 'history',
        summary:
          'Descobreix el torn pacífic, el caciquisme i els moviments socials que posaren fi a la Restauració.',
        cards: [
          {
            question: 'Qui era Antonio Cánovas del Castillo?',
            answer:
              'El líder conservador que impulsà la Restauració i el sistema del torn pacífic.',
          },
          {
            question: 'Quin text legal s’aprovà el 1876?',
            answer: 'La Constitució de 1876, flexible per adaptar-se a conservadors i liberals.',
          },
          {
            question: 'Què significava el torn pacífic?',
            answer:
              'L’alternança pactada entre conservadors i liberals per evitar cops d’estat.',
          },
          {
            question: 'Què era l’encasellat?',
            answer:
              'La manipulació prèvia dels resultats electorals per garantir la victòria del partit designat.',
          },
          {
            question: 'Quin paper tenien els cacics?',
            answer:
              'Intermediaris locals que controlaven el vot mitjançant favors i pressions.',
          },
          {
            question: 'Quin conflicte colonial continuà fins al 1898?',
            answer:
              'La lluita per la independència de Cuba contra el domini espanyol.',
          },
          {
            question: 'Quina guerra finalitzà amb el desastre del 1898?',
            answer:
              'La guerra hispano-nord-americana que provocà la pèrdua de Cuba, Filipines i Puerto Rico.',
          },
          {
            question: 'Quina repercussió tingué el 1898 en la societat espanyola?',
            answer:
              'Una crisi moral i política que generà el regeneracionisme.',
          },
          {
            question: 'Què proposava el regeneracionisme?',
            answer:
              'Reformes per modernitzar l’estat, acabar amb el caciquisme i impulsar l’educació.',
          },
          {
            question: 'Qui liderà el regeneracionisme polític des del govern?',
            answer: 'Antonio Maura amb el seu programa de revolució des de dalt.',
          },
          {
            question: 'Què fou la Llei de Jurisdiccions de 1906?',
            answer:
              'Una norma que posava insults a l’exèrcit o a la pàtria sota tribunals militars.',
          },
          {
            question: 'Què va desencadenar la Setmana Tràgica de 1909?',
            answer:
              'L’embarcament de reservistes catalans cap a la guerra del Marroc.',
          },
          {
            question: 'Quina importància tingué el moviment obrer durant la Restauració?',
            answer:
              'El creixement de sindicats socialistes (UGT) i anarquistes (CNT) i de vagues.',
          },
          {
            question: 'Quin govern aprovà la Llei de Mancomunitats?',
            answer:
              'El govern liberal de Canalejas el 1914, permetent cooperacions provincials.',
          },
          {
            question: 'Quina institució catalana nasqué el 1914?',
            answer: 'La Mancomunitat de Catalunya presidida per Enric Prat de la Riba.',
          },
          {
            question: 'Què fou la crisi de 1917?',
            answer:
              'Una triple agitació militar, política i obrera que qüestionà el sistema.',
          },
          {
            question: 'Quin paper tingueren les Juntes de Defensa?',
            answer:
              'Associacions d’oficials que protestaven per condicions i reclamaven poder polític.',
          },
          {
            question: 'Què provocà la vaga general de 1917?',
            answer:
              'La coordinació de UGT i CNT per reclamar reformes democràtiques i millores laborals.',
          },
          {
            question: 'Per què el sistema de la Restauració es debilitava el 1920?',
            answer:
              'Per la conflictivitat social, l’auge del nacionalisme i la guerra del Marroc.',
          },
          {
            question: 'Quin desastre militar precipità la crisi final?',
            answer: 'La derrota d’Annual de 1921, amb milers de soldats morts al Rif.',
          },
        ],
      },
      {
        id: 'primo-rivera',
        title: '🛡️ Dictadura de Primo de Rivera (1923–1930)',
        subject: 'history',
        summary:
          'Examina el cop militar, les reformes econòmiques i la crisi que conduí a la fi de la monarquia d’Alfons XIII.',
        cards: [
          {
            question: 'Quin esdeveniment inicià la dictadura de Primo de Rivera?',
            answer: 'El cop d’estat militar del 13 de setembre de 1923 amb suport d’Alfons XIII.',
          },
          {
            question: 'Quin càrrec ocupà Primo de Rivera?',
            answer:
              'Cap del Directori Militar i després del Directori Civil governant com a dictador.',
          },
          {
            question: 'Quina justificació donava al cop?',
            answer:
              'Acabar amb el desordre social, el caciquisme i la guerra del Marroc.',
          },
          {
            question: 'Què eren els somatents?',
            answer:
              'Milícies civils utilitzades per mantenir l’ordre públic durant la dictadura.',
          },
          {
            question: 'Quina mesura adoptà respecte als partits polítics?',
            answer: 'Els suspengué i prohibí l’activitat parlamentària.',
          },
          {
            question: 'Quin organisme substituí els partits?',
            answer: 'La Unió Patriòtica, partit únic creat per donar suport al règim.',
          },
          {
            question: 'Quines institucions locals foren intervenides?',
            answer: 'Ajuntaments i diputacions, dirigits per gestors nomenats pel govern.',
          },
          {
            question: 'Què pretenia l’Assemblea Nacional Consultiva de 1927?',
            answer:
              'Elaborar una nova constitució corporativa sense sufragi universal.',
          },
          {
            question: 'Com es resolgué la guerra del Marroc durant la dictadura?',
            answer:
              'Amb el desembarcament d’Alhucemas el 1925 i la col·laboració amb França.',
          },
          {
            question: 'Quina política econòmica impulsà?',
            answer:
              'Obres públiques, plans hidràulics i proteccionisme per industrialitzar el país.',
          },
          {
            question: 'Quin organisme regulava el treball?',
            answer: 'Els comitès paritaris, que mediaven conflictes entre patrons i obrers.',
          },
          {
            question: 'Quina postura adoptà envers el catalanisme?',
            answer:
              'Suspengué la Mancomunitat i perseguí l’ús oficial del català.',
          },
          {
            question: 'Com reaccionaren els intel·lectuals?',
            answer:
              'Molts, com Unamuno, criticaren la censura i foren exiliats o destituïts.',
          },
          {
            question: 'Què va passar amb les finances públiques?',
            answer: 'El dèficit augmentà per la despesa d’obres i la inflació.',
          },
          {
            question: 'Quin impacte tingué la crisi de 1929?',
            answer:
              'Va agreujar la situació econòmica i restà suport al règim.',
          },
          {
            question: 'Per què perdé suport l’exèrcit?',
            answer:
              'Per la falta de reformes reals i el malestar dels oficials africanistes.',
          },
          {
            question: 'Quan dimití Primo de Rivera?',
            answer: 'El gener de 1930, sense suport del rei ni de l’exèrcit.',
          },
          {
            question: 'Qui el substituí provisionalment?',
            answer: 'El general Dámaso Berenguer amb el període anomenat Dictablanda.',
          },
          {
            question: 'Què va demostrar el pacte de Sant Sebastià de 1930?',
            answer:
              'La unitat de republicans i socialistes per acabar amb la monarquia.',
          },
          {
            question: 'Quina conseqüència tingueren les eleccions municipals d’abril de 1931?',
            answer:
              'La victòria republicana a les ciutats precipità la proclamació de la Segona República.',
          },
        ],
      },
      {
        id: 'segunda-republica',
        title: '🗳️ Segona República (1931–1936): reformes i conflictes',
        subject: 'history',
        summary:
          'Explora les reformes socials, les tensions polítiques i els motius que van precedir la Guerra Civil.',
        cards: [
          {
            question: 'Quan es proclamà la Segona República?',
            answer: 'El 14 d’abril de 1931 després de les eleccions municipals.',
          },
          {
            question: 'Quin document fixà les bases del nou règim?',
            answer: 'La Constitució de 1931, laica i democràtica.',
          },
          {
            question: 'Quina reforma educativa impulsà la República?',
            answer:
              'La creació d’escoles laiques i l’extensió de l’educació obligatòria.',
          },
          {
            question: 'Què establia la reforma agrària de 1932?',
            answer:
              'Expropiar grans latifundis per repartir terres als jornalers.',
          },
          {
            question: 'Quina reforma afectà l’exèrcit?',
            answer:
              'La reducció de comandaments i la creació de l’Acadèmia Militar amb Manuel Azaña.',
          },
          {
            question: 'Què és l’Estatut d’Autonomia de Catalunya de 1932?',
            answer:
              'La norma que reconeixia l’autogovern de la Generalitat republicana.',
          },
          {
            question: 'Quin paper tingué la Llei de Congregacions?',
            answer:
              'Regulà l’activitat de l’Església i secularitzà l’ensenyament.',
          },
          {
            question: 'Què és la Sanjurjada?',
            answer: 'L’intent de cop militar del general Sanjurjo el 1932, que fracassà.',
          },
          {
            question: 'Què va ser el Bienni Reformista?',
            answer:
              'Els primers governs republicano-socialistes (1931–1933) centrats en reformes.',
          },
          {
            question: 'Quin partit guanyà les eleccions de 1933?',
            answer:
              'La Confederació Espanyola de Dretes Autònomes (CEDA) amb suport de radicals.',
          },
          {
            question: 'Què caracteritza el Bienni Conservador (1933–1935)?',
            answer:
              'La paralització de reformes i la repressió de moviments obrers.',
          },
          {
            question: 'Què va ser la revolta d’Astúries de 1934?',
            answer:
              'Una insurrecció obrera i minera contra l’entrada de la CEDA al govern.',
          },
          {
            question: 'Com actuà el govern a la revolta d’Astúries?',
            answer:
              'Envià l’exèrcit colonial que reprimí durament l’alçament.',
          },
          {
            question: 'Què era la Llei de Contractes de Conreu?',
            answer:
              'Una norma catalana per protegir arrendataris i rabassaires.',
          },
          {
            question: 'Què va provocar el conflicte de Casas Viejas?',
            answer:
              'Una insurrecció anarquista el 1933 reprimida amb violència per la Guàrdia d’Assalt.',
          },
          {
            question: 'Quin front polític es creà per a les eleccions de febrer de 1936?',
            answer:
              'El Front Popular, coalició de partits d’esquerra i republicans.',
          },
          {
            question: 'Quina fou la resposta del Front Popular en guanyar?',
            answer:
              'Restaurà reformes, amnistia als presos d’Astúries i reobrí l’autonomia catalana.',
          },
          {
            question: 'Quin clima polític hi havia a mitjan 1936?',
            answer:
              'Gran polarització, violència al carrer i conspiracions militars.',
          },
          {
            question: 'Quin esdeveniment desencadenà el cop de juliol de 1936?',
            answer:
              'L’assassinat del líder monàrquic Calvo Sotelo i el temor a la revolució.',
          },
          {
            question: 'Qui era el president de la República el 1936?',
            answer: 'Manuel Azaña, elegit per les Corts.',
          },
        ],
      },
      {
        id: 'guerra-civil',
        title: '🔥 Guerra Civil Espanyola (1936–1939): causes, desenvolupament i conseqüències',
        subject: 'history',
        summary:
          'Segueix el conflicte des del cop militar fins a l’exili, amb batalles, aliats i impacte social.',
        cards: [
          {
            question: 'Quan va començar la Guerra Civil Espanyola?',
            answer: 'El juliol de 1936 amb el cop militar contra la República.',
          },
          {
            question: 'Qui dirigia la sublevació inicial?',
            answer:
              'Generals com Franco, Mola i Sanjurjo que buscaven un govern autoritari.',
          },
          {
            question: 'Quin bàndol defensava la legalitat republicana?',
            answer:
              'El bàndol republicà, format per partits d’esquerra, sindicats i voluntaris.',
          },
          {
            question: 'Quin bàndol fou conegut com a nacional?',
            answer:
              'El bàndol sublevat integrat per militars, conservadors i falangistes.',
          },
          {
            question: 'Quin objectiu tenia el pont aeri del Marroc?',
            answer:
              'Traslladar les tropes africanistes de Franco a la península amb suport nazi.',
          },
          {
            question: 'Quina batalla va ser clau per defensar Madrid el 1936?',
            answer:
              'La batalla de Madrid, amb resistència popular i Brigades Internacionals.',
          },
          {
            question: 'Què eren les Brigades Internacionals?',
            answer:
              'Voluntaris estrangers que lluitaven al costat de la República contra el feixisme.',
          },
          {
            question: 'Quin suport extern rebé el bàndol nacional?',
            answer: 'Ajuda militar d’Alemanya nazi i Itàlia feixista.',
          },
          {
            question: 'Quin país ajudà més la República?',
            answer:
              'La Unió Soviètica, tot i el bloqueig internacional.',
          },
          {
            question: 'Què fou la batalla de Jarama?',
            answer:
              'Una ofensiva nacional el 1937 per tallar la carretera a València, aturada pels republicans.',
          },
          {
            question: 'Què simbolitza el bombardeig de Guernica?',
            answer:
              'L’atac aeri nazi contra la població basca, immortalitzat per Picasso.',
          },
          {
            question: 'Què fou la batalla de l’Ebre?',
            answer:
              'L’última gran ofensiva republicana el 1938, que acabà en derrota.',
          },
          {
            question: 'Quin paper tingué la propaganda durant la guerra?',
            answer:
              'Mobilitzà la població i justificà les accions de cada bàndol.',
          },
          {
            question: 'Què va suposar la caiguda de Barcelona el gener de 1939?',
            answer:
              'La fi de la resistència catalana i el camí obert cap a la victòria nacional.',
          },
          {
            question: 'Quin govern es formà a Burgos?',
            answer:
              'La Junta de Defensa Nacional i després el govern de Franco.',
          },
          {
            question: 'Què eren les col·lectivitzacions?',
            answer:
              'La gestió obrera de fàbriques i terres en zones republicanes, especialment a Catalunya i Aragó.',
          },
          {
            question: 'Quin paper va tenir l’Església catòlica?',
            answer:
              'En gran part donà suport al bàndol nacional i legitimà la croada.',
          },
          {
            question: 'Quines conseqüències humanes tingué la guerra?',
            answer:
              'Centenars de milers de morts, exili massiu i repressió posterior.',
          },
          {
            question: 'Quan acabà la guerra?',
            answer: 'L’1 d’abril de 1939 amb el triomf franquista.',
          },
          {
            question: 'Què passà amb els exiliats republicans?',
            answer:
              'Molts fugiren a França, Mèxic o altres països, formant la diàspora.',
          },
        ],
      },
      {
        id: 'franquisme',
        title: '⚙️ Franquisme (1939–1975): política, economia i societat',
        subject: 'history',
        summary:
          'Analitza la dictadura de Franco des de la repressió inicial fins al desenvolupisme i l’oposició democràtica.',
        cards: [
          {
            question: 'Quina forma de govern instaurà Franco el 1939?',
            answer:
              'Una dictadura personal autoritària, nacionalcatòlica i anticomunista.',
          },
          {
            question: 'Què eren les lleis fonamentals del règim?',
            answer:
              'Un conjunt de lleis orgàniques que substituïen la constitució i consolidaven el poder de Franco.',
          },
          {
            question: 'Quina funció tenia la Falange?',
            answer:
              'Ser el partit únic oficial, FET y de las JONS, integrat amb carlins i falangistes.',
          },
          {
            question: 'Què caracteritzà la repressió inicial?',
            answer:
              'Afusellaments, presons i depuracions contra republicans i dissidents.',
          },
          {
            question: 'Què fou la política d’autarquia?',
            answer:
              'L’intent d’autosuficiència econòmica amb control estatal i racionament.',
          },
          {
            question: 'Què era la cartilla de racionament?',
            answer:
              'Document per distribuir aliments bàsics durant els anys quaranta.',
          },
          {
            question: 'Què significà l’aïllament internacional dels anys quaranta?',
            answer:
              'La manca de reconeixement i ajudes després de la Segona Guerra Mundial.',
          },
          {
            question: 'Quin acord apropà Espanya als EUA el 1953?',
            answer:
              'Els pactes bilaterals que permetien bases nord-americanes a canvi d’ajuda econòmica.',
          },
          {
            question: 'Què és el Concordat de 1953?',
            answer:
              'Un acord amb el Vaticà que reforçava el paper de l’Església en l’Estat.',
          },
          {
            question: 'Quins organismes impulsaren el desenvolupisme dels anys seixanta?',
            answer:
              'Els Plans d’Estabilització de 1959 i els Plans de Desenvolupament tecnocràtics.',
          },
          {
            question: 'Quin canvi econòmic aportà el Pla d’Estabilització?',
            answer:
              'L’obertura al capital estranger i la liberalització parcial de l’economia.',
          },
          {
            question: 'Quina conseqüència social tingué el desenvolupisme?',
            answer:
              'L’emigració interior cap a ciutats i l’arribada de turisme de masses.',
          },
          {
            question: 'Quina oposició aparegué als anys seixanta?',
            answer:
              'Moviments estudiantils, obrers, nacionalistes i democristians clandestins.',
          },
          {
            question: 'Què era el Tribunal d’Ordre Públic?',
            answer:
              'Un tribunal especial creat el 1963 per jutjar delictes polítics.',
          },
          {
            question: 'Quina importància tingué l’Executiu de Carrero Blanco?',
            answer:
              'Consolidà el sector immobilista i fou assassinat per ETA el 1973.',
          },
          {
            question: 'Què és la Llei de Successió de 1947?',
            answer:
              'Declarava Espanya regne i permetia a Franco designar successor.',
          },
          {
            question: 'Qui fou nombrat successor el 1969?',
            answer:
              'El príncep Joan Carles de Borbó amb el títol de rei.',
          },
          {
            question: 'Què va ser el Procés de Burgos?',
            answer:
              'Un judici militar de 1970 contra militants d’ETA que generà rebuig internacional.',
          },
          {
            question: 'Quin paper tingué la censura durant el franquisme?',
            answer:
              'Controlà premsa, cinema i cultura, limitant la llibertat d’expressió.',
          },
          {
            question: 'Quan morí Franco?',
            answer: 'El 20 de novembre de 1975, obrint la porta a la Transició.',
          },
        ],
      },
      {
        id: 'espanya-democratica',
        title: '🌟 Espanya democràtica (1982–actualitat): governs i reptes',
        subject: 'history',
        summary:
          'Repàs als governs democràtics, la integració europea i els principals desafiaments contemporanis.',
        cards: [
          {
            question: 'Quin partit guanyà les eleccions generals de 1982?',
            answer: 'El PSOE liderat per Felipe González amb una majoria absoluta.',
          },
          {
            question: 'Quan va entrar Espanya a la Comunitat Econòmica Europea?',
            answer: 'L’1 de gener de 1986, juntament amb Portugal.',
          },
          {
            question: 'Què es va decidir al referèndum de l’OTAN de 1986?',
            answer:
              'La permanència d’Espanya a l’Aliança Atlàntica amb condicions de reducció militar.',
          },
          {
            question: 'Quin esdeveniment internacional es celebrà a Barcelona el 1992?',
            answer:
              'Els Jocs Olímpics, símbol de modernització i projecció exterior.',
          },
          {
            question: 'Quina mostra universal acollí Sevilla el 1992?',
            answer:
              'L’Expo 92, dedicada al cinquè centenari del descobriment d’Amèrica.',
          },
          {
            question: 'Quin partit arribà al govern el 1996?',
            answer: 'El Partit Popular amb José María Aznar després de les eleccions generals.',
          },
          {
            question: 'Quan es va introduir l’euro com a moneda física?',
            answer: 'El 2002, substituint la pesseta.',
          },
          {
            question: 'Quin atemptat va commocionar Madrid el 2004?',
            answer:
              'Els atacs jihadistes de l’11 de març als trens de rodalies.',
          },
          {
            question: 'Quin govern sorgí després de les eleccions de 2004?',
            answer:
              'Un executiu del PSOE liderat per José Luis Rodríguez Zapatero.',
          },
          {
            question: 'Quina llei social destacada aprovà Zapatero el 2005?',
            answer:
              'La llei que reconegué el matrimoni igualitari entre persones del mateix sexe.',
          },
          {
            question: 'Quin moviment ciutadà esclatà el 2011?',
            answer:
              'El 15-M o moviment dels indignats reclamant democràcia real i justícia social.',
          },
          {
            question: 'Quin partit guanyà les eleccions del 2011?',
            answer:
              'El Partit Popular amb Mariano Rajoy, que governà en plena crisi.',
          },
          {
            question: 'Quina crisi marcà la dècada del 2000?',
            answer:
              'La crisi financera i immobiliària del 2008 amb fort impacte en l’atur.',
          },
          {
            question: 'Quin acord autonòmic destacà a Catalunya el 2006?',
            answer:
              'L’aprovació del nou Estatut d’Autonomia, després retallat pel Tribunal Constitucional.',
          },
          {
            question: 'Què va passar el 1 d’octubre de 2017 a Catalunya?',
            answer:
              'El referèndum unilateral d’independència i la posterior aplicació de l’article 155.',
          },
          {
            question: 'Quan abdicà el rei Joan Carles I?',
            answer: 'El juny de 2014, cedint la corona al seu fill Felip VI.',
          },
          {
            question: 'Quin govern de coalició es formà el gener de 2020?',
            answer:
              'La coalició entre PSOE i Unidas Podemos presidida per Pedro Sánchez.',
          },
          {
            question: 'Quin repte sanitari global va afrontar Espanya el 2020?',
            answer:
              'La pandèmia de la COVID-19 amb confinaments i pressió sanitària.',
          },
          {
            question: 'Quines transformacions econòmiques impulsa el Pla de Recuperació?',
            answer:
              'La digitalització, la transició ecològica i la cohesió social finançades amb fons europeus.',
          },
          {
            question: 'Quins reptes polítics continuen oberts?',
            answer:
              'La gestió del model territorial, la desigualtat social i l’adaptació al canvi climàtic.',
          },
        ],
      },
      {
        id: 'ww1',
        title: '🪖 Primera Guerra Mundial (1914–1918)',
        subject: 'history',
        summary: 'Explora les causes, els bàndols i les conseqüències del primer gran conflicte global.',
        cards: [
          {
            question: 'Quina fou la causa principal de la Primera Guerra Mundial?',
            answer: "Les rivalitats entre potències europees i l’assassinat de l’arxiduc Francesc Ferran d’Àustria.",
          },
          {
            question: 'Quins dos bàndols principals es van enfrontar?',
            answer: 'La Triple Entesa (França, Regne Unit i Rússia) contra la Triple Aliança (Alemanya, Àustria-Hongria i Itàlia).',
          },
          {
            question: 'Quin nou tipus de guerra va aparèixer durant la Primera Guerra Mundial?',
            answer: 'La guerra de trinxeres.',
          },
          {
            question: 'Quin tractat va posar fi a la guerra?',
            answer: 'El Tractat de Versalles (1919).',
          },
          {
            question: 'Quines conseqüències va tenir per Alemanya?',
            answer: 'Pèrdues territorials, indemnitzacions econòmiques i ressentiment social i polític.',
          },
          {
            question: 'Quin paper va tenir el sistema d’aliances europees abans de 1914?',
            answer: "Va crear blocs militars oposats que es van activar quan va esclatar la crisi d'Austria i Sèrbia.",
          },
          {
            question: 'Quin imperi donà suport a Àustria-Hongria contra Sèrbia?',
            answer: 'L’Imperi Alemany, que li va garantir suport militar immediat.',
          },
          {
            question: 'Per què Rússia va mobilitzar el seu exèrcit a l’estiu de 1914?',
            answer: 'Per protegir Sèrbia i mantenir la seva influència als Balcans.',
          },
          {
            question: 'Quina importància va tenir la batalla del Somme?',
            answer: 'Va mostrar la brutalitat de la guerra de trinxeres amb enormes baixes sense avenços clars.',
          },
          {
            question: 'Què era la guerra submarina irrestricta?',
            answer: 'L’estratègia alemanya d’enfonsar qualsevol vaixell enemic o neutral que aprovisionàs el Regne Unit.',
          },
          {
            question: 'Com afectà el telegrama Zimmerman al conflicte?',
            answer: 'Va empènyer els Estats Units a entrar en guerra contra Alemanya el 1917.',
          },
          {
            question: 'Quina nova arma química es va usar a Ieper el 1915?',
            answer: 'El gas clor, que provocava sufocació i lesions greus als soldats.',
          },
          {
            question: 'Per què Itàlia va canviar de bàndol el 1915?',
            answer: 'Perquè els Aliats li prometeren territoris austríacs si els ajudava.',
          },
          {
            question: 'Què va ser la batalla de Gallípoli?',
            answer: 'Un intent fallit dels Aliats d’obrir un front a Turquia per assegurar l’accés al mar Negre.',
          },
          {
            question: 'Quina funció tenien les dones en l’esforç de guerra?',
            answer: 'Treballaven en fàbriques, hospitals i serveis per substituir els homes mobilitzats.',
          },
          {
            question: 'Què va provocar la Revolució Russa durant la guerra?',
            answer: 'L’esgotament social i econòmic que va portar Rússia a sortir del conflicte el 1917.',
          },
          {
            question: 'Com s’anomenava el front entre Alemanya i Rússia?',
            answer: 'El Front Oriental, amb batalles molt mòbils com Tannenberg.',
          },
          {
            question: 'Quina innovació militar va aparèixer a la batalla de Cambrai?',
            answer: 'L’ús massiu de tancs per trencar les línies de trinxeres.',
          },
          {
            question: 'Quin paper jugaren les colònies europees?',
            answer: 'Proporcionaren soldats i recursos, especialment de l’Índia, Àfrica i Austràlia.',
          },
          {
            question: 'Què era el front occidental?',
            answer: 'La línia de batalla principal a França i Bèlgica entre Alemanya i la Triple Entesa.',
          },
          {
            question: 'Quina importància tingué la batalla de Verdun?',
            answer: 'Es convertí en símbol de resistència francesa i de la guerra d’esgotament.',
          },
          {
            question: 'Què defensava el president Wilson amb els Catorze Punts?',
            answer: 'Una pau justa basada en l’autodeterminació i la creació de la Societat de Nacions.',
          },
          {
            question: 'Quins imperis desaparegueren després del conflicte?',
            answer: 'Els imperis Alemany, Austrohongarès, Otomà i Rus.',
          },
          {
            question: 'Quines noves nacions sorgiren a Europa Central?',
            answer: 'Polònia, Txecoslovàquia, Iugoslàvia o Finlàndia, entre d’altres.',
          },
          {
            question: 'Què era la Societat de Nacions?',
            answer: 'Un organisme internacional creat per garantir la pau i evitar noves guerres.',
          },
          {
            question: 'Com afectà la guerra a l’economia europea?',
            answer: 'Deixà deutes enormes, inflació i necessitat de reconstrucció.',
          },
          {
            question: 'Què va passar amb l’Imperi Otomà després de la guerra?',
            answer: 'Es va desmembrar i una part es convertí en la República de Turquia.',
          },
          {
            question: 'Quin paper tingué la propaganda durant el conflicte?',
            answer: 'Mobilitzava el suport ciutadà i justificava l’esforç bèl·lic.',
          },
          {
            question: 'Per què la guerra és considerada total?',
            answer: 'Perquè implicà tota la societat, l’economia i les colònies dels països en guerra.',
          },
          {
            question: 'Quines condicions imposà el Tractat de Versalles a Alemanya?',
            answer: 'Limitacions militars, pèrdues territorials i pagament de reparacions.',
          },
        ],
      },
      {
        id: 'ww2',
        title: '💣 Segona Guerra Mundial (1939–1945)',
        subject: 'history',
        summary: 'Repassa els desencadenants, els aliats i els fets clau del conflicte més devastador del segle XX.',
        cards: [
          {
            question: 'Quina va ser la causa immediata de la Segona Guerra Mundial?',
            answer: 'La invasió d’Alemanya a Polònia el 1939.',
          },
          {
            question: 'Quins dos bàndols es van enfrontar?',
            answer: 'Els Aliats (Regne Unit, EUA, URSS) i les Potències de l’Eix (Alemanya, Itàlia, Japó).',
          },
          {
            question: 'Qui era Adolf Hitler?',
            answer: 'El dictador nazi que governava Alemanya i va iniciar la guerra.',
          },
          {
            question: 'Quin fet va posar fi a la guerra al Pacífic?',
            answer: 'Les bombes atòmiques sobre Hiroshima i Nagasaki (1945).',
          },
          {
            question: 'Quines conseqüències va tenir la guerra per al món?',
            answer: 'Destrucció massiva, milions de morts i naixement de l’ONU.',
          },
          {
            question: 'Què va ser el pacte Ribbentrop-Mólotov?',
            answer: 'Un acord de no-agressió entre Alemanya i la URSS que incloïa el repartiment de Polònia.',
          },
          {
            question: 'Què significà el Blitzkrieg?',
            answer: "La guerra llampec alemanya basada en atacs ràpids amb avions, tancs i infanteria.",
          },
          {
            question: 'Per què França va caure tan ràpidament el 1940?',
            answer: 'Perquè Alemanya atacà pel nord a través de Bèlgica i rodejà la Línia Maginot.',
          },
          {
            question: 'Què va ser la batalla d’Anglaterra?',
            answer: 'Una campanya aèria on la RAF britànica va resistir els bombardejos alemanys.',
          },
          {
            question: 'Quina operació fou la invasió alemanya de la URSS?',
            answer: 'L’Operació Barbarroja, iniciada el juny de 1941.',
          },
          {
            question: 'Quin esdeveniment va implicar els EUA al conflicte?',
            answer: 'L’atac japonès a Pearl Harbor el desembre de 1941.',
          },
          {
            question: 'Què va passar a Stalingrad?',
            answer: 'L’exèrcit alemany fou derrotat per l’Exèrcit Roig, marcant un punt d’inflexió a l’est.',
          },
          {
            question: 'Quin significat va tenir el desembarcament de Normandia?',
            answer: 'Va obrir un nou front a l’oest d’Europa el 6 de juny de 1944.',
          },
          {
            question: 'Què era la Solució Final?',
            answer: 'El pla nazi per exterminar el poble jueu i altres col·lectius perseguits.',
          },
          {
            question: 'Quin camp de concentració simbolitza l’Holocaust?',
            answer: 'Auschwitz-Birkenau, on milions de persones foren assassinades.',
          },
          {
            question: 'Què va ser la batalla del Pacífic de Midway?',
            answer: 'Una victòria naval dels EUA que frenà l’expansió japonesa el 1942.',
          },
          {
            question: 'Què eren els kamikazes?',
            answer: 'Pilots japonesos que es llançaven contra vaixells enemics en missions suïcides.',
          },
          {
            question: 'Quina conferència va establir l’estratègia aliada el 1943?',
            answer: 'La Conferència de Teheran entre Stalin, Roosevelt i Churchill.',
          },
          {
            question: 'Què va acordar-se a la Conferència de Yalta?',
            answer: 'El repartiment d’influències a Europa i la creació de l’ONU.',
          },
          {
            question: 'Quin paper va tenir la resistència europea?',
            answer: 'Sabotejà les forces d’ocupació i ajudà els aliats amb informació i guerrilla.',
          },
          {
            question: 'Què era el front africà durant la guerra?',
            answer: 'Les batalles al desert del nord d’Àfrica entre els aliats i les forces de Rommel.',
          },
          {
            question: 'Què va passar a la batalla de Kursk?',
            answer: 'La URSS va repel·lir l’última gran ofensiva de tancs alemanya el 1943.',
          },
          {
            question: 'Per què Itàlia va capitular el 1943?',
            answer: 'Després de la invasió aliada de Sicília i la caiguda de Mussolini.',
          },
          {
            question: 'Quina ciutat alemanya va patir un incendi devastador el 1945?',
            answer: 'Dresden, bombardejada pels aliats provocant milers de morts civils.',
          },
          {
            question: 'Què va ser el Projecte Manhattan?',
            answer: 'El programa secret dels EUA per construir la bomba atòmica.',
          },
          {
            question: 'Quina importància tingué la batalla del Bulge?',
            answer: 'Va ser l’última ofensiva alemanya a l’oest, derrotada pels aliats a Bèlgica.',
          },
          {
            question: 'Quan va capitular Alemanya?',
            answer: 'El 8 de maig de 1945, Dia de la Victòria a Europa.',
          },
          {
            question: 'Què va passar amb Japó després de les bombes atòmiques?',
            answer: 'Va anunciar la rendició i signà la capitulació el 2 de setembre de 1945.',
          },
          {
            question: 'Quins judicis es van celebrar després de la guerra?',
            answer: 'Els judicis de Nuremberg contra líders nazis per crims de guerra.',
          },
          {
            question: 'Què va passar amb Alemanya després de la guerra?',
            answer: 'Va ser dividida en zones d’ocupació controlades pels aliats.',
          },
        ],
      },
      {
        id: 'cold-war',
        title: '❄️ Guerra Freda (1947–1991)',
        subject: 'history',
        summary: 'Entén la rivalitat entre blocs, els símbols de la divisió i el final del conflicte ideològic.',
        cards: [
          {
            question: 'Què era la Guerra Freda?',
            answer: 'Un conflicte ideològic i polític entre els Estats Units i la URSS sense enfrontament directe.',
          },
          {
            question: 'Quins sistemes defensaven els dos blocs?',
            answer: 'Els EUA el capitalisme; la URSS el comunisme.',
          },
          {
            question: 'Quin mur simbolitzava la divisió d’Europa?',
            answer: 'El mur de Berlín.',
          },
          {
            question: 'Què va ser la cursa espacial?',
            answer: 'La competició entre EUA i URSS per conquerir l’espai.',
          },
          {
            question: 'Quin esdeveniment va marcar el final de la Guerra Freda?',
            answer: 'La caiguda del mur de Berlín el 1989 i la desaparició de la URSS el 1991.',
          },
          {
            question: 'Què és una superpotència?',
            answer: 'Un país amb gran poder militar, econòmic i polític capaç d’influir arreu del món.',
          },
          {
            question: 'Què era el Pla Marshall?',
            answer: 'L’ajuda econòmica dels EUA per reconstruir Europa occidental i frenar el comunisme.',
          },
          {
            question: 'Què era el COMECON?',
            answer: 'L’organisme econòmic liderat per la URSS per coordinar els països comunistes.',
          },
          {
            question: 'Quin era l’objectiu de l’OTAN?',
            answer: 'Crear una aliança militar defensiva entre els Estats Units i Europa occidental.',
          },
          {
            question: 'Què era el Pacte de Varsòvia?',
            answer: 'L’aliança militar dels països comunistes liderats per la URSS.',
          },
          {
            question: 'Què significava la doctrina Truman?',
            answer: 'El compromís dels EUA de contenir l’expansió del comunisme.',
          },
          {
            question: 'Què va passar durant el bloqueig de Berlín (1948-1949)?',
            answer: 'La URSS tallà els accessos a Berlín Oest i els aliats organitzaren un pont aeri.',
          },
          {
            question: 'Què va ser la guerra de Corea?',
            answer: 'Un conflicte entre Corea del Nord comunista i Corea del Sud, amb suport de la ONU i la Xina.',
          },
          {
            question: 'Quin líder impulsà la desestalinització a la URSS?',
            answer: 'Nikita Khrusxov, que denuncià els crims de Stalin el 1956.',
          },
          {
            question: 'Què va ser la crisi dels míssils de Cuba?',
            answer: 'Un enfrontament el 1962 quan la URSS instal·là míssils nuclears a Cuba.',
          },
          {
            question: 'Què és el teló d’acer?',
            answer: 'La divisió simbòlica i física entre Europa occidental i oriental.',
          },
          {
            question: 'Quina importància va tenir l’Sputnik el 1957?',
            answer: 'Va ser el primer satèl·lit artificial, demostrant l’avenç soviètic en la cursa espacial.',
          },
          {
            question: 'Què va passar a la revolta hongaresa del 1956?',
            answer: 'La URSS la va reprimir amb tancs per mantenir el control sobre Hongria.',
          },
          {
            question: 'Què era la Doctrina Brejnev?',
            answer: 'El dret de la URSS a intervenir en països socialistes per mantenir el comunisme.',
          },
          {
            question: 'Què va provocar la guerra del Vietnam?',
            answer: 'La voluntat del nord comunista d’unificar el país i la intervenció dels EUA per evitar-ho.',
          },
          {
            question: 'Què era el moviment dels països no alineats?',
            answer: 'Estats que no volien triar entre EUA o URSS, com l’Índia o Iugoslàvia.',
          },
          {
            question: 'Què significà la paraula distensió?',
            answer: 'Un període de relaxament de tensions i acords de control d’armes als anys setanta.',
          },
          {
            question: 'Quina importància tingué la cursa armamentística?',
            answer: 'Els dos blocs acumularen armes nuclears com a forma de dissuasió.',
          },
          {
            question: 'Què era el programa espacial Apollo?',
            answer: 'El projecte nord-americà que portà l’ésser humà a la Lluna el 1969.',
          },
          {
            question: 'Què va passar amb la primavera de Praga el 1968?',
            answer: 'La URSS va enviar tropes per frenar les reformes democràtiques txeques.',
          },
          {
            question: 'Què significà la paraula glasnost?',
            answer: 'Una política de transparència i llibertat d’expressió impulsada per Gorbatxov.',
          },
          {
            question: 'Què era la perestroika?',
            answer: 'Les reformes econòmiques i polítiques de Gorbatxov per modernitzar la URSS.',
          },
          {
            question: 'Quin paper va tenir Solidarnosc a Polònia?',
            answer: 'Un sindicat independent que pressionà per reformes i democràcia.',
          },
          {
            question: 'Què va provocar la caiguda del mur de Berlín?',
            answer: 'La pressió ciutadana i les reformes a l’est que obriren les fronteres el 1989.',
          },
          {
            question: 'Què va passar amb la URSS el 1991?',
            answer: 'Es va dissoldre en repúbliques independents i acabà la Guerra Freda.',
          },
        ],
      },
      {
        id: 'spain-transition',
        title: '🇪🇸 Dictadura i Transició a Espanya',
        subject: 'history',
        summary: 'Repàs breu del franquisme i del camí cap a la democràcia actual.',
        cards: [
          {
            question: 'Qui va governar Espanya després de la Guerra Civil?',
            answer: 'El dictador Francisco Franco (1939–1975).',
          },
          {
            question: 'Quines característiques tenia el franquisme?',
            answer: 'Falta de llibertats, censura, persecució política i poder concentrat.',
          },
          {
            question: 'Què va passar després de la mort de Franco?',
            answer: 'Es va iniciar la Transició Democràtica.',
          },
          {
            question: 'Quin rei va protagonitzar la Transició?',
            answer: 'Joan Carles I.',
          },
          {
            question: 'Quin any es va aprovar la Constitució democràtica actual?',
            answer: 'El 1978.',
          },
          {
            question: 'Què era el règim franquista?',
            answer: 'Una dictadura autoritària nacional-catòlica basada en el control polític i la repressió.',
          },
          {
            question: 'Quina policia política vigilava els opositors?',
            answer: "La Brigada Político-Social, encarregada de la persecució i censura.",
          },
          {
            question: 'Quin paper tenia l’Església catòlica durant el franquisme?',
            answer: 'Col·laborava amb el règim i controlava l’educació i la moral pública.',
          },
          {
            question: 'Què eren els maquis?',
            answer: 'Guerrillers antifranquistes que resistiren als boscos i muntanyes.',
          },
          {
            question: 'Quina importància va tenir el Pla d’Estabilització de 1959?',
            answer: 'Va obrir l’economia espanyola i inicià el creixement industrial i turístic.',
          },
          {
            question: 'Què era el desenvolupisme?',
            answer: 'El període de creixement econòmic i modernització dels anys seixanta.',
          },
          {
            question: 'Quin paper tingueren els sindicats clandestins?',
            answer: 'Organitzaven vagues i protestes per reclamar drets laborals i democràcia.',
          },
          {
            question: 'Què va ser el procés de Burgos de 1970?',
            answer: 'Un judici militar contra militants bascos que despertà protestes internacionals.',
          },
          {
            question: 'Qui era l’hereu designat per Franco?',
            answer: 'El príncep Joan Carles de Borbó, proclamat rei el 1975.',
          },
          {
            question: 'Qui va ser Adolfo Suárez?',
            answer: 'El primer president del govern de la democràcia, impulsor de les reformes polítiques.',
          },
          {
            question: 'Què va suposar la Llei per a la Reforma Política de 1976?',
            answer: 'Va permetre la legalització de partits i la convocatòria d’eleccions democràtiques.',
          },
          {
            question: 'Quan es van celebrar les primeres eleccions democràtiques?',
            answer: 'El juny de 1977, amb victòria de la UCD.',
          },
          {
            question: 'Quina importància tingué la Constitució de 1978?',
            answer: 'Va establir un estat social i democràtic de dret amb monarquia parlamentària.',
          },
          {
            question: 'Què va ser el cop d’estat del 23-F?',
            answer: 'L’intent fallit de militars de frenar la democràcia ocupant el Congrés el 1981.',
          },
          {
            question: 'Quina actitud va tenir el rei durant el 23-F?',
            answer: 'Va defensar la Constitució i ordenà als militars que tornassin a les casernes.',
          },
          {
            question: 'Què va significar la legalització del Partit Comunista el 1977?',
            answer: 'Un pas clau cap a la reconciliació política i la pluralitat democràtica.',
          },
          {
            question: 'Què són els Pactes de la Moncloa?',
            answer: 'Acords econòmics i socials de 1977 per controlar la inflació i consolidar la democràcia.',
          },
          {
            question: 'Quines llibertats va reconèixer la Constitució?',
            answer: 'La llibertat d’expressió, associació, participació política i drets individuals.',
          },
          {
            question: 'Què és l’Estat de les autonomies?',
            answer: 'L’organització territorial que atorga autogovern a comunitats com Catalunya o el País Basc.',
          },
          {
            question: 'Quin partit va guanyar les eleccions de 1982?',
            answer: 'El PSOE de Felipe González, que consolidà el canvi polític.',
          },
          {
            question: 'Què va passar amb la censura durant la Transició?',
            answer: 'Es va eliminar progressivament, permetent llibertat de premsa i cultura.',
          },
          {
            question: 'Quin paper tingueren les mobilitzacions ciutadanes?',
            answer: 'Impulsaren reformes, reclamaren amnistia i participaren en manifestacions massives.',
          },
          {
            question: 'Què va ser la Llei d’Amnistia de 1977?',
            answer: 'Va alliberar presos polítics i perdonà delictes de motivació política.',
          },
          {
            question: 'Com va canviar l’economia espanyola als anys vuitanta?',
            answer: 'Es modernitzà i es preparà per l’entrada a la Comunitat Econòmica Europea.',
          },
          {
            question: 'Quan va entrar Espanya a la Comunitat Econòmica Europea?',
            answer: 'El 1986, integrant-se plenament a Europa occidental.',
          },
        ],
      },
      {
        id: 'eu-global',
        title: '🇪🇺 Unió Europea i globalització',
        subject: 'history',
        summary: 'Descobreix com cooperen els països europeus i què implica viure en un món globalitzat.',
        cards: [
          {
            question: 'Què és la Unió Europea?',
            answer: 'Una organització de països europeus que cooperen econòmicament i políticament.',
          },
          {
            question: 'Quin és l’objectiu principal de la UE?',
            answer: 'Garantir la pau, el progrés i la cooperació entre els estats membres.',
          },
          {
            question: 'Quin any va aparèixer l’euro com a moneda comuna?',
            answer: 'El 2002.',
          },
          {
            question: 'Què és la globalització?',
            answer: 'El procés d’interconnexió econòmica, cultural i tecnològica entre països.',
          },
          {
            question: 'Quins avantatges i inconvenients té la globalització?',
            answer: 'Avantatges: més comunicació i comerç. Inconvenients: desigualtats i pèrdua de cultures locals.',
          },
          {
            question: 'Quins països van formar la Comunitat Europea del Carbó i l’Acer?',
            answer: 'França, Alemanya Occidental, Itàlia, Bèlgica, Països Baixos i Luxemburg.',
          },
          {
            question: 'Quin tractat va crear la Comunitat Econòmica Europea?',
            answer: 'El Tractat de Roma signat el 1957.',
          },
          {
            question: 'Què estableix l’Espai Schengen?',
            answer: 'La lliure circulació de persones sense controls fronterers entre països signants.',
          },
          {
            question: 'Què és el Parlament Europeu?',
            answer: 'L’òrgan legislatiu elegit pels ciutadans dels estats membres.',
          },
          {
            question: 'On té la seu la Comissió Europea?',
            answer: 'A Brussel·les, Bèlgica.',
          },
          {
            question: 'Quines polítiques finança la UE amb el pressupost?',
            answer: 'Agricultura, cohesió regional, investigació, medi ambient i educació.',
          },
          {
            question: 'Què és el Consell Europeu?',
            answer: 'La reunió de caps d’estat o de govern que fixa les grans línies polítiques.',
          },
          {
            question: 'Què és l’ampliació de la UE?',
            answer: 'El procés d’admetre nous països quan compleixen els criteris democràtics i econòmics.',
          },
          {
            question: 'Què estableixen els criteris de Copenhaguen?',
            answer: 'Condicions democràtiques, econòmiques i d’acatament del dret europeu per entrar a la UE.',
          },
          {
            question: 'Què és el Brexit?',
            answer: 'La sortida del Regne Unit de la Unió Europea el 2020.',
          },
          {
            question: 'Quin programa fomenta la mobilitat estudiantil?',
            answer: 'Erasmus+, que permet estudiar en altres països europeus.',
          },
          {
            question: 'Què és el Banc Central Europeu?',
            answer: 'La institució que gestiona l’euro i controla la política monetària de la zona euro.',
          },
          {
            question: 'Què són els fons de cohesió?',
            answer: 'Ajuts per reduir diferències econòmiques entre regions menys desenvolupades.',
          },
          {
            question: 'Què defensa la política agrícola comuna?',
            answer: 'Garantir ingressos als agricultors i un subministrament estable d’aliments.',
          },
          {
            question: 'Què promou el Pacte Verd Europeu?',
            answer: 'La transició cap a una economia sostenible i neutra en carboni.',
          },
          {
            question: 'Què és el Fons Next Generation EU?',
            answer: 'Un pla de recuperació econòmica per ajudar els estats després de la COVID-19.',
          },
          {
            question: 'Què és el Tribunal de Justícia de la UE?',
            answer: 'L’òrgan que garanteix que les lleis europees s’apliquin igual a tots els estats.',
          },
          {
            question: 'Què implica la ciutadania europea?',
            answer: 'Drets com votar a les eleccions europees i rebre protecció consular en altres països.',
          },
          {
            question: 'Com afecta la globalització als treballadors?',
            answer: 'Pot crear noves oportunitats laborals però també deslocalitzacions i precarietat.',
          },
          {
            question: 'Què és el comerç just?',
            answer: 'Una manera de comprar productes que garanteix un salari digne als productors.',
          },
          {
            question: 'Quin impacte té la globalització en el medi ambient?',
            answer: 'Incrementa el transport i el consum, però també comparteix tecnologies verdes.',
          },
          {
            question: 'Què vol dir deslocalització?',
            answer: 'Quan una empresa trasllada la producció a un altre país per reduir costos.',
          },
          {
            question: 'Què és la diversitat cultural?',
            answer: 'La convivència de diferents llengües, tradicions i identitats en un mateix entorn.',
          },
          {
            question: 'Com poden protegir-se les cultures locals?',
            answer: 'Impulsant l’educació, els mitjans propis i el consum de productes locals.',
          },
          {
            question: 'Què és la responsabilitat social corporativa?',
            answer: 'Quan les empreses adopten mesures ètiques per respectar persones i planeta.',
          },
        ],
      },
      {
        id: 'science-cell',
        title: '🧬 La cèl·lula: unitat de vida',
        subject: 'science',
        summary: 'Comprèn com són i què fan les parts principals d’una cèl·lula.',
        cards: [
          {
            question: 'Què és una cèl·lula?',
            answer: 'És la unitat bàsica de tots els éssers vius.',
          },
          {
            question: 'Quines són les tres parts principals d’una cèl·lula?',
            answer: 'Membrana, citoplasma i nucli.',
          },
          {
            question: 'Quina funció té la membrana cel·lular?',
            answer: 'Controla el pas de substàncies dins i fora de la cèl·lula.',
          },
          {
            question: 'Quina funció té el nucli?',
            answer: 'Conté el material genètic (ADN) i dirigeix les funcions de la cèl·lula.',
          },
          {
            question: 'Quina diferència hi ha entre cèl·lules animals i vegetals?',
            answer: 'Les vegetals tenen paret cel·lular i cloroplasts; les animals no.',
          },
          {
            question: 'Què és el citoplasma?',
            answer: 'Un líquid on hi ha els orgànuls cel·lulars.',
          },
          {
            question: 'Què són els mitocondris?',
            answer: 'Orgànuls que produeixen energia per a la cèl·lula.',
          },
          {
            question: 'Què és la fotosíntesi i on es fa?',
            answer: 'És el procés pel qual les plantes fan el seu aliment; es fa als cloroplasts.',
          },
          {
            question: 'Què són les cèl·lules procariotes?',
            answer: 'Cèl·lules sense nucli, com les bacteris.',
          },
          {
            question: 'Què són les cèl·lules eucariotes?',
            answer: 'Cèl·lules amb nucli ben definit, com les dels animals i plantes.',
          },
          {
            question: 'Què és un orgànul cel·lular?',
            answer: 'Una estructura interna especialitzada que realitza una funció concreta dins la cèl·lula.',
          },
          {
            question: 'Què és un teixit?',
            answer: 'Un conjunt de cèl·lules semblants que treballen juntes per fer una funció.',
          },
          {
            question: 'Què és un organisme unicel·lular?',
            answer: 'Un ésser viu format per una sola cèl·lula que fa totes les funcions vitals.',
          },
          {
            question: 'Què és un organisme pluricel·lular?',
            answer: 'Un ésser viu format per moltes cèl·lules especialitzades que cooperen.',
          },
          {
            question: 'Quina funció té el reticle endoplasmàtic rugós?',
            answer: 'Fabricar i transportar proteïnes amb l’ajuda dels ribosomes adherits.',
          },
          {
            question: 'Quina funció té el reticle endoplasmàtic llis?',
            answer: 'Produeix lípids i ajuda a desintoxicar substàncies de la cèl·lula.',
          },
          {
            question: "Quina funció té l’aparell de Golgi?",
            answer: 'Modifica, empaqueta i reparteix proteïnes i altres substàncies.',
          },
          {
            question: 'Què són els ribosomes?',
            answer: 'Orgànuls que llegeixen l’ARN i fabriquen proteïnes.',
          },
          {
            question: 'Què són els lisosomes?',
            answer: 'Orgànuls que digereixen residus i partícules no desitjades.',
          },
          {
            question: 'Què és la membrana nuclear?',
            answer: 'La capa que envolta el nucli i regula què entra i surt d’ell.',
          },
          {
            question: 'Què és el citosquelet?',
            answer: 'Una xarxa de fibres que dóna forma a la cèl·lula i facilita el moviment intern.',
          },
          {
            question: 'Què és un vacúol?',
            answer: 'Un compartiment que emmagatzema aigua, nutrients o residus.',
          },
          {
            question: 'Per què les cèl·lules vegetals tenen paret cel·lular?',
            answer: 'Per protegir-se i mantenir una forma rígida i estable.',
          },
          {
            question: 'Quina diferència hi ha entre ADN i ARN?',
            answer: 'L’ADN guarda la informació genètica i l’ARN ajuda a fabricar proteïnes.',
          },
          {
            question: 'Què és la mitosi?',
            answer: 'Un tipus de divisió cel·lular que produeix dues cèl·lules idèntiques.',
          },
          {
            question: 'Què és la meiosi?',
            answer: 'La divisió que forma gàmetes amb la meitat de cromosomes.',
          },
          {
            question: 'Què són les cèl·lules mare?',
            answer: 'Cèl·lules que es poden transformar en altres tipus de cèl·lules del cos.',
          },
          {
            question: 'Què és la respiració cel·lular?',
            answer: 'El procés amb què els mitocondris transformen nutrients i oxigen en energia.',
          },
          {
            question: 'Què necessita la respiració cel·lular per funcionar?',
            answer: 'Oxigen i nutrients com la glucosa per produir energia.',
          },
          {
            question: 'Què passa durant la interfase abans de dividir-se una cèl·lula?',
            answer: 'La cèl·lula creix, copia el seu ADN i es prepara per dividir-se.',
          },
        ],
      },
      {
        id: 'science-classification',
        title: '🌱 Els éssers vius i la seva classificació',
        subject: 'science',
        summary: 'Aprèn com s’organitzen els éssers vius i les relacions d’alimentació.',
        cards: [
          {
            question: 'Quants regnes d’éssers vius hi ha?',
            answer: 'Cinc: animals, plantes, fongs, protists i moneres.',
          },
          {
            question: 'Què diferencia els animals de les plantes?',
            answer: 'Els animals s’alimenten d’altres éssers vius; les plantes fan fotosíntesi.',
          },
          {
            question: 'Què és un vertebrat?',
            answer: 'Un animal amb columna vertebral.',
          },
          {
            question: 'Què és un invertebrat?',
            answer: 'Un animal sense columna vertebral.',
          },
          {
            question: 'Què és la fotosíntesi?',
            answer: 'Procés pel qual les plantes converteixen llum, aigua i CO₂ en aliment i oxigen.',
          },
          {
            question: 'Què és una cadena tròfica?',
            answer: "L’ordre en què l’energia passa d’un ésser viu a un altre.",
          },
          {
            question: 'Què és un ecosistema?',
            answer: 'L’espai on conviuen éssers vius i elements no vius.',
          },
          {
            question: 'Què és un productor en una cadena alimentària?',
            answer: 'Un ésser viu que fa el seu propi aliment, com les plantes.',
          },
          {
            question: 'Què és un consumidor?',
            answer: 'Un ésser viu que s’alimenta d’altres.',
          },
          {
            question: 'Què és un descomponedor?',
            answer: 'Un organisme que transforma restes en nutrients per al sòl, com els fongs.',
          },
          {
            question: 'Què és una espècie?',
            answer: 'Un grup d’éssers vius que es poden reproduir entre ells i tenir descendència fèrtil.',
          },
          {
            question: 'Què és una població?',
            answer: 'El conjunt d’individus de la mateixa espècie que viuen en un lloc concret.',
          },
          {
            question: 'Què és una comunitat?',
            answer: 'El conjunt de poblacions diferents que conviuen en un mateix espai.',
          },
          {
            question: "Què és l’hàbitat?",
            answer: 'El lloc on viu un ésser viu i on troba les condicions necessàries.',
          },
          {
            question: 'Què és la biodiversitat?',
            answer: 'La varietat d’espècies i ecosistemes que hi ha en un lloc.',
          },
          {
            question: 'Què és una adaptació?',
            answer: 'Una característica que ajuda un ésser viu a sobreviure al seu medi.',
          },
          {
            question: 'Quins són els principals grups de vertebrats?',
            answer: 'Peixos, amfibis, rèptils, aus i mamífers.',
          },
          {
            question: 'Quins són alguns grans grups d’invertebrats?',
            answer: 'Insectes, aràcnids, mol·luscs, crustacis i cucs.',
          },
          {
            question: 'Què és la metamorfosi?',
            answer: 'El procés de transformació d’un animal durant el seu desenvolupament, com la papallona.',
          },
          {
            question: 'Què és un herbívor?',
            answer: 'Un animal que s’alimenta principalment de plantes.',
          },
          {
            question: 'Què és un carnívor?',
            answer: 'Un animal que menja altres animals.',
          },
          {
            question: 'Què és un omnívor?',
            answer: 'Un animal que pot menjar tant plantes com animals.',
          },
          {
            question: 'Què és un depredador?',
            answer: 'Un animal que caça un altre per alimentar-se.',
          },
          {
            question: 'Què és una presa?',
            answer: 'L’animal caçat pel depredador.',
          },
          {
            question: 'Què és una espècie invasora?',
            answer: 'Una espècie que arriba a un lloc nou i causa problemes a les espècies natives.',
          },
          {
            question: 'Què són els nivells tròfics?',
            answer: 'Cada graó de la cadena alimentària segons el tipus d’alimentació.',
          },
          {
            question: 'Què és una xarxa tròfica?',
            answer: 'Un conjunt de cadenes alimentàries connectades en un ecosistema.',
          },
          {
            question: 'Què és la descomposició?',
            answer: 'El procés pel qual els descomponedors transformen restes en nutrients.',
          },
          {
            question: 'Quina funció fan els pol·linitzadors?',
            answer: 'Transporten pol·len entre flors i ajuden a formar fruits i llavors.',
          },
          {
            question: 'Per què és important conservar els ecosistemes?',
            answer: 'Per mantenir la biodiversitat, els recursos i l’equilibri del planeta.',
          },
        ],
      },
      {
        id: 'earth-changes',
        title: '🌍 La Terra i els seus canvis',
        subject: 'science',
        summary: 'Descobreix l’estructura de la Terra i com canvia amb el temps.',
        cards: [
          {
            question: 'Quines són les tres capes internes de la Terra?',
            answer: 'Escorça, mantell i nucli.',
          },
          {
            question: 'Quins són els dos moviments principals de la Terra?',
            answer: 'Rotació i translació.',
          },
          {
            question: 'Què causa el dia i la nit?',
            answer: 'El moviment de rotació de la Terra sobre el seu eix.',
          },
          {
            question: 'Què causa les estacions de l’any?',
            answer: 'El moviment de translació i la inclinació de l’eix terrestre.',
          },
          {
            question: 'Què són les plaques tectòniques?',
            answer: 'Grans fragments de l’escorça terrestre que es mouen lentament.',
          },
          {
            question: 'Què és un terratrèmol?',
            answer: 'Un moviment brusc de la Terra causat pel desplaçament de plaques.',
          },
          {
            question: 'Què és un volcà?',
            answer: 'Una obertura per on surt magma, gasos i cendra de l’interior de la Terra.',
          },
          {
            question: 'Què és l’erosió?',
            answer: 'El desgast de les roques per l’aigua, el vent o el gel.',
          },
          {
            question: 'Què és el cicle de les roques?',
            answer: 'El procés pel qual les roques es transformen entre si amb el temps.',
          },
          {
            question: 'Què és un fòssil?',
            answer: 'El rest o empremta d’un ésser viu antic conservat a les roques.',
          },
          {
            question: 'Què és la deriva continental?',
            answer: 'El moviment lent dels continents sobre les plaques tectòniques.',
          },
          {
            question: 'Què és una falla geològica?',
            answer: 'Una escletxa de l’escorça on dues plaques s’han mogut.',
          },
          {
            question: 'Què és el magma?',
            answer: 'Roca fosa que es troba a l’interior de la Terra.',
          },
          {
            question: 'Què és la lava?',
            answer: 'El magma que surt a l’exterior durant una erupció.',
          },
          {
            question: 'Què és un tsunami?',
            answer: 'Una ona gegant provocada sovint per un terratrèmol submarí.',
          },
          {
            question: 'Què és un huracà?',
            answer: 'Una tempesta molt forta amb vents giratoris sobre els oceans càlids.',
          },
          {
            question: 'Què són els sediments?',
            answer: 'Fragments de roca, sorra o restes que el vent i l’aigua transporten.',
          },
          {
            question: 'Què és la sedimentació?',
            answer: 'Quan els sediments es dipositen i formen noves capes.',
          },
          {
            question: "Què és el cicle de l’aigua?",
            answer: 'El recorregut de l’aigua evaporant-se, condensant-se i precipitant.',
          },
          {
            question: 'Què és una glacera?',
            answer: 'Una gran massa de gel que es mou lentament per la gravetat.',
          },
          {
            question: 'Què és el temps atmosfèric?',
            answer: 'Les condicions de l’atmosfera en un lloc i moment concrets.',
          },
          {
            question: 'Què és el clima?',
            answer: 'El conjunt de temps atmosfèrics habituals d’un lloc durant molts anys.',
          },
          {
            question: "Què és l’erosió fluvial?",
            answer: 'El desgast causat per l’aigua dels rius sobre el terreny.',
          },
          {
            question: 'Què són els fòssils guia?',
            answer: 'Restes d’espècies que ajuden a datar les capes de roques.',
          },
          {
            question: 'Què és la paleontologia?',
            answer: 'La ciència que estudia els fòssils i la vida del passat.',
          },
          {
            question: 'Què és una era geològica?',
            answer: 'Un període molt llarg de temps en la història de la Terra.',
          },
          {
            question: 'Què és un meteorit?',
            answer: 'Un fragment de roca espacial que arriba a la superfície terrestre.',
          },
          {
            question: 'Què és la capa d’ozó?',
            answer: 'Una zona de l’atmosfera que ens protegeix dels rajos ultraviolats.',
          },
          {
            question: "Què és l’efecte hivernacle?",
            answer: 'El procés pel qual alguns gasos atrapen la calor i escalfen el planeta.',
          },
          {
            question: 'Com poden protegir-se les persones davant un terratrèmol?',
            answer: 'Seguint plans d’emergència, buscant llocs segurs i preparant kits de supervivència.',
          },
        ],
      },
      {
        id: 'human-body',
        title: '💪 El cos humà i els seus sistemes',
        subject: 'science',
        summary: 'Repassa els principals aparells del cos i com ens mantenen en vida.',
        cards: [
          {
            question: 'Quins són els tres tipus principals d’aparells del cos humà?',
            answer: 'Nutrició, relació i reproducció.',
          },
          {
            question: 'Quina funció té l’aparell digestiu?',
            answer: 'Transformar els aliments en nutrients.',
          },
          {
            question: 'Quina funció té l’aparell respiratori?',
            answer: 'Intercanviar oxigen i diòxid de carboni amb l’aire.',
          },
          {
            question: 'Quina funció té l’aparell circulatori?',
            answer: 'Transportar sang, oxigen i nutrients per tot el cos.',
          },
          {
            question: 'Quina funció té l’aparell excretor?',
            answer: 'Eliminar substàncies de rebuig del cos.',
          },
          {
            question: 'Quina funció té el sistema nerviós?',
            answer: 'Coordinar totes les funcions del cos i rebre estímuls.',
          },
          {
            question: 'Quins òrgans formen el sistema nerviós central?',
            answer: 'El cervell i la medul·la espinal.',
          },
          {
            question: 'Quina funció té el sistema locomotor?',
            answer: 'Permetre el moviment del cos gràcies als músculs i ossos.',
          },
          {
            question: 'Què és el sistema reproductor?',
            answer: 'El conjunt d’òrgans que permeten la reproducció.',
          },
          {
            question: 'Quins hàbits mantenen un cos sa?',
            answer: 'Bona alimentació, exercici físic i descans suficient.',
          },
          {
            question: 'Què és un nutrient?',
            answer: 'Una substància dels aliments que el cos necessita per obtenir energia i construir-se.',
          },
          {
            question: 'Què és la digestió?',
            answer: 'El procés de transformar els aliments en nutrients aprofitables.',
          },
          {
            question: 'Què són les articulacions?',
            answer: 'Els punts on s’uneixen els ossos i permeten el moviment.',
          },
          {
            question: 'Què és un múscul?',
            answer: 'Un teixit que es contrau per moure els ossos o els òrgans.',
          },
          {
            question: 'Què és el sistema endocrí?',
            answer: 'El conjunt de glàndules que fabriquen hormones.',
          },
          {
            question: 'Quina funció té el cor?',
            answer: 'Bombar la sang perquè arribi a totes les parts del cos.',
          },
          {
            question: 'Què fan els pulmons?',
            answer: 'Intercanvien oxigen i diòxid de carboni amb la sang.',
          },
          {
            question: 'Què són els glòbuls vermells?',
            answer: 'Cèl·lules de la sang que transporten oxigen.',
          },
          {
            question: 'Què són els glòbuls blancs?',
            answer: 'Cèl·lules de defensa que ens protegeixen d’infeccions.',
          },
          {
            question: 'Què és el plasma sanguini?',
            answer: 'La part líquida de la sang que transporta nutrients i residus.',
          },
          {
            question: 'Què és el sistema limfàtic?',
            answer: 'Una xarxa de vasos i ganglis que ajuda a defensar el cos i retornar líquids.',
          },
          {
            question: 'Què és un reflex?',
            answer: 'Una resposta ràpida i involuntària del sistema nerviós.',
          },
          {
            question: 'Què és el cervell?',
            answer: 'L’òrgan que controla el pensament, els sentiments i els moviments.',
          },
          {
            question: 'Què són els cinc sentits?',
            answer: 'Vista, oïda, olfacte, gust i tacte, que ens informen del que passa al voltant.',
          },
          {
            question: 'Què és el sistema immunitari?',
            answer: 'El conjunt de defenses que protegeixen el cos dels agents nocius.',
          },
          {
            question: 'Què és la pubertat?',
            answer: 'L’etapa en què el cos canvia i es prepara per a la vida adulta.',
          },
          {
            question: 'Què és la fecundació?',
            answer: 'La unió d’un espermatozoide i un òvul que dóna lloc a un nou ésser.',
          },
          {
            question: 'Què és l’ADN en les cèl·lules del cos?',
            answer: 'El manual d’instruccions que indica com ha de funcionar cada cèl·lula.',
          },
          {
            question: 'Què són els ossos?',
            answer: 'Estructures dures que formen l’esquelet i protegeixen els òrgans.',
          },
          {
            question: 'Quines mesures ajuden a tenir un sistema respiratori sa?',
            answer: 'Evitar el tabac, fer exercici i respirar aire net.',
          },
        ],
      },
      {
        id: 'matter-energy',
        title: '⚡ Matèria, energia i canvis',
        subject: 'science',
        summary: 'Entén els estats de la matèria, l’energia i les forces del nostre entorn.',
        cards: [
          {
            question: 'Quins són els tres estats de la matèria?',
            answer: 'Sòlid, líquid i gasós.',
          },
          {
            question: 'Què és un canvi físic?',
            answer: 'Un canvi que no altera la composició de la substància.',
          },
          {
            question: 'Què és un canvi químic?',
            answer: 'Un canvi que forma noves substàncies.',
          },
          {
            question: 'Què és la massa?',
            answer: 'La quantitat de matèria que té un cos.',
          },
          {
            question: 'Què és la densitat?',
            answer: 'La relació entre la massa i el volum d’un cos.',
          },
          {
            question: 'Què és l’energia?',
            answer: 'La capacitat de produir canvis o moviment.',
          },
          {
            question: 'Quins tipus d’energia hi ha?',
            answer: 'Cinètica, potencial, tèrmica, elèctrica, química, solar...',
          },
          {
            question: 'Què és una força?',
            answer: 'Una acció capaç de canviar el moviment o la forma d’un cos.',
          },
          {
            question: 'Què és la gravetat?',
            answer: 'La força que atrau els cossos cap al centre de la Terra.',
          },
          {
            question: 'Quines són les fonts d’energia renovables?',
            answer: 'Solar, eòlica, hidràulica, geotèrmica i biomassa.',
          },
          {
            question: 'Què és el volum?',
            answer: 'L’espai que ocupa un cos.',
          },
          {
            question: 'Què és la temperatura?',
            answer: 'La mesura de com d’escalfada o freda està una substància.',
          },
          {
            question: 'Què és una mescla homogènia?',
            answer: 'Una mescla on no es poden distingir els components a simple vista.',
          },
          {
            question: 'Què és una mescla heterogènia?',
            answer: 'Una mescla on sí que es poden veure els diferents components.',
          },
          {
            question: 'Què és una solució?',
            answer: 'Una mescla homogènia formada per un solvent i un solut.',
          },
          {
            question: 'Què és el solvent?',
            answer: 'La substància que dissol el solut en una solució.',
          },
          {
            question: 'Què és el solut?',
            answer: 'La substància que es dissol dins del solvent.',
          },
          {
            question: 'Què és la fusió?',
            answer: 'El canvi d’estat de sòlid a líquid.',
          },
          {
            question: 'Què és la vaporització?',
            answer: 'El canvi de líquid a gas.',
          },
          {
            question: 'Què és la condensació?',
            answer: 'El canvi de gas a líquid.',
          },
          {
            question: 'Què és la solidificació?',
            answer: 'Quan un líquid passa a sòlid en refredar-se.',
          },
          {
            question: 'Què és la sublimació?',
            answer: 'El canvi directe de sòlid a gas o a l’inrevés.',
          },
          {
            question: 'Què és la conductivitat tèrmica?',
            answer: 'La capacitat d’un material per transmetre la calor.',
          },
          {
            question: 'Què és un circuit elèctric?',
            answer: 'Un camí tancat per on circulen els electrons.',
          },
          {
            question: 'Què és la potència elèctrica?',
            answer: 'La quantitat d’energia elèctrica que s’utilitza o es produeix per unitat de temps.',
          },
          {
            question: "Què és l’energia potencial?",
            answer: 'L’energia que té un cos per la seva posició o estat.',
          },
          {
            question: "Què és l’energia cinètica?",
            answer: 'L’energia que té un cos quan està en moviment.',
          },
          {
            question: 'Què és una màquina simple?',
            answer: 'Un dispositiu senzill com la palanca o la roda que facilita el treball.',
          },
          {
            question: 'Què diu la llei de la conservació de l’energia?',
            answer: 'Que l’energia no es crea ni es destrueix, només es transforma.',
          },
          {
            question: 'Què podem fer per estalviar energia a casa?',
            answer: 'Apagar llums innecessàries, utilitzar bombetes eficients i aprofitar la llum natural.',
          },
        ],
      },
    ];

    const subjectsConfig = [
      {
        id: 'history',
        title: '📜 Història',
        name: 'Història',
        summary: 'Conflictes i transformacions del segle XX i l’inici del XXI.',
        topicsTitle: "Escull el bloc d'història que vols practicar",
        topicsSubtitle:
          'Repassa guerres mundials, la Guerra Freda, la Transició i la integració europea amb targetes interactives.',
      },
      {
        id: 'science',
        title: '🔬 Ciències naturals',
        name: 'Ciències naturals',
        summary: 'Biologia, geologia i física bàsiques per entendre el món que t’envolta.',
        topicsTitle: 'Escull el tema de ciències naturals',
        topicsSubtitle:
          'Aprèn conceptes clau sobre les cèl·lules, els éssers vius, la Terra, el cos humà i la matèria.',
      },
    ];

    const subjects = subjectsConfig
      .map((subject) => ({
        ...subject,
        topics: topics.filter((topic) => topic.subject === subject.id),
      }))
      .filter((subject) => subject.topics.length > 0);

    const activeUserBanner = document.getElementById('active-user-banner');
    const subjectsGrid = document.getElementById('subjects-grid');
    const subjectsSection = document.getElementById('subjects-menu');
    const topicsSection = document.getElementById('topics-menu');
    const topicsGrid = document.getElementById('topics-grid');
    const topicsTitle = document.getElementById('topics-title');
    const topicsSubtitle = document.getElementById('topics-subtitle');
    const gameSection = document.getElementById('flashcard-game');
    const gameTitle = document.getElementById('game-title');
    const gameSummary = document.getElementById('game-summary');
    const gameInstructions = document.getElementById('game-instructions');
    const mainCardSlot = document.getElementById('game-main-card');
    const libraryList = document.getElementById('game-library');
    const cardProgress = document.getElementById('card-progress');
    const backButton = document.getElementById('back-button');
    const prevButton = document.getElementById('prev-card');
    const nextButton = document.getElementById('next-card');
    const knowledgeButtons = document.querySelectorAll('.knowledge-button');
    const resetButton = document.getElementById('reset-progress');

    const statusLabels = {
      known: '✅ Me la sabia',
      partial: '🟠 Mig mig',
      unknown: '❌ No me la sabia',
    };

    const instructionsBase =
      'Gira la targeta principal per veure la resposta, fes servir les fletxes o la biblioteca per canviar de targeta i marca amb els botons si te la sabies.';

    const subjectButtons = new Map();

    const STORAGE_KEY = 'focusquiz.flashcards.progress';
    const VALID_STATUSES = new Set(['known', 'partial', 'unknown']);
    const DEFAULT_USER_NAME = 'Anònim';

    let storageState = loadStorageState();
    let currentUserName = readActiveStudentName();
    const topicProgress = new Map();

    let currentSubject = null;
    let currentTopic = null;
    let currentCardIndex = 0;
    let cardStatuses = [];

    function loadStorageState() {
      const empty = { users: {}, userOrder: [] };
      if (typeof window === 'undefined' || !('localStorage' in window)) {
        return empty;
      }

      try {
        const raw = window.localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          return empty;
        }

        const parsed = JSON.parse(raw);
        if (!parsed || typeof parsed !== 'object') {
          return empty;
        }

        const normalized = { users: {}, userOrder: [] };
        const seenOrder = new Set();

        const addUserTopics = (name, topics = {}) => {
          if (!name) return;
          if (!normalized.users[name]) {
            normalized.users[name] = { topics: {} };
          }
          if (topics && typeof topics === 'object') {
            Object.entries(topics).forEach(([topicId, statuses]) => {
              if (Array.isArray(statuses)) {
                normalized.users[name].topics[topicId] = statuses.slice();
              }
            });
          }
        };

        const pushOrder = (name) => {
          if (!name || seenOrder.has(name)) return;
          normalized.userOrder.push(name);
          seenOrder.add(name);
        };

        const users = parsed.users && typeof parsed.users === 'object' ? parsed.users : {};

        Object.entries(users).forEach(([key, data]) => {
          const storedName = typeof data?.name === 'string' ? data.name.trim() : '';
          const fallbackName = typeof key === 'string' && key && !key.startsWith('user-') ? key : '';
          const name = storedName || fallbackName || DEFAULT_USER_NAME;
          addUserTopics(name, data && data.topics);
        });

        if (Array.isArray(parsed.userOrder)) {
          parsed.userOrder.forEach((key) => {
            const data = users[key];
            const storedName = typeof data?.name === 'string' ? data.name.trim() : '';
            const fallbackName = typeof key === 'string' && key && !key.startsWith('user-') ? key : '';
            const name = storedName || fallbackName;
            if (name && normalized.users[name]) {
              pushOrder(name);
            }
          });
        }

        Object.keys(normalized.users).forEach((name) => pushOrder(name));

        return normalized;
      } catch (error) {
        return empty;
      }
    }

    function saveStorageState() {
      if (typeof window === 'undefined' || !('localStorage' in window)) {
        return;
      }

      try {
        window.localStorage.setItem(
          STORAGE_KEY,
          JSON.stringify({
            version: 2,
            users: storageState.users || {},
            userOrder: storageState.userOrder || [],
          })
        );
      } catch (error) {
        // Ignore storage errors (per exemple, navegació privada)
      }
    }

    function readActiveStudentName() {
      if (typeof window === 'undefined' || !('localStorage' in window)) {
        return DEFAULT_USER_NAME;
      }

      try {
        const stored = window.localStorage.getItem('lastStudent');
        if (!stored) return DEFAULT_USER_NAME;
        const trimmed = stored.trim();
        return trimmed || DEFAULT_USER_NAME;
      } catch (error) {
        return DEFAULT_USER_NAME;
      }
    }

    function updateActiveUserBanner(name = currentUserName) {
      if (!activeUserBanner) return;
      const label = name || DEFAULT_USER_NAME;
      activeUserBanner.textContent = `Sessió actual: ${label}`;
    }

    function getCurrentUserData() {
      if (!storageState.users || typeof storageState.users !== 'object') {
        storageState.users = {};
      }
      return currentUserName && storageState.users[currentUserName]
        ? storageState.users[currentUserName]
        : null;
    }

    function ensureCurrentUser() {
      const name = currentUserName || DEFAULT_USER_NAME;

      if (!storageState.users || typeof storageState.users !== 'object') {
        storageState.users = {};
      }

      let user = storageState.users[name];
      if (!user || typeof user !== 'object') {
        user = { topics: {} };
        storageState.users[name] = user;
      }

      if (!user.topics || typeof user.topics !== 'object') {
        user.topics = {};
      }

      if (!Array.isArray(storageState.userOrder)) {
        storageState.userOrder = [];
      }

      if (!storageState.userOrder.includes(name)) {
        storageState.userOrder.push(name);
      }

      return user;
    }

    function syncActiveUser({ refreshView = true } = {}) {
      currentUserName = readActiveStudentName();
      ensureCurrentUser();
      updateActiveUserBanner(currentUserName);
      syncTopicProgressFromUser();
      if (refreshView) {
        refreshCurrentTopicView();
      } else {
        updateGameControls();
      }
      saveStorageState();
    }

    function sanitizeStatus(value) {
      return VALID_STATUSES.has(value) ? value : null;
    }

    function syncTopicProgressFromUser() {
      topicProgress.clear();

      const user = getCurrentUserData();
      if (!user || !user.topics) {
        return;
      }

      Object.entries(user.topics).forEach(([topicId, statuses]) => {
        if (Array.isArray(statuses)) {
          const sanitized = statuses.map((status) => sanitizeStatus(status));
          topicProgress.set(topicId, sanitized);
        }
      });
    }

    function normalizeStatuses(existing, length) {
      const normalized = Array(length).fill(null);
      if (Array.isArray(existing)) {
        const limit = Math.min(existing.length, length);
        for (let index = 0; index < limit; index += 1) {
          const sanitized = sanitizeStatus(existing[index]);
          if (sanitized) {
            normalized[index] = sanitized;
          }
        }
      }
      return normalized;
    }

    function persistTopicProgress(topicId, statuses = topicProgress.get(topicId)) {
      if (!currentUserName) {
        return;
      }

      const user = ensureCurrentUser();
      if (!user) {
        return;
      }

      if (!statuses) {
        delete user.topics[topicId];
      } else {
        const sanitized = statuses.map((status) => sanitizeStatus(status));
        const hasProgress = sanitized.some((status) => status !== null);
        if (hasProgress) {
          user.topics[topicId] = sanitized;
        } else {
          delete user.topics[topicId];
        }
      }

      saveStorageState();
    }

    function getOrCreateStatuses(topic) {
      const existing = topicProgress.get(topic.id);
      const normalized = normalizeStatuses(existing, topic.cards.length);

      let changed = !existing || existing.length !== normalized.length;
      if (existing) {
        const limit = Math.max(existing.length, normalized.length);
        for (let index = 0; index < limit; index += 1) {
          const sanitized = sanitizeStatus(existing[index]);
          if (sanitized !== normalized[index]) {
            changed = true;
            break;
          }
        }
      }

      topicProgress.set(topic.id, normalized);

      if (changed) {
        persistTopicProgress(topic.id, normalized);
      }

      return normalized;
    }

    function refreshCurrentTopicView() {
      if (!currentTopic) {
        updateGameControls();
        return;
      }

      cardStatuses = getOrCreateStatuses(currentTopic);
      currentCardIndex = Math.min(currentCardIndex, currentTopic.cards.length - 1);
      renderMainCard(false);
      renderLibrary();
    }

    function initializeUsers() {
      if (!storageState || typeof storageState !== 'object') {
        storageState = { users: {}, userOrder: [] };
      }

      if (!storageState.users || typeof storageState.users !== 'object') {
        storageState.users = {};
      }

      if (!Array.isArray(storageState.userOrder)) {
        storageState.userOrder = Object.keys(storageState.users);
      }

      const uniqueOrder = [];
      storageState.userOrder.forEach((name) => {
        if (storageState.users[name] && !uniqueOrder.includes(name)) {
          uniqueOrder.push(name);
        }
      });
      storageState.userOrder = uniqueOrder;

      syncActiveUser({ refreshView: false });
    }

    function renderSubjects() {
      subjectsGrid.innerHTML = '';
      subjectButtons.clear();

      subjects.forEach((subject) => {
        const listItem = document.createElement('li');

        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'topic-card subject-card';
        button.dataset.subjectId = subject.id;
        button.setAttribute('aria-pressed', 'false');

        const title = document.createElement('h3');
        title.textContent = subject.title;

        const summary = document.createElement('p');
        summary.className = 'topic-summary';
        summary.textContent = subject.summary;

        const totalCards = subject.topics.reduce((acc, topic) => acc + topic.cards.length, 0);
        const meta = document.createElement('span');
        meta.className = 'subject-meta';
        meta.textContent = `${subject.topics.length} blocs · ${totalCards} targetes`;

        button.append(title, summary, meta);
        button.addEventListener('click', () => {
          if (!gameSection.hasAttribute('hidden')) {
            showMenu({ focusFirstTopic: false, scroll: false });
          }
          selectSubject(subject.id, { scroll: true });
        });

        listItem.appendChild(button);
        subjectsGrid.appendChild(listItem);
        subjectButtons.set(subject.id, button);
      });
    }

    function renderTopics() {
      topicsGrid.innerHTML = '';

      if (!currentSubject) {
        topicsSection.setAttribute('hidden', '');
        return;
      }

      topicsSection.removeAttribute('hidden');
      topicsTitle.textContent = currentSubject.topicsTitle;
      topicsSubtitle.textContent = currentSubject.topicsSubtitle;
      topicsGrid.setAttribute('aria-label', `Blocs de flashcards de ${currentSubject.name}`);

      currentSubject.topics.forEach((topic) => {
        const listItem = document.createElement('li');
        listItem.className = 'topic-card-item';

        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'topic-card';
        button.dataset.topicId = topic.id;

        const title = document.createElement('h3');
        title.textContent = topic.title;

        const summary = document.createElement('p');
        summary.className = 'topic-summary';
        summary.textContent = topic.summary;

        const meta = document.createElement('span');
        meta.className = 'topic-meta';
        meta.textContent = `${topic.cards.length} targetes`;

        button.append(title, summary, meta);
        button.addEventListener('click', () => openTopic(topic.id));

        listItem.appendChild(button);
        topicsGrid.appendChild(listItem);
      });
    }

    function selectSubject(subjectId, { scroll = false } = {}) {
      const subject = subjects.find((item) => item.id === subjectId);
      if (!subject) return;

      currentSubject = subject;

      subjectButtons.forEach((button, id) => {
        const isActive = id === subjectId;
        button.classList.toggle('is-active', isActive);
        button.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      });

      renderTopics();

      if (scroll) {
        topicsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    function findTopic(topicId) {
      for (const subject of subjects) {
        const topic = subject.topics.find((item) => item.id === topicId);
        if (topic) {
          return { subject, topic };
        }
      }
      return null;
    }

    function openTopic(topicId) {
      const match = findTopic(topicId);
      if (!match) return;

      if (currentSubject?.id !== match.subject.id) {
        selectSubject(match.subject.id, { scroll: false });
      }

      currentSubject = match.subject;
      const topic = match.topic;

      topicsSection.setAttribute('hidden', '');
      gameSection.removeAttribute('hidden');

      gameTitle.textContent = topic.title;
      gameSummary.textContent = topic.summary;
      const subjectLabel = currentSubject ? currentSubject.name.toLowerCase() : "l'assignatura seleccionada";
      gameInstructions.textContent = `${instructionsBase} Tens ${topic.cards.length} targetes en aquest bloc de ${subjectLabel}. Pots reiniciar el seguiment quan vulguis.`;

      currentTopic = topic;
      cardStatuses = getOrCreateStatuses(topic);
      currentCardIndex = 0;

      goToCard(0, { focus: false, scroll: false });

      backButton.focus({ preventScroll: true });
      gameSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function renderMainCard(shouldFocus = false) {
      if (!currentTopic) return;

      const card = currentTopic.cards[currentCardIndex];
      const status = cardStatuses[currentCardIndex];
      mainCardSlot.innerHTML = '';

      const button = document.createElement('button');
      button.type = 'button';
      button.className = 'flashcard flashcard-main';
      const baseLabel = `Targeta ${currentCardIndex + 1} de ${currentTopic.cards.length}.`;

      const inner = document.createElement('span');
      inner.className = 'flashcard-inner';

      const front = document.createElement('span');
      front.className = 'flashcard-face flashcard-front';

      const frontBadge = document.createElement('span');
      frontBadge.className = 'flashcard-number';
      frontBadge.textContent = `#${currentCardIndex + 1}`;

      const frontLabel = document.createElement('span');
      frontLabel.className = 'flashcard-label';
      frontLabel.textContent = 'Pregunta';

      const frontText = document.createElement('span');
      frontText.className = 'flashcard-text';
      frontText.textContent = card.question;

      const frontHint = document.createElement('span');
      frontHint.className = 'flashcard-hint';
      frontHint.textContent = 'Clica per descobrir la resposta';

      front.append(frontBadge, frontLabel, frontText, frontHint);

      const back = document.createElement('span');
      back.className = 'flashcard-face flashcard-back';

      const backBadge = document.createElement('span');
      backBadge.className = 'flashcard-number';
      backBadge.textContent = `#${currentCardIndex + 1}`;

      const backLabel = document.createElement('span');
      backLabel.className = 'flashcard-label';
      backLabel.textContent = 'Resposta';

      const backText = document.createElement('span');
      backText.className = 'flashcard-text';
      backText.textContent = card.answer;

      const backHint = document.createElement('span');
      backHint.className = 'flashcard-hint';
      backHint.textContent = 'Torna a clicar per tornar a la pregunta';

      back.append(backBadge, backLabel, backText, backHint);

      inner.append(front, back);
      button.appendChild(inner);

      if (status) {
        button.classList.add(`status-${status}`);
      }

      const updateAria = (isFlipped) => {
        button.setAttribute('aria-expanded', isFlipped ? 'true' : 'false');
        button.setAttribute(
          'aria-label',
          `${baseLabel} ${isFlipped ? 'Prem per tornar a la pregunta.' : 'Prem per veure la resposta.'}`
        );
      };

      updateAria(false);

      button.addEventListener('click', () => {
        const isFlipped = button.classList.toggle('is-flipped');
        updateAria(isFlipped);
      });

      button.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && button.classList.contains('is-flipped')) {
          event.stopPropagation();
          button.classList.remove('is-flipped');
          updateAria(false);
        }
      });

      mainCardSlot.appendChild(button);

      updateGameControls();

      if (shouldFocus) {
        button.focus({ preventScroll: true });
      }
    }

    function renderLibrary() {
      if (!currentTopic) return;

      libraryList.innerHTML = '';

      currentTopic.cards.forEach((card, index) => {
        const item = document.createElement('li');

        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'library-card';
        button.dataset.index = String(index);
        if (index === currentCardIndex) {
          button.setAttribute('aria-current', 'true');
        }

        const status = cardStatuses[index];
        if (status) {
          button.classList.add(`status-${status}`);
        }

        const number = document.createElement('span');
        number.className = 'library-card-number';
        number.textContent = `#${index + 1}`;

        const question = document.createElement('span');
        question.className = 'library-card-text';
        question.textContent = card.question;

        const hint = document.createElement('span');
        hint.className = 'library-card-hint';
        hint.textContent = 'Mostra aquesta targeta i actualitza el seguiment';

        const elements = [number, question];

        if (status) {
          const statusBadge = document.createElement('span');
          statusBadge.className = 'library-status';
          statusBadge.textContent = statusLabels[status];
          elements.push(statusBadge);
        }

        elements.push(hint);

        button.append(...elements);
        button.addEventListener('click', () => {
          goToCard(index, { focus: true, scroll: true });
        });

        item.appendChild(button);
        libraryList.appendChild(item);
      });
    }

    function updateCardProgress() {
      if (!currentTopic) {
        cardProgress.textContent = '';
        return;
      }

      const total = currentTopic.cards.length;
      const counts = cardStatuses.reduce(
        (acc, status) => {
          if (status && acc[status] !== undefined) {
            acc[status] += 1;
          }
          return acc;
        },
        { known: 0, partial: 0, unknown: 0 }
      );

      const summaryParts = [];
      if (counts.known) summaryParts.push(`✅ ${counts.known}`);
      if (counts.partial) summaryParts.push(`🟠 ${counts.partial}`);
      if (counts.unknown) summaryParts.push(`❌ ${counts.unknown}`);

      const summaryText = summaryParts.length ? ` · ${summaryParts.join(' · ')}` : '';
      cardProgress.textContent = `Targeta ${currentCardIndex + 1} de ${total}${summaryText}`;
    }

    function updateKnowledgeButtons() {
      const activeStatus = currentTopic ? cardStatuses[currentCardIndex] : null;

      knowledgeButtons.forEach((button) => {
        const isActive = activeStatus === button.dataset.status;
        button.classList.toggle('is-active', isActive);
        button.setAttribute('aria-pressed', isActive ? 'true' : 'false');
        button.disabled = !currentTopic;
      });
    }

    function updateNavButtons() {
      if (!currentTopic) {
        prevButton.disabled = true;
        nextButton.disabled = true;
        return;
      }

      const total = currentTopic.cards.length;
      const disableNav = total <= 1;
      prevButton.disabled = disableNav;
      nextButton.disabled = disableNav;
    }

    function updateResetButton() {
      resetButton.disabled = !currentTopic;
    }

    function updateGameControls() {
      updateCardProgress();
      updateKnowledgeButtons();
      updateNavButtons();
      updateResetButton();
    }

    function setCardStatus(status) {
      if (!currentTopic) return;

      cardStatuses = getOrCreateStatuses(currentTopic);

      const currentStatus = cardStatuses[currentCardIndex];
      cardStatuses[currentCardIndex] = currentStatus === status ? null : status;
      topicProgress.set(currentTopic.id, cardStatuses);
      persistTopicProgress(currentTopic.id, cardStatuses);

      renderMainCard();
      renderLibrary();
    }

    function goToCard(newIndex, { focus = true, scroll = true } = {}) {
      if (!currentTopic) return;

      const total = currentTopic.cards.length;
      if (!total) return;

      const nextIndex = ((newIndex % total) + total) % total;
      currentCardIndex = nextIndex;

      renderMainCard(focus);
      renderLibrary();

      if (scroll) {
        mainCardSlot.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    function goNext() {
      goToCard(currentCardIndex + 1, { focus: true, scroll: true });
    }

    function goPrev() {
      goToCard(currentCardIndex - 1, { focus: true, scroll: true });
    }

    function handleKeyNavigation(event) {
      if (!currentTopic) return;

      if (event.key === 'ArrowRight') {
        event.preventDefault();
        goToCard(currentCardIndex + 1, { focus: false, scroll: false });
      } else if (event.key === 'ArrowLeft') {
        event.preventDefault();
        goToCard(currentCardIndex - 1, { focus: false, scroll: false });
      }
    }

    function resetProgress() {
      if (!currentTopic) return;

      cardStatuses = getOrCreateStatuses(currentTopic);
      cardStatuses.fill(null);
      topicProgress.set(currentTopic.id, cardStatuses);
      persistTopicProgress(currentTopic.id, cardStatuses);
      goToCard(0, { focus: true, scroll: true });
    }

    function showMenu({ focusFirstTopic = true, scroll = true } = {}) {
      gameSection.setAttribute('hidden', '');
      topicsSection.removeAttribute('hidden');
      if (scroll) {
        (currentSubject ? topicsSection : subjectsSection).scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      currentTopic = null;
      currentCardIndex = 0;
      cardStatuses = [];
      mainCardSlot.innerHTML = '';
      libraryList.innerHTML = '';
      updateGameControls();
      if (focusFirstTopic) {
        const firstTopicButton = topicsGrid.querySelector('button');
        if (firstTopicButton) {
          firstTopicButton.focus({ preventScroll: true });
        }
      }
    }

    window.addEventListener('storage', (event) => {
      if (event.key === 'lastStudent') {
        syncActiveUser({ refreshView: true });
      } else if (event.key === STORAGE_KEY) {
        storageState = loadStorageState();
        syncActiveUser({ refreshView: true });
      }
    });

    document.addEventListener('focusquiz:user-login', () => {
      storageState = loadStorageState();
      syncActiveUser({ refreshView: true });
    });

    document.addEventListener('focusquiz:user-logout', () => {
      storageState = loadStorageState();
      syncActiveUser({ refreshView: true });
    });

    backButton.addEventListener('click', () => showMenu());

    prevButton.addEventListener('click', goPrev);
    nextButton.addEventListener('click', goNext);
    knowledgeButtons.forEach((button) => {
      button.addEventListener('click', () => setCardStatus(button.dataset.status));
    });
    resetButton.addEventListener('click', resetProgress);
    document.addEventListener('keydown', handleKeyNavigation);

    initializeUsers();

    renderSubjects();
    if (subjects.length) {
      selectSubject(subjects[0].id, { scroll: false });
    } else {
      topicsSection.setAttribute('hidden', '');
    }

    updateGameControls();
  </script>
</body>
</html>
