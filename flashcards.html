<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FocusQuiz ¬∑ Flashcards d'estudi</title>
  <meta
    name="description"
    content="Escull una tem√†tica i juga amb les flashcards de preguntes i respostes sobre hist√≤ria del segle XX."
  />
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      background: linear-gradient(180deg, #f8fbff, #eef2ff 320px);
    }

    .flashcards-hero {
      margin: 40px 0 28px;
    }

    .flashcards-hero h1 {
      margin: 0;
      font-size: clamp(1.5rem, 1.1rem + 2vw, 2.4rem);
    }

    .flashcards-hero p {
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 720px;
    }

    .flashcards-nav {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .section-kicker {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(34, 197, 94, 0.12);
      color: #047857;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 0.8rem;
    }

    .topics-section,
    .game-section {
      display: grid;
      gap: 20px;
      margin: 40px 0 70px;
    }

    .topics-section header,
    .game-header {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .topics-section h2,
    .game-header h2 {
      margin: 0;
      font-size: 1.6rem;
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
      max-width: 720px;
    }

    .topics-grid {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .topics-grid li {
      list-style: none;
      margin: 0;
    }

    .topic-card {
      display: flex;
      flex-direction: column;
      gap: 12px;
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(236, 248, 255, 0.9));
      padding: 24px 22px;
      box-shadow: var(--shadow);
      text-align: left;
      color: inherit;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      width: 100%;
      border: none;
      font: inherit;
      background-color: transparent;
    }

    .topic-card:hover,
    .topic-card:focus-visible {
      transform: translateY(-4px);
      border-color: rgba(59, 130, 246, 0.4);
      box-shadow: 0 18px 35px rgba(15, 23, 42, 0.12);
      outline: none;
    }

    .topic-card h3 {
      margin: 0;
      font-size: 1.1rem;
      color: #1d4ed8;
    }

    .topic-summary {
      margin: 0;
      color: var(--muted);
    }

    .topic-meta {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      color: #0f172a;
      background: rgba(59, 130, 246, 0.12);
      border-radius: 999px;
      padding: 6px 12px;
      width: fit-content;
    }

    .game-section {
      margin-bottom: 90px;
    }

    .game-header {
      gap: 16px;
    }

    .pill-back {
      width: fit-content;
    }

    .game-header h2 {
      font-size: clamp(1.3rem, 1.05rem + 1.2vw, 1.8rem);
    }

    .game-instructions {
      margin: 0;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .game-stage {
      margin-top: 40px;
      display: flex;
      justify-content: center;
    }

    .main-card-wrapper {
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: center;
      width: min(100%, 620px);
    }

    .card-progress {
      margin: 0;
      font-weight: 600;
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.14);
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 0.95rem;
    }

    .main-card-slot {
      width: 100%;
      display: flex;
      justify-content: center;
    }

    .flashcard {
      position: relative;
      display: block;
      width: 100%;
      padding: 0;
      border: none;
      background: transparent;
      cursor: pointer;
      perspective: 1200px;
      text-align: left;
    }

    .flashcard:focus-visible {
      outline: 3px solid rgba(59, 130, 246, 0.8);
      outline-offset: 4px;
    }

    .flashcard-main {
      width: min(100%, 560px);
    }

    .flashcard-inner {
      display: block;
      position: relative;
      width: 100%;
      min-height: 220px;
      transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1);
      transform-style: preserve-3d;
    }

    .flashcard-main .flashcard-inner {
      min-height: clamp(320px, 52vh, 420px);
    }

    .flashcard.is-flipped .flashcard-inner {
      transform: rotateY(180deg);
    }

    .flashcard-face {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 16px;
      padding: clamp(24px, 3vw, 34px);
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(241, 245, 249, 0.95));
      box-shadow: var(--shadow);
      backface-visibility: hidden;
    }

    .flashcard-back {
      transform: rotateY(180deg);
      background: linear-gradient(180deg, rgba(226, 246, 255, 0.96), rgba(219, 234, 254, 0.95));
    }

    .flashcard-label {
      font-size: 0.8rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: rgba(15, 23, 42, 0.65);
      font-weight: 700;
    }

    .flashcard-number {
      font-size: 0.75rem;
      font-weight: 600;
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.15);
      border-radius: 999px;
      padding: 4px 10px;
      width: fit-content;
    }

    .flashcard-text {
      font-size: clamp(1.02rem, 0.98rem + 0.4vw, 1.24rem);
      line-height: 1.5;
      color: #0f172a;
      overflow-wrap: anywhere;
    }

    .flashcard-hint {
      font-size: 0.85rem;
      color: rgba(15, 23, 42, 0.6);
    }

    .library-section {
      margin: 48px auto 0;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: stretch;
    }

    .library-section h3 {
      margin: 0;
      font-size: 1.1rem;
    }

    .library-description {
      margin: 0;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .library-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      padding: 0;
      margin: 0;
      list-style: none;
      justify-content: center;
    }

    .library-grid li {
      list-style: none;
      margin: 0;
    }

    .library-card {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
      min-width: 180px;
      max-width: 220px;
      padding: 16px 18px;
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.94), rgba(236, 248, 255, 0.9));
      box-shadow: var(--shadow);
      color: inherit;
      cursor: pointer;
      font: inherit;
      text-align: left;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .library-card:hover,
    .library-card:focus-visible {
      transform: translateY(-3px);
      border-color: rgba(59, 130, 246, 0.45);
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.12);
      outline: none;
    }

    .library-card[aria-current='true'] {
      border-color: rgba(37, 99, 235, 0.8);
      box-shadow: 0 18px 36px rgba(37, 99, 235, 0.15);
      background: linear-gradient(180deg, rgba(226, 244, 255, 0.95), rgba(219, 234, 254, 0.92));
    }

    .library-card-number {
      font-size: 0.78rem;
      font-weight: 700;
      color: #1d4ed8;
      background: rgba(59, 130, 246, 0.16);
      border-radius: 999px;
      padding: 4px 10px;
    }

    .library-card-text {
      font-size: 0.95rem;
      line-height: 1.45;
      color: #0f172a;
      text-align: left;
    }

    .library-card-hint {
      font-size: 0.8rem;
      color: rgba(15, 23, 42, 0.58);
    }

    @media (prefers-reduced-motion: reduce) {
      .topic-card,
      .flashcard-inner,
      .library-card {
        transition-duration: 0.01ms !important;
      }
    }

    @media (max-width: 640px) {
      .flashcards-hero {
        margin: 28px 0 24px;
      }

      .flashcards-nav {
        justify-content: flex-start;
      }

      .game-header {
        gap: 12px;
      }

      .main-card-wrapper {
        width: 100%;
      }

      .flashcard-main .flashcard-inner {
        min-height: 300px;
      }

      .library-grid {
        justify-content: flex-start;
      }

      .library-card {
        flex: 1 1 calc(50% - 14px);
        max-width: none;
      }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="wrap row header-bar">
      <div class="brand">
        <div class="logo">FQ</div>
        <h1>Focus Academy</h1>
      </div>
      <nav class="flashcards-nav" aria-label="Navegaci√≥">
        <a class="pill" href="index.html">‚Üê Torna a l'inici</a>
        <a class="pill" href="https://focuscat.onrender.com/" target="_blank" rel="noopener">Focus Exams</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="flashcards-hero">
      <p class="section-kicker">üÉè Flashcards</p>
      <h1>Flashcards d'estudi ¬∑ Hist√≤ria del segle XX</h1>
      <p>Tria un bloc per comen√ßar i gira les targetes per comprovar qu√® en saps. Cada tema combina preguntes i respostes curtes
        pensades per repassar de manera amena.</p>
    </section>

    <section id="topics-menu" class="topics-section" aria-labelledby="topics-title">
      <header>
        <h2 id="topics-title">Tria el bloc que vols practicar</h2>
        <p class="subtitle">Comen√ßa pel resum dels grans conflictes i transformacions del m√≥n contemporani. Quan seleccionis un
          bloc, s'obriran les targetes corresponents.</p>
      </header>
      <ul id="topics-grid" class="topics-grid" aria-label="Blocs de flashcards d'hist√≤ria"></ul>
    </section>

    <section id="flashcard-game" class="game-section" aria-labelledby="game-title" hidden>
      <div class="game-header">
        <button id="back-button" class="pill pill-back" type="button">‚Üê Torna al men√∫</button>
        <div>
          <h2 id="game-title"></h2>
          <p id="game-summary" class="subtitle"></p>
        </div>
      </div>
      <p id="game-instructions" class="game-instructions"></p>
      <div class="game-stage">
        <div class="main-card-wrapper">
          <p id="card-progress" class="card-progress" aria-live="polite"></p>
          <div id="game-main-card" class="main-card-slot" aria-live="polite"></div>
        </div>
      </div>
      <div class="library-section" aria-label="Biblioteca de targetes">
        <h3>Biblioteca de targetes</h3>
        <p class="library-description">Selecciona una targeta per portar-la a l‚Äôescenari principal. Pots girar la targeta gran per
          comprovar la resposta i tornar-la a girar quan vulguis repassar-la.</p>
        <ol id="game-library" class="library-grid" aria-label="Llista de preguntes"></ol>
      </div>
    </section>
  </main>

  <script>
    const topics = [
      {
        id: 'ww1',
        title: 'ü™ñ Primera Guerra Mundial (1914‚Äì1918)',
        summary: 'Explora les causes, els b√†ndols i les conseq√º√®ncies del primer gran conflicte global.',
        cards: [
          {
            question: 'Quina fou la causa principal de la Primera Guerra Mundial?',
            answer: "Les rivalitats entre pot√®ncies europees i l‚Äôassassinat de l‚Äôarxiduc Francesc Ferran d‚Äô√Äustria.",
          },
          {
            question: 'Quins dos b√†ndols principals es van enfrontar?',
            answer: 'La Triple Entesa (Fran√ßa, Regne Unit i R√∫ssia) contra la Triple Alian√ßa (Alemanya, √Äustria-Hongria i It√†lia).',
          },
          {
            question: 'Quin nou tipus de guerra va apar√®ixer durant la Primera Guerra Mundial?',
            answer: 'La guerra de trinxeres.',
          },
          {
            question: 'Quin tractat va posar fi a la guerra?',
            answer: 'El Tractat de Versalles (1919).',
          },
          {
            question: 'Quines conseq√º√®ncies va tenir per Alemanya?',
            answer: 'P√®rdues territorials, indemnitzacions econ√≤miques i ressentiment social i pol√≠tic.',
          },
        ],
      },
      {
        id: 'ww2',
        title: 'üí£ Segona Guerra Mundial (1939‚Äì1945)',
        summary: 'Repassa els desencadenants, els aliats i els fets clau del conflicte m√©s devastador del segle XX.',
        cards: [
          {
            question: 'Quina va ser la causa immediata de la Segona Guerra Mundial?',
            answer: 'La invasi√≥ d‚ÄôAlemanya a Pol√≤nia el 1939.',
          },
          {
            question: 'Quins dos b√†ndols es van enfrontar?',
            answer: 'Els Aliats (Regne Unit, EUA, URSS) i les Pot√®ncies de l‚ÄôEix (Alemanya, It√†lia, Jap√≥).',
          },
          {
            question: 'Qui era Adolf Hitler?',
            answer: 'El dictador nazi que governava Alemanya i va iniciar la guerra.',
          },
          {
            question: 'Quin fet va posar fi a la guerra al Pac√≠fic?',
            answer: 'Les bombes at√≤miques sobre Hiroshima i Nagasaki (1945).',
          },
          {
            question: 'Quines conseq√º√®ncies va tenir la guerra per al m√≥n?',
            answer: 'Destrucci√≥ massiva, milions de morts i naixement de l‚ÄôONU.',
          },
        ],
      },
      {
        id: 'cold-war',
        title: '‚ùÑÔ∏è Guerra Freda (1947‚Äì1991)',
        summary: 'Ent√©n la rivalitat entre blocs, els s√≠mbols de la divisi√≥ i el final del conflicte ideol√≤gic.',
        cards: [
          {
            question: 'Qu√® era la Guerra Freda?',
            answer: 'Un conflicte ideol√≤gic i pol√≠tic entre els Estats Units i la URSS sense enfrontament directe.',
          },
          {
            question: 'Quins sistemes defensaven els dos blocs?',
            answer: 'Els EUA el capitalisme; la URSS el comunisme.',
          },
          {
            question: 'Quin mur simbolitzava la divisi√≥ d‚ÄôEuropa?',
            answer: 'El mur de Berl√≠n.',
          },
          {
            question: 'Qu√® va ser la cursa espacial?',
            answer: 'La competici√≥ entre EUA i URSS per conquerir l‚Äôespai.',
          },
          {
            question: 'Quin esdeveniment va marcar el final de la Guerra Freda?',
            answer: 'La caiguda del mur de Berl√≠n el 1989 i la desaparici√≥ de la URSS el 1991.',
          },
        ],
      },
      {
        id: 'spain-transition',
        title: 'üá™üá∏ Dictadura i Transici√≥ a Espanya',
        summary: 'Rep√†s breu del franquisme i del cam√≠ cap a la democr√†cia actual.',
        cards: [
          {
            question: 'Qui va governar Espanya despr√©s de la Guerra Civil?',
            answer: 'El dictador Francisco Franco (1939‚Äì1975).',
          },
          {
            question: 'Quines caracter√≠stiques tenia el franquisme?',
            answer: 'Falta de llibertats, censura, persecuci√≥ pol√≠tica i poder concentrat.',
          },
          {
            question: 'Qu√® va passar despr√©s de la mort de Franco?',
            answer: 'Es va iniciar la Transici√≥ Democr√†tica.',
          },
          {
            question: 'Quin rei va protagonitzar la Transici√≥?',
            answer: 'Joan Carles I.',
          },
          {
            question: 'Quin any es va aprovar la Constituci√≥ democr√†tica actual?',
            answer: 'El 1978.',
          },
        ],
      },
      {
        id: 'eu-global',
        title: 'üá™üá∫ Uni√≥ Europea i globalitzaci√≥',
        summary: 'Descobreix com cooperen els pa√Øsos europeus i qu√® implica viure en un m√≥n globalitzat.',
        cards: [
          {
            question: 'Qu√® √©s la Uni√≥ Europea?',
            answer: 'Una organitzaci√≥ de pa√Øsos europeus que cooperen econ√≤micament i pol√≠ticament.',
          },
          {
            question: 'Quin √©s l‚Äôobjectiu principal de la UE?',
            answer: 'Garantir la pau, el progr√©s i la cooperaci√≥ entre els estats membres.',
          },
          {
            question: 'Quin any va apar√®ixer l‚Äôeuro com a moneda comuna?',
            answer: 'El 2002.',
          },
          {
            question: 'Qu√® √©s la globalitzaci√≥?',
            answer: 'El proc√©s d‚Äôinterconnexi√≥ econ√≤mica, cultural i tecnol√≤gica entre pa√Øsos.',
          },
          {
            question: 'Quins avantatges i inconvenients t√© la globalitzaci√≥?',
            answer: 'Avantatges: m√©s comunicaci√≥ i comer√ß. Inconvenients: desigualtats i p√®rdua de cultures locals.',
          },
        ],
      },
    ];

    const topicsGrid = document.getElementById('topics-grid');
    const menuSection = document.getElementById('topics-menu');
    const gameSection = document.getElementById('flashcard-game');
    const gameTitle = document.getElementById('game-title');
    const gameSummary = document.getElementById('game-summary');
    const gameInstructions = document.getElementById('game-instructions');
    const mainCardSlot = document.getElementById('game-main-card');
    const libraryList = document.getElementById('game-library');
    const cardProgress = document.getElementById('card-progress');
    const backButton = document.getElementById('back-button');

    const instructionsBase =
      'Gira la targeta principal per veure la resposta i utilitza la biblioteca inferior per saltar entre preguntes.';

    let currentTopic = null;
    let currentCardIndex = 0;

    function renderTopics() {
      topics.forEach((topic) => {
        const listItem = document.createElement('li');
        listItem.className = 'topic-card-item';

        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'topic-card';
        button.dataset.topicId = topic.id;

        const title = document.createElement('h3');
        title.textContent = topic.title;

        const summary = document.createElement('p');
        summary.className = 'topic-summary';
        summary.textContent = topic.summary;

        const meta = document.createElement('span');
        meta.className = 'topic-meta';
        meta.textContent = `${topic.cards.length} targetes`;

        button.append(title, summary, meta);
        button.addEventListener('click', () => openTopic(topic.id));

        listItem.appendChild(button);
        topicsGrid.appendChild(listItem);
      });
    }

    function openTopic(topicId) {
      const topic = topics.find((item) => item.id === topicId);
      if (!topic) return;

      menuSection.setAttribute('hidden', '');
      gameSection.removeAttribute('hidden');

      gameTitle.textContent = topic.title;
      gameSummary.textContent = topic.summary;
      gameInstructions.textContent = `${instructionsBase} Tens ${topic.cards.length} targetes en aquest bloc.`;

      currentTopic = topic;
      currentCardIndex = 0;

      renderMainCard();
      renderLibrary();

      backButton.focus({ preventScroll: true });
      gameSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function renderMainCard(shouldFocus = false) {
      if (!currentTopic) return;

      const card = currentTopic.cards[currentCardIndex];
      mainCardSlot.innerHTML = '';

      const button = document.createElement('button');
      button.type = 'button';
      button.className = 'flashcard flashcard-main';
      const baseLabel = `Targeta ${currentCardIndex + 1} de ${currentTopic.cards.length}.`;

      const inner = document.createElement('span');
      inner.className = 'flashcard-inner';

      const front = document.createElement('span');
      front.className = 'flashcard-face flashcard-front';

      const frontBadge = document.createElement('span');
      frontBadge.className = 'flashcard-number';
      frontBadge.textContent = `#${currentCardIndex + 1}`;

      const frontLabel = document.createElement('span');
      frontLabel.className = 'flashcard-label';
      frontLabel.textContent = 'Pregunta';

      const frontText = document.createElement('span');
      frontText.className = 'flashcard-text';
      frontText.textContent = card.question;

      const frontHint = document.createElement('span');
      frontHint.className = 'flashcard-hint';
      frontHint.textContent = 'Clica per descobrir la resposta';

      front.append(frontBadge, frontLabel, frontText, frontHint);

      const back = document.createElement('span');
      back.className = 'flashcard-face flashcard-back';

      const backBadge = document.createElement('span');
      backBadge.className = 'flashcard-number';
      backBadge.textContent = `#${currentCardIndex + 1}`;

      const backLabel = document.createElement('span');
      backLabel.className = 'flashcard-label';
      backLabel.textContent = 'Resposta';

      const backText = document.createElement('span');
      backText.className = 'flashcard-text';
      backText.textContent = card.answer;

      const backHint = document.createElement('span');
      backHint.className = 'flashcard-hint';
      backHint.textContent = 'Torna a clicar per tornar a la pregunta';

      back.append(backBadge, backLabel, backText, backHint);

      inner.append(front, back);
      button.appendChild(inner);

      const updateAria = (isFlipped) => {
        button.setAttribute('aria-expanded', isFlipped ? 'true' : 'false');
        button.setAttribute(
          'aria-label',
          `${baseLabel} ${isFlipped ? 'Prem per tornar a la pregunta.' : 'Prem per veure la resposta.'}`
        );
      };

      updateAria(false);

      button.addEventListener('click', () => {
        const isFlipped = button.classList.toggle('is-flipped');
        updateAria(isFlipped);
      });

      button.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && button.classList.contains('is-flipped')) {
          event.stopPropagation();
          button.classList.remove('is-flipped');
          updateAria(false);
        }
      });

      mainCardSlot.appendChild(button);
      cardProgress.textContent = `Targeta ${currentCardIndex + 1} de ${currentTopic.cards.length}`;

      if (shouldFocus) {
        button.focus({ preventScroll: true });
      }
    }

    function renderLibrary() {
      if (!currentTopic) return;

      libraryList.innerHTML = '';

      currentTopic.cards.forEach((card, index) => {
        const item = document.createElement('li');

        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'library-card';
        button.dataset.index = String(index);
        if (index === currentCardIndex) {
          button.setAttribute('aria-current', 'true');
        }

        const number = document.createElement('span');
        number.className = 'library-card-number';
        number.textContent = `#${index + 1}`;

        const question = document.createElement('span');
        question.className = 'library-card-text';
        question.textContent = card.question;

        const hint = document.createElement('span');
        hint.className = 'library-card-hint';
        hint.textContent = 'Mostra aquesta targeta en gran';

        button.append(number, question, hint);
        button.addEventListener('click', () => {
          if (currentCardIndex !== index) {
            currentCardIndex = index;
            renderMainCard(true);
            renderLibrary();
          } else {
            renderMainCard(true);
          }

          mainCardSlot.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });

        item.appendChild(button);
        libraryList.appendChild(item);
      });
    }

    function showMenu() {
      gameSection.setAttribute('hidden', '');
      menuSection.removeAttribute('hidden');
      menuSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      currentTopic = null;
      currentCardIndex = 0;
      mainCardSlot.innerHTML = '';
      libraryList.innerHTML = '';
      cardProgress.textContent = '';
      const firstTopicButton = topicsGrid.querySelector('button');
      if (firstTopicButton) {
        firstTopicButton.focus({ preventScroll: true });
      }
    }

    backButton.addEventListener('click', showMenu);

    renderTopics();
  </script>
</body>
</html>
